var oD=Object.defineProperty,iD=Object.defineProperties;var rD=Object.getOwnPropertyDescriptors;var Ds=Object.getOwnPropertySymbols;var om=Object.prototype.hasOwnProperty,im=Object.prototype.propertyIsEnumerable;var nm=(n,e,t)=>e in n?oD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,g=(n,e)=>{for(var t in e||={})om.call(e,t)&&nm(n,t,e[t]);if(Ds)for(var t of Ds(e))im.call(e,t)&&nm(n,t,e[t]);return n},y=(n,e)=>iD(n,rD(e));var qo=(n,e)=>{var t={};for(var o in n)om.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&Ds)for(var o of Ds(n))e.indexOf(o)<0&&im.call(n,o)&&(t[o]=n[o]);return t};var M=(n,e,t)=>new Promise((o,i)=>{var r=d=>{try{a(t.next(d))}catch(c){i(c)}},s=d=>{try{a(t.throw(d))}catch(c){i(c)}},a=d=>d.done?o(d.value):Promise.resolve(d.value).then(r,s);a((t=t.apply(n,e)).next())});var Ze=null,ws=!1,Bc=1,sD=null,Ue=Symbol("SIGNAL");function O(n){let e=Ze;return Ze=n,e}function Ms(){return Ze}var Zo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qi(n){if(ws)throw new Error("");if(Ze===null)return;Ze.consumerOnSignalRead(n);let e=Ze.producersTail;if(e!==void 0&&e.producer===n)return;let t,o=Ze.recomputing;if(o&&(t=e!==void 0?e.nextProducer:Ze.producers,t!==void 0&&t.producer===n)){Ze.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ze&&(!o||dD(i,Ze)))return;let r=Xo(Ze),s={producer:n,consumer:Ze,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ze.producersTail=s,e!==void 0?e.nextProducer=s:Ze.producers=s,r&&dm(n,s)}function rm(){Bc++}function Vc(n){if(!(Xo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Bc)){if(!n.producerMustRecompute(n)&&!Ji(n)){Lc(n);return}n.producerRecomputeValue(n),Lc(n)}}function jc(n){if(n.consumers===void 0)return;let e=ws;ws=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let o=t.consumer;o.dirty||aD(o)}}finally{ws=e}}function Hc(){return Ze?.consumerAllowSignalWrites!==!1}function aD(n){n.dirty=!0,jc(n),n.consumerMarkedDirty?.(n)}function Lc(n){n.dirty=!1,n.lastCleanEpoch=Bc}function Yo(n){return n&&sm(n),O(n)}function sm(n){n.producersTail=void 0,n.recomputing=!0}function Ki(n,e){O(e),n&&am(n)}function am(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Xo(n))do t=zc(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ji(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,o=e.lastReadVersion;if(o!==t.version||(Vc(t),o!==t.version))return!0}return!1}function oo(n){if(Xo(n)){let e=n.producers;for(;e!==void 0;)e=zc(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function dm(n,e){let t=n.consumersTail,o=Xo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!o)for(let i=n.producers;i!==void 0;i=i.nextProducer)dm(i.producer,i)}function zc(n){let e=n.producer,t=n.nextProducer,o=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,o!==void 0?o.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=o;else if(e.consumers=o,!Xo(e)){let r=e.producers;for(;r!==void 0;)r=zc(r)}return t}function Xo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Uc(n){sD?.(n)}function dD(n,e){let t=e.producersTail;if(t!==void 0){let o=e.producers;do{if(o===n)return!0;if(o===t)break;o=o.nextProducer}while(o!==void 0)}return!1}function $c(n,e){return Object.is(n,e)}function er(n,e){let t=Object.create(cD);t.computation=n,e!==void 0&&(t.equal=e);let o=()=>{if(Vc(t),Qi(t),t.value===Es)throw t.error;return t.value};return o[Ue]=t,Uc(t),o}var Oc=Symbol("UNSET"),Fc=Symbol("COMPUTING"),Es=Symbol("ERRORED"),cD=y(g({},Zo),{value:Oc,dirty:!0,error:null,equal:$c,kind:"computed",producerMustRecompute(n){return n.value===Oc||n.value===Fc},producerRecomputeValue(n){if(n.value===Fc)throw new Error("");let e=n.value;n.value=Fc;let t=Yo(n),o,i=!1;try{o=n.computation(),O(null),i=e!==Oc&&e!==Es&&o!==Es&&n.equal(e,o)}catch(r){o=Es,n.error=r}finally{Ki(n,t)}if(i){n.value=e;return}n.value=o,n.version++}});function lD(){throw new Error}var cm=lD;function lm(n){cm(n)}function Gc(n){cm=n}var uD=null;function Wc(n,e){let t=Object.create(Ss);t.value=n,e!==void 0&&(t.equal=e);let o=()=>um(t);return o[Ue]=t,Uc(t),[o,s=>tr(t,s),s=>fm(t,s)]}function um(n){return Qi(n),n.value}function tr(n,e){Hc()||lm(n),n.equal(n.value,e)||(n.value=e,fD(n))}function fm(n,e){Hc()||lm(n),tr(n,e(n.value))}var Ss=y(g({},Zo),{equal:$c,value:void 0,kind:"signal"});function fD(n){n.version++,rm(),jc(n),uD?.(n)}function qc(n){let e=O(null);try{return n()}finally{O(e)}}var Zc=y(g({},Zo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Yc(n){if(n.dirty=!1,n.version>0&&!Ji(n))return;n.version++;let e=Yo(n);try{n.cleanup(),n.fn()}finally{Ki(n,e)}}function te(n){return typeof n=="function"}function Is(n){let t=n(o=>{Error.call(o),o.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xs=Is(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((o,i)=>`${i+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function io(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let r of t)r.remove(this);else t.remove(this);let{initialTeardown:o}=this;if(te(o))try{o()}catch(r){e=r instanceof xs?r.errors:[r]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let r of i)try{pm(r)}catch(s){e=e??[],s instanceof xs?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xs(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pm(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&io(t,e)}remove(e){let{_finalizers:t}=this;t&&io(t,e),e instanceof n&&e._removeParent(this)}};xe.EMPTY=(()=>{let n=new xe;return n.closed=!0,n})();var Xc=xe.EMPTY;function Ts(n){return n instanceof xe||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function pm(n){te(n)?n():n.unsubscribe()}var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qo={setTimeout(n,e,...t){let{delegate:o}=Qo;return o?.setTimeout?o.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Qo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ns(n){Qo.setTimeout(()=>{let{onUnhandledError:e}=Lt;if(e)e(n);else throw n})}function nr(){}var hm=Qc("C",void 0,void 0);function gm(n){return Qc("E",void 0,n)}function mm(n){return Qc("N",n,void 0)}function Qc(n,e,t){return{kind:n,value:e,error:t}}var ro=null;function Ko(n){if(Lt.useDeprecatedSynchronousErrorHandling){let e=!ro;if(e&&(ro={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:o}=ro;if(ro=null,t)throw o}}else n()}function vm(n){Lt.useDeprecatedSynchronousErrorHandling&&ro&&(ro.errorThrown=!0,ro.error=n)}var so=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ts(e)&&e.add(this)):this.destination=gD}static create(e,t,o){return new Jo(e,t,o)}next(e){this.isStopped?Jc(mm(e),this):this._next(e)}error(e){this.isStopped?Jc(gm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Jc(hm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pD=Function.prototype.bind;function Kc(n,e){return pD.call(n,e)}var el=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(o){ks(o)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(o){ks(o)}else ks(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ks(t)}}},Jo=class extends so{constructor(e,t,o){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:o??void 0};else{let r;this&&Lt.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Kc(e.next,r),error:e.error&&Kc(e.error,r),complete:e.complete&&Kc(e.complete,r)}):i=e}this.destination=new el(i)}};function ks(n){Lt.useDeprecatedSynchronousErrorHandling?vm(n):Ns(n)}function hD(n){throw n}function Jc(n,e){let{onStoppedNotification:t}=Lt;t&&Qo.setTimeout(()=>t(n,e))}var gD={closed:!0,next:nr,error:hD,complete:nr};var ei=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vn(n){return n}function ym(n){return n.length===0?vn:n.length===1?n[0]:function(t){return n.reduce((o,i)=>i(o),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let o=new n;return o.source=this,o.operator=t,o}subscribe(t,o,i){let r=vD(t)?t:new Jo(t,o,i);return Ko(()=>{let{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return o=bm(o),new o((i,r)=>{let s=new Jo({next:a=>{try{t(a)}catch(d){r(d),s.unsubscribe()}},error:r,complete:i});this.subscribe(s)})}_subscribe(t){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(t)}[ei](){return this}pipe(...t){return ym(t)(this)}toPromise(t){return t=bm(t),new t((o,i)=>{let r;this.subscribe(s=>r=s,s=>i(s),()=>o(r))})}}return n.create=e=>new n(e),n})();function bm(n){var e;return(e=n??Lt.Promise)!==null&&e!==void 0?e:Promise}function mD(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function vD(n){return n&&n instanceof so||mD(n)&&Ts(n)}function yD(n){return te(n?.lift)}function Ae(n){return e=>{if(yD(e))return e.lift(function(t){try{return n(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,o,i){return new tl(n,e,t,o,i)}var tl=class extends so{constructor(e,t,o,i,r,s){super(e),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(d){e.error(d)}}:super._next,this._error=i?function(a){try{i(a)}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var _m=Is(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let o=new Ps(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new _m}next(t){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(t)}})}error(t){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:o,isStopped:i,observers:r}=this;return o||i?Xc:(this.currentObservers=null,r.push(t),new xe(()=>{this.currentObservers=null,io(r,t)}))}_checkFinalizedStatuses(t){let{hasError:o,thrownError:i,isStopped:r}=this;o?t.error(i):r&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new Ps(e,t),n})(),Ps=class extends ie{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,e)}error(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&o!==void 0?o:Xc}};var ao=class extends ie{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};var nl={now(){return(nl.delegate||Date).now()},delegate:void 0};var As=class extends xe{constructor(e,t){super()}schedule(e,t=0){return this}};var or={setInterval(n,e,...t){let{delegate:o}=or;return o?.setInterval?o.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=or;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rs=class extends As{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var o;if(this.closed)return this;this.state=e;let i=this.id,r=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,o=0){return or.setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,t,o=0){if(o!=null&&this.delay===o&&this.pending===!1)return t;t!=null&&or.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let o=this._execute(e,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o=!1,i;try{this.work(e)}catch(r){o=!0,i=r||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,io(o,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ti=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,o){return new this.schedulerActionCtor(this,e).schedule(o,t)}};ti.now=nl.now;var Os=class extends ti{constructor(e,t=ti.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let o;this._active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}}};var Cm=new Os(Rs);var Dm=new pe(n=>n.complete());function wm(n){return n&&te(n.schedule)}function Em(n){return n[n.length-1]}function Fs(n){return te(Em(n))?n.pop():void 0}function Ln(n){return wm(Em(n))?n.pop():void 0}function Sm(n,e,t,o){function i(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(l){try{c(o.next(l))}catch(u){s(u)}}function d(l){try{c(o.throw(l))}catch(u){s(u)}}function c(l){l.done?r(l.value):i(l.value).then(a,d)}c((o=o.apply(n,e||[])).next())})}function Mm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function co(n){return this instanceof co?(this.v=n,this):new co(n)}function Im(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(v){return Promise.resolve(v).then(p,u)}}function a(p,v){o[p]&&(i[p]=function(E){return new Promise(function(k,P){r.push([p,E,k,P])>1||d(p,E)})},v&&(i[p]=v(i[p])))}function d(p,v){try{c(o[p](v))}catch(E){h(r[0][3],E)}}function c(p){p.value instanceof co?Promise.resolve(p.value.v).then(l,u):h(r[0][2],p)}function l(p){d("next",p)}function u(p){d("throw",p)}function h(p,v){p(v),r.shift(),r.length&&d(r[0][0],r[0][1])}}function xm(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Mm=="function"?Mm(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=n[r]&&function(s){return new Promise(function(a,d){s=n[r](s),i(a,d,s.done,s.value)})}}function i(r,s,a,d){Promise.resolve(d).then(function(c){r({value:c,done:a})},s)}}var Ls=n=>n&&typeof n.length=="number"&&typeof n!="function";function Bs(n){return te(n?.then)}function Vs(n){return te(n[ei])}function js(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Hs(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zs=bD();function Us(n){return te(n?.[zs])}function $s(n){return Im(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:o,done:i}=yield co(t.read());if(i)return yield co(void 0);yield yield co(o)}}finally{t.releaseLock()}})}function Gs(n){return te(n?.getReader)}function dt(n){if(n instanceof pe)return n;if(n!=null){if(Vs(n))return _D(n);if(Ls(n))return CD(n);if(Bs(n))return DD(n);if(js(n))return Tm(n);if(Us(n))return wD(n);if(Gs(n))return ED(n)}throw Hs(n)}function _D(n){return new pe(e=>{let t=n[ei]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CD(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function DD(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ns)})}function wD(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Tm(n){return new pe(e=>{MD(n,e).catch(t=>e.error(t))})}function ED(n){return Tm($s(n))}function MD(n,e){var t,o,i,r;return Sm(this,void 0,void 0,function*(){try{for(t=xm(n);o=yield t.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=t.return)&&(yield r.call(t))}finally{if(i)throw i.error}}e.complete()})}function ct(n,e,t,o=0,i=!1){let r=e.schedule(function(){t(),i?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(r),!i)return r}function Ws(n,e=0){return Ae((t,o)=>{t.subscribe(Te(o,i=>ct(o,n,()=>o.next(i),e),()=>ct(o,n,()=>o.complete(),e),i=>ct(o,n,()=>o.error(i),e)))})}function qs(n,e=0){return Ae((t,o)=>{o.add(n.schedule(()=>t.subscribe(o),e))})}function Nm(n,e){return dt(n).pipe(qs(e),Ws(e))}function km(n,e){return dt(n).pipe(qs(e),Ws(e))}function Pm(n,e){return new pe(t=>{let o=0;return e.schedule(function(){o===n.length?t.complete():(t.next(n[o++]),t.closed||this.schedule())})})}function Am(n,e){return new pe(t=>{let o;return ct(t,e,()=>{o=n[zs](),ct(t,e,()=>{let i,r;try{({value:i,done:r}=o.next())}catch(s){t.error(s);return}r?t.complete():t.next(i)},0,!0)}),()=>te(o?.return)&&o.return()})}function Zs(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{ct(t,e,()=>{let o=n[Symbol.asyncIterator]();ct(t,e,()=>{o.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Rm(n,e){return Zs($s(n),e)}function Om(n,e){if(n!=null){if(Vs(n))return Nm(n,e);if(Ls(n))return Pm(n,e);if(Bs(n))return km(n,e);if(js(n))return Zs(n,e);if(Us(n))return Am(n,e);if(Gs(n))return Rm(n,e)}throw Hs(n)}function Qt(n,e){return e?Om(n,e):dt(n)}function ir(...n){let e=Ln(n);return Qt(n,e)}function Et(n,e){return Ae((t,o)=>{let i=0;t.subscribe(Te(o,r=>{o.next(n.call(e,r,i++))}))})}var{isArray:SD}=Array;function ID(n,e){return SD(e)?n(...e):n(e)}function Ys(n){return Et(e=>ID(n,e))}var{isArray:xD}=Array,{getPrototypeOf:TD,prototype:ND,keys:kD}=Object;function Xs(n){if(n.length===1){let e=n[0];if(xD(e))return{args:e,keys:null};if(PD(e)){let t=kD(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:n,keys:null}}function PD(n){return n&&typeof n=="object"&&TD(n)===ND}function Qs(n,e){return n.reduce((t,o,i)=>(t[o]=e[i],t),{})}function ol(...n){let e=Ln(n),t=Fs(n),{args:o,keys:i}=Xs(n);if(o.length===0)return Qt([],e);let r=new pe(AD(o,e,i?s=>Qs(i,s):vn));return t?r.pipe(Ys(t)):r}function AD(n,e,t=vn){return o=>{Fm(e,()=>{let{length:i}=n,r=new Array(i),s=i,a=i;for(let d=0;d<i;d++)Fm(e,()=>{let c=Qt(n[d],e),l=!1;c.subscribe(Te(o,u=>{r[d]=u,l||(l=!0,a--),a||o.next(t(r.slice()))},()=>{--s||o.complete()}))},o)},o)}}function Fm(n,e,t){n?ct(t,n,e):e()}function Lm(n,e,t,o,i,r,s,a){let d=[],c=0,l=0,u=!1,h=()=>{u&&!d.length&&!c&&e.complete()},p=E=>c<o?v(E):d.push(E),v=E=>{r&&e.next(E),c++;let k=!1;dt(t(E,l++)).subscribe(Te(e,P=>{i?.(P),r?p(P):e.next(P)},()=>{k=!0},void 0,()=>{if(k)try{for(c--;d.length&&c<o;){let P=d.shift();s?ct(e,s,()=>v(P)):v(P)}h()}catch(P){e.error(P)}}))};return n.subscribe(Te(e,p,()=>{u=!0,h()})),()=>{a?.()}}function il(n,e,t=1/0){return te(e)?il((o,i)=>Et((r,s)=>e(o,r,i,s))(dt(n(o,i))),t):(typeof e=="number"&&(t=e),Ae((o,i)=>Lm(o,i,n,t)))}function Bm(n=1/0){return il(vn,n)}function Vm(){return Bm(1)}function ni(...n){return Vm()(Qt(n,Ln(n)))}function rl(...n){let e=Fs(n),{args:t,keys:o}=Xs(n),i=new pe(r=>{let{length:s}=t;if(!s){r.complete();return}let a=new Array(s),d=s,c=s;for(let l=0;l<s;l++){let u=!1;dt(t[l]).subscribe(Te(r,h=>{u||(u=!0,c--),a[l]=h},()=>d--,void 0,()=>{(!d||!u)&&(c||r.next(o?Qs(o,a):a),r.complete())}))}});return e?i.pipe(Ys(e)):i}function jm(n,e){return Ae((t,o)=>{let i=0;t.subscribe(Te(o,r=>n.call(e,r,i++)&&o.next(r)))})}function sl(n,e=Cm){return Ae((t,o)=>{let i=null,r=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let c=r;r=null,o.next(c)}};function d(){let c=s+n,l=e.now();if(l<c){i=this.schedule(void 0,c-l),o.add(i);return}a()}t.subscribe(Te(o,c=>{r=c,s=e.now(),i||(i=e.schedule(d,n),o.add(i))},()=>{a(),o.complete()},void 0,()=>{r=i=null}))})}function al(n){return n<=0?()=>Dm:Ae((e,t)=>{let o=0;e.subscribe(Te(t,i=>{++o<=n&&(t.next(i),n<=o&&t.complete())}))})}function dl(n,e=vn){return n=n??RD,Ae((t,o)=>{let i,r=!0;t.subscribe(Te(o,s=>{let a=e(s);(r||!n(i,a))&&(r=!1,i=a,o.next(s))}))})}function RD(n,e){return n===e}function rr(n){return jm((e,t)=>n<=t)}function cl(...n){let e=Ln(n);return Ae((t,o)=>{(e?ni(n,t,e):ni(n,t)).subscribe(o)})}function lo(n){return Ae((e,t)=>{dt(n).subscribe(Te(t,()=>t.complete(),nr)),!t.closed&&e.subscribe(t)})}var ll;function Ks(){return ll}function Kt(n){let e=ll;return ll=n,e}var Hm=Symbol("NotFound");function oi(n){return n===Hm||n?.name==="\u0275NotFound"}var ra="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(mo(e,t)),this.code=e}};function OD(n){return`NG0${Math.abs(n)}`}function mo(n,e){return`${OD(n)}${e?": "+e:""}`}var ri=globalThis;function de(n){for(let e in n)if(n[e]===de)return e;throw Error("")}function Wm(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function bn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(bn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let o=t.indexOf(`
`);return o>=0?t.slice(0,o):t}function sa(n,e){return n?e?`${n} ${e}`:n:e||""}var FD=de({__forward_ref__:de});function bt(n){return n.__forward_ref__=bt,n.toString=function(){return bn(this())},n}function Le(n){return wl(n)?n():n}function wl(n){return typeof n=="function"&&n.hasOwnProperty(FD)&&n.__forward_ref__===bt}function C(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function aa(n){return LD(n,da)}function LD(n,e){return n.hasOwnProperty(e)&&n[e]||null}function BD(n){let e=n?.[da]??null;return e||null}function fl(n){return n&&n.hasOwnProperty(ea)?n[ea]:null}var da=de({\u0275prov:de}),ea=de({\u0275inj:de}),N=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=C({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function El(n){return n&&!!n.\u0275providers}var Ml=de({\u0275cmp:de}),Sl=de({\u0275dir:de}),Il=de({\u0275pipe:de}),xl=de({\u0275mod:de}),ar=de({\u0275fac:de}),vo=de({__NG_ELEMENT_ID__:de}),zm=de({__NG_ENV_ID__:de});function qm(n){return la(n,"@NgModule"),n[xl]||null}function jn(n){return la(n,"@Component"),n[Ml]||null}function ca(n){return la(n,"@Directive"),n[Sl]||null}function Zm(n){return la(n,"@Pipe"),n[Il]||null}function la(n,e){if(n==null)throw new H(-919,!1)}function ua(n){return typeof n=="string"?n:n==null?"":String(n)}var Ym=de({ngErrorCode:de}),VD=de({ngErrorMessage:de}),jD=de({ngTokenPath:de});function Tl(n,e){return Xm("",-200,e)}function fa(n,e){throw new H(-201,!1)}function Xm(n,e,t){let o=new H(e,n);return o[Ym]=e,o[VD]=n,t&&(o[jD]=t),o}function HD(n){return n[Ym]}var pl;function Qm(){return pl}function yt(n){let e=pl;return pl=n,e}function Nl(n,e,t){let o=aa(n);if(o&&o.providedIn=="root")return o.value===void 0?o.value=o.factory():o.value;if(t&8)return null;if(e!==void 0)return e;fa(n,"")}var zD={},uo=zD,UD="__NG_DI_FLAG__",hl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let o=fo(t)||0;try{return this.injector.get(e,o&8?null:uo,o)}catch(i){if(oi(i))return i;throw i}}};function $D(n,e=0){let t=Ks();if(t===void 0)throw new H(-203,!1);if(t===null)return Nl(n,void 0,e);{let o=GD(e),i=t.retrieve(n,o);if(oi(i)){if(o.optional)return null;throw i}return i}}function Z(n,e=0){return(Qm()||$D)(Le(n),e)}function f(n,e){return Z(n,fo(e))}function fo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function GD(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function gl(n){let e=[];for(let t=0;t<n.length;t++){let o=Le(n[t]);if(Array.isArray(o)){if(o.length===0)throw new H(900,!1);let i,r=0;for(let s=0;s<o.length;s++){let a=o[s],d=WD(a);typeof d=="number"?d===-1?i=a.token:r|=d:i=a}e.push(Z(i,r))}else e.push(Z(o))}return e}function WD(n){return n[UD]}function po(n,e){let t=n.hasOwnProperty(ar);return t?n[ar]:null}function Km(n,e,t){if(n.length!==e.length)return!1;for(let o=0;o<n.length;o++){let i=n[o],r=e[o];if(t&&(i=t(i),r=t(r)),r!==i)return!1}return!0}function Jm(n){return n.flat(Number.POSITIVE_INFINITY)}function pa(n,e){n.forEach(t=>Array.isArray(t)?pa(t,e):e(t))}function kl(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fr(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ev(n,e){let t=[];for(let o=0;o<n;o++)t.push(e);return t}function tv(n,e,t,o){let i=n.length;if(i==e)n.push(t,o);else if(i===1)n.push(o,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let r=i-2;n[i]=n[r],i--}n[e]=t,n[e+1]=o}}function ha(n,e,t){let o=si(n,e);return o>=0?n[o|1]=t:(o=~o,tv(n,o,e,t)),o}function ga(n,e){let t=si(n,e);if(t>=0)return n[t|1]}function si(n,e){return qD(n,e,1)}function qD(n,e,t){let o=0,i=n.length>>t;for(;i!==o;){let r=o+(i-o>>1),s=n[r<<t];if(e===s)return r<<t;s>e?i=r:o=r+1}return~(i<<t)}var Bt={},Ye=[],Cn=new N(""),Pl=new N("",-1),Al=new N(""),dr=class{get(e,t=uo){if(t===uo){let i=Xm("",-201);throw i.name="\u0275NotFound",i}return t}};function ai(n){return{\u0275providers:n}}function nv(n){return ai([{provide:Cn,multi:!0,useValue:n}])}function ov(...n){return{\u0275providers:Rl(!0,n),\u0275fromNgModule:!0}}function Rl(n,...e){let t=[],o=new Set,i,r=s=>{t.push(s)};return pa(e,s=>{let a=s;ta(a,r,[],o)&&(i||=[],i.push(a))}),i!==void 0&&iv(i,r),t}function iv(n,e){for(let t=0;t<n.length;t++){let{ngModule:o,providers:i}=n[t];Ol(i,r=>{e(r,o)})}}function ta(n,e,t,o){if(n=Le(n),!n)return!1;let i=null,r=fl(n),s=!r&&jn(n);if(!r&&!s){let d=n.ngModule;if(r=fl(d),r)i=d;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=o.has(i);if(s){if(a)return!1;if(o.add(i),s.dependencies){let d=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of d)ta(c,e,t,o)}}else if(r){if(r.imports!=null&&!a){o.add(i);let c;pa(r.imports,l=>{ta(l,e,t,o)&&(c||=[],c.push(l))}),c!==void 0&&iv(c,e)}if(!a){let c=po(i)||(()=>new i);e({provide:i,useFactory:c,deps:Ye},i),e({provide:Al,useValue:i,multi:!0},i),e({provide:Cn,useValue:()=>Z(i),multi:!0},i)}let d=r.providers;if(d!=null&&!a){let c=n;Ol(d,l=>{e(l,c)})}}else return!1;return i!==n&&n.providers!==void 0}function Ol(n,e){for(let t of n)El(t)&&(t=t.\u0275providers),Array.isArray(t)?Ol(t,e):e(t)}var ZD=de({provide:String,useValue:de});function rv(n){return n!==null&&typeof n=="object"&&ZD in n}function YD(n){return!!(n&&n.useExisting)}function XD(n){return!!(n&&n.useFactory)}function ho(n){return typeof n=="function"}function sv(n){return!!n.useClass}var pr=new N(""),Js={},Um={},ul;function di(){return ul===void 0&&(ul=new dr),ul}var He=class{},go=class extends He{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,o,i){super(),this.parent=t,this.source=o,this.scopes=i,vl(e,s=>this.processProvider(s)),this.records.set(Pl,ii(void 0,this)),i.has("environment")&&this.records.set(He,ii(void 0,this));let r=this.records.get(pr);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Al,Ye,{self:!0}))}retrieve(e,t){let o=fo(t)||0;try{return this.get(e,uo,o)}catch(i){if(oi(i))return i;throw i}}destroy(){sr(this),this._destroyed=!0;let e=O(null);try{for(let o of this._ngOnDestroyHooks)o.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let o of t)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),O(e)}}onDestroy(e){return sr(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){sr(this);let t=Kt(this),o=yt(void 0),i;try{return e()}finally{Kt(t),yt(o)}}get(e,t=uo,o){if(sr(this),e.hasOwnProperty(zm))return e[zm](this);let i=fo(o),r,s=Kt(this),a=yt(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let l=tw(e)&&aa(e);l&&this.injectableDefInScope(l)?c=ii(ml(e),Js):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let d=i&2?di():this.parent;return t=i&8&&t===uo?null:t,d.get(e,t)}catch(d){let c=HD(d);throw c===-200||c===-201?new H(c,null):d}finally{yt(a),Kt(s)}}resolveInjectorInitializers(){let e=O(null),t=Kt(this),o=yt(void 0),i;try{let r=this.get(Cn,Ye,{self:!0});for(let s of r)s()}finally{Kt(t),yt(o),O(e)}}toString(){let e=[],t=this.records;for(let o of t.keys())e.push(bn(o));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Le(e);let t=ho(e)?e:Le(e&&e.provide),o=KD(e);if(!ho(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ii(void 0,Js,!0),i.factory=()=>gl(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,o)}hydrate(e,t,o){let i=O(null);try{if(t.value===Um)throw Tl(bn(e));return t.value===Js&&(t.value=Um,t.value=t.factory(void 0,o)),typeof t.value=="object"&&t.value&&ew(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{O(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Le(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ml(n){let e=aa(n),t=e!==null?e.factory:po(n);if(t!==null)return t;if(n instanceof N)throw new H(204,!1);if(n instanceof Function)return QD(n);throw new H(204,!1)}function QD(n){if(n.length>0)throw new H(204,!1);let t=BD(n);return t!==null?()=>t.factory(n):()=>new n}function KD(n){if(rv(n))return ii(void 0,n.useValue);{let e=Fl(n);return ii(e,Js)}}function Fl(n,e,t){let o;if(ho(n)){let i=Le(n);return po(i)||ml(i)}else if(rv(n))o=()=>Le(n.useValue);else if(XD(n))o=()=>n.useFactory(...gl(n.deps||[]));else if(YD(n))o=(i,r)=>Z(Le(n.useExisting),r!==void 0&&r&8?8:void 0);else{let i=Le(n&&(n.useClass||n.provide));if(JD(n))o=()=>new i(...gl(n.deps));else return po(i)||ml(i)}return o}function sr(n){if(n.destroyed)throw new H(205,!1)}function ii(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JD(n){return!!n.deps}function ew(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tw(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function vl(n,e){for(let t of n)Array.isArray(t)?vl(t,e):t&&El(t)?vl(t.\u0275providers,e):e(t)}function ci(n,e){let t;n instanceof go?(sr(n),t=n):t=new hl(n);let o,i=Kt(t),r=yt(void 0);try{return e()}finally{Kt(i),yt(r)}}function av(){return Qm()!==void 0||Ks()!=null}var Vt=0,L=1,j=2,Be=3,St=4,tt=5,yo=6,li=7,Ne=8,Dn=9,Jt=10,fe=11,ui=12,Ll=13,bo=14,nt=15,Hn=16,_o=17,en=18,wn=19,Bl=20,yn=21,ma=22,Bn=23,_t=24,Co=25,Do=26,De=27,dv=1,Vl=6,zn=7,hr=8,wo=9,Ee=10;function tn(n){return Array.isArray(n)&&typeof n[dv]=="object"}function jt(n){return Array.isArray(n)&&n[dv]===!0}function jl(n){return(n.flags&4)!==0}function Un(n){return n.componentOffset>-1}function fi(n){return(n.flags&1)===1}function Ht(n){return!!n.template}function pi(n){return(n[j]&512)!==0}function Eo(n){return(n[j]&256)===256}var Hl="svg",cv="math";function It(n){for(;Array.isArray(n);)n=n[Vt];return n}function zl(n,e){return It(e[n])}function zt(n,e){return It(e[n.index])}function gr(n,e){return n.data[e]}function lv(n,e){return n[e]}function va(n,e,t,o){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=o}function xt(n,e){let t=e[n];return tn(t)?t:t[Vt]}function uv(n){return(n[j]&4)===4}function ya(n){return(n[j]&128)===128}function fv(n){return jt(n[Be])}function Tt(n,e){return e==null?null:n[e]}function Ul(n){n[_o]=0}function $l(n){n[j]&1024||(n[j]|=1024,ya(n)&&Mo(n))}function pv(n,e){for(;n>0;)e=e[bo],n--;return e}function mr(n){return!!(n[j]&9216||n[_t]?.dirty)}function ba(n){n[Jt].changeDetectionScheduler?.notify(8),n[j]&64&&(n[j]|=1024),mr(n)&&Mo(n)}function Mo(n){n[Jt].changeDetectionScheduler?.notify(0);let e=Vn(n);for(;e!==null&&!(e[j]&8192||(e[j]|=8192,!ya(e)));)e=Vn(e)}function Gl(n,e){if(Eo(n))throw new H(911,!1);n[yn]===null&&(n[yn]=[]),n[yn].push(e)}function hv(n,e){if(n[yn]===null)return;let t=n[yn].indexOf(e);t!==-1&&n[yn].splice(t,1)}function Vn(n){let e=n[Be];return jt(e)?e[Be]:e}function Wl(n){return n[li]??=[]}function ql(n){return n.cleanup??=[]}function gv(n,e,t,o){let i=Wl(e);i.push(t),n.firstCreatePass&&ql(n).push(o,i.length-1)}var W={lFrame:Sv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var yl=!1;function mv(){return W.lFrame.elementDepthCount}function vv(){W.lFrame.elementDepthCount++}function Zl(){W.lFrame.elementDepthCount--}function _a(){return W.bindingsEnabled}function Yl(){return W.skipHydrationRootTNode!==null}function Xl(n){return W.skipHydrationRootTNode===n}function Ql(){W.skipHydrationRootTNode=null}function B(){return W.lFrame.lView}function me(){return W.lFrame.tView}function _e(n){return W.lFrame.contextLView=n,n[Ne]}function Ce(n){return W.lFrame.contextLView=null,n}function ze(){let n=Kl();for(;n!==null&&n.type===64;)n=n.parent;return n}function Kl(){return W.lFrame.currentTNode}function yv(){let n=W.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function So(n,e){let t=W.lFrame;t.currentTNode=n,t.isParent=e}function Jl(){return W.lFrame.isParent}function eu(){W.lFrame.isParent=!1}function bv(){return W.lFrame.contextLView}function tu(){return yl}function cr(n){let e=yl;return yl=n,e}function nu(){let n=W.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _v(n){return W.lFrame.bindingIndex=n}function $n(){return W.lFrame.bindingIndex++}function ou(n){let e=W.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Cv(){return W.lFrame.inI18n}function Dv(n,e){let t=W.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ca(e)}function wv(){return W.lFrame.currentDirectiveIndex}function Ca(n){W.lFrame.currentDirectiveIndex=n}function Ev(n){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Da(){return W.lFrame.currentQueryIndex}function vr(n){W.lFrame.currentQueryIndex=n}function nw(n){let e=n[L];return e.type===2?e.declTNode:e.type===1?n[tt]:null}function iu(n,e,t){if(t&4){let i=e,r=n;for(;i=i.parent,i===null&&!(t&1);)if(i=nw(r),i===null||(r=r[bo],i.type&10))break;if(i===null)return!1;e=i,n=r}let o=W.lFrame=Mv();return o.currentTNode=e,o.lView=n,!0}function wa(n){let e=Mv(),t=n[L];W.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Mv(){let n=W.lFrame,e=n===null?null:n.child;return e===null?Sv(n):e}function Sv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Iv(){let n=W.lFrame;return W.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ru=Iv;function Ea(){let n=Iv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function xv(n){return(W.lFrame.contextLView=pv(n,W.lFrame.contextLView))[Ne]}function nn(){return W.lFrame.selectedIndex}function Gn(n){W.lFrame.selectedIndex=n}function yr(){let n=W.lFrame;return gr(n.tView,n.selectedIndex)}function Re(){W.lFrame.currentNamespace=Hl}function Tv(){return W.lFrame.currentNamespace}var Nv=!0;function Ma(){return Nv}function br(n){Nv=n}function bl(n,e=null,t=null,o){let i=su(n,e,t,o);return i.resolveInjectorInitializers(),i}function su(n,e=null,t=null,o,i=new Set){let r=[t||Ye,ov(n)];return o=o||(typeof n=="object"?void 0:bn(n)),new go(r,e||di(),o||null,i)}var he=class n{static THROW_IF_NOT_FOUND=uo;static NULL=new dr;static create(e,t){if(Array.isArray(e))return bl({name:""},t,e,"");{let o=e.name??"";return bl({name:o},e.parent,e.providers,o)}}static \u0275prov=C({token:n,providedIn:"any",factory:()=>Z(Pl)});static __NG_ELEMENT_ID__=-1},J=new N(""),ut=(()=>{class n{static __NG_ELEMENT_ID__=ow;static __NG_ENV_ID__=t=>t}return n})(),na=class extends ut{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Eo(this._lView)}onDestroy(e){let t=this._lView;return Gl(t,e),()=>hv(t,e)}};function ow(){return new na(B())}var au=!1,kv=new N(""),Io=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ao(!1);debugTaskTracker=f(kv,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new pe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=C({token:n,providedIn:"root",factory:()=>new n})}return n})(),_l=class extends ie{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,av()&&(this.destroyRef=f(ut,{optional:!0})??void 0,this.pendingTasks=f(Io,{optional:!0})??void 0)}emit(e){let t=O(null);try{super.next(e)}finally{O(t)}}subscribe(e,t,o){let i=e,r=t||(()=>null),s=o;if(e&&typeof e=="object"){let d=e;i=d.next?.bind(d),r=d.error?.bind(d),s=d.complete?.bind(d)}this.__isAsync&&(r=this.wrapInTimeout(r),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:r,complete:s});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return t=>{let o=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{o!==void 0&&this.pendingTasks?.remove(o)}})}}},re=_l;function oa(...n){}function du(n){let e,t;function o(){n=oa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch(i){}}return e=setTimeout(()=>{n(),o()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),o()})),()=>o()}function Pv(n){return queueMicrotask(()=>n()),()=>{n=oa}}var cu="isAngularZone",lr=cu+"_ID",iw=0,q=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new re(!1);onMicrotaskEmpty=new re(!1);onStable=new re(!1);onError=new re(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:r=au}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&o,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=r,aw(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(cu)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,o){return this._inner.run(e,t,o)}runTask(e,t,o,i){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,rw,oa,oa);try{return r.runTask(s,t,o)}finally{r.cancelTask(s)}}runGuarded(e,t,o){return this._inner.runGuarded(e,t,o)}runOutsideAngular(e){return this._outer.run(e)}},rw={};function lu(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sw(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){du(()=>{n.callbackScheduled=!1,Cl(n),n.isCheckStableRunning=!0,lu(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Cl(n)}function aw(n){let e=()=>{sw(n)},t=iw++;n._inner=n._inner.fork({name:"angular",properties:{[cu]:!0,[lr]:t,[lr+t]:!0},onInvokeTask:(o,i,r,s,a,d)=>{if(dw(d))return o.invokeTask(r,s,a,d);try{return $m(n),o.invokeTask(r,s,a,d)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Gm(n)}},onInvoke:(o,i,r,s,a,d,c)=>{try{return $m(n),o.invoke(r,s,a,d,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cw(d)&&e(),Gm(n)}},onHasTask:(o,i,r,s)=>{o.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Cl(n),lu(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(o,i,r,s)=>(o.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Cl(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $m(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Gm(n){n._nesting--,lu(n)}var ur=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new re;onMicrotaskEmpty=new re;onStable=new re;onError=new re;run(e,t,o){return e.apply(t,o)}runGuarded(e,t,o){return e.apply(t,o)}runOutsideAngular(e){return e()}runTask(e,t,o,i){return e.apply(t,o)}};function dw(n){return Av(n,"__ignore_ng_zone__")}function cw(n){return Av(n,"__scheduler_tick__")}function Av(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Mt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},En=new N("",{factory:()=>{let n=f(q),e=f(He),t;return o=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw o}):(t??=e.get(Mt),t.handleError(o))})}}}),Rv={provide:Cn,useValue:()=>{let n=f(Mt,{optional:!0})},multi:!0},lw=new N("",{factory:()=>{let n=f(J).defaultView;if(!n)return;let e=f(En),t=r=>{e(r.reason),r.preventDefault()},o=r=>{r.error?e(r.error):e(new Error(r.message,{cause:r})),r.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",o)};typeof Zone<"u"?Zone.root.run(i):i(),f(ut).onDestroy(()=>{n.removeEventListener("error",o),n.removeEventListener("unhandledrejection",t)})}});function uu(){return ai([nv(()=>{f(lw)})])}function F(n,e){let[t,o,i]=Wc(n,e?.equal),r=t,s=r[Ue];return r.set=o,r.update=i,r.asReadonly=fu.bind(r),r}function fu(){let n=this[Ue];if(n.readonlyFn===void 0){let e=()=>this();e[Ue]=n,n.readonlyFn=e}return n.readonlyFn}var _r=(()=>{class n{view;node;constructor(t,o){this.view=t,this.node=o}static __NG_ELEMENT_ID__=uw}return n})();function uw(){return new _r(B(),ze())}var _n=class{},hi=new N("",{factory:()=>!0});var Sa=new N("");var Ia=(()=>{class n{static \u0275prov=C({token:n,providedIn:"root",factory:()=>new Dl})}return n})(),Dl=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,o=this.queues.get(t);o.has(e)&&(o.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let o=this.queues.get(t);o.has(e)||o.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,o]of this.queues)t===null?e||=this.flushQueue(o):e||=t.run(()=>this.flushQueue(o));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let o of e)o.dirty&&(this.dirtyEffectCount--,t=!0,o.run());return t}},ia=class{[Ue];constructor(e){this[Ue]=e}destroy(){this[Ue].destroy()}};function Me(n,e){let t=e?.injector??f(he),o=e?.manualCleanup!==!0?t.get(ut):null,i,r=t.get(_r,null,{optional:!0}),s=t.get(_n);return r!==null?(i=hw(r.view,s,n),o instanceof na&&o._lView===r.view&&(o=null)):i=gw(n,t.get(Ia),s),i.injector=t,o!==null&&(i.onDestroyFns=[o.onDestroy(()=>i.destroy())]),new ia(i)}var Ov=y(g({},Zc),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=cr(!1);try{Yc(this)}finally{cr(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=O(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],O(n)}}}),fw=y(g({},Ov),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(oo(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),pw=y(g({},Ov),{consumerMarkedDirty(){this.view[j]|=8192,Mo(this.view),this.notifier.notify(13)},destroy(){if(oo(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Bn]?.delete(this)}});function hw(n,e,t){let o=Object.create(pw);return o.view=n,o.zone=typeof Zone<"u"?Zone.current:null,o.notifier=e,o.fn=Fv(o,t),n[Bn]??=new Set,n[Bn].add(o),o.consumerMarkedDirty(o),o}function gw(n,e,t){let o=Object.create(fw);return o.fn=Fv(o,n),o.scheduler=e,o.notifier=t,o.zone=typeof Zone<"u"?Zone.current:null,o.scheduler.add(o),o.notifier.notify(12),o}function Fv(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function Oe(n){return qc(n)}function Tr(n){return{toString:n}.toString()}function ww(n){return typeof n=="function"}function my(n,e,t,o){e!==null?e.applyValueToInputSignal(e,o):n[t]=o}var Fa=class{previousValue;currentValue;firstChange;constructor(e,t,o){this.previousValue=e,this.currentValue=t,this.firstChange=o}isFirstChange(){return this.firstChange}},qn=(()=>{let n=()=>vy;return n.ngInherit=!0,n})();function vy(n){return n.type.prototype.ngOnChanges&&(n.setInput=Mw),Ew}function Ew(){let n=by(this),e=n?.current;if(e){let t=n.previous;if(t===Bt)n.previous=e;else for(let o in e)t[o]=e[o];n.current=null,this.ngOnChanges(e)}}function Mw(n,e,t,o,i){let r=this.declaredInputs[o],s=by(n)||Sw(n,{previous:Bt,current:null}),a=s.current||(s.current={}),d=s.previous,c=d[r];a[r]=new Fa(c&&c.currentValue,t,d===Bt),my(n,e,i,t)}var yy="__ngSimpleChanges__";function by(n){return n[yy]||null}function Sw(n,e){return n[yy]=e}var Lv=[];var ce=function(n,e=null,t){for(let o=0;o<Lv.length;o++){let i=Lv[o];i(n,e,t)}},ne=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ne||{});function Iw(n,e,t){let{ngOnChanges:o,ngOnInit:i,ngDoCheck:r}=e.type.prototype;if(o){let s=vy(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),r&&((t.preOrderHooks??=[]).push(n,r),(t.preOrderCheckHooks??=[]).push(n,r))}function _y(n,e){for(let t=e.directiveStart,o=e.directiveEnd;t<o;t++){let r=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:d,ngAfterViewChecked:c,ngOnDestroy:l}=r;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),d&&(n.viewHooks??=[]).push(-t,d),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function ka(n,e,t){Cy(n,e,3,t)}function Pa(n,e,t,o){(n[j]&3)===t&&Cy(n,e,t,o)}function pu(n,e){let t=n[j];(t&3)===e&&(t&=16383,t+=1,n[j]=t)}function Cy(n,e,t,o){let i=o!==void 0?n[_o]&65535:0,r=o??-1,s=e.length-1,a=0;for(let d=i;d<s;d++)if(typeof e[d+1]=="number"){if(a=e[d],o!=null&&a>=o)break}else e[d]<0&&(n[_o]+=65536),(a<r||r==-1)&&(xw(n,t,e,d),n[_o]=(n[_o]&4294901760)+d+2),d++}function Bv(n,e){ce(ne.LifecycleHookStart,n,e);let t=O(null);try{e.call(n)}finally{O(t),ce(ne.LifecycleHookEnd,n,e)}}function xw(n,e,t,o){let i=t[o]<0,r=t[o+1],s=i?-t[o]:t[o],a=n[s];i?n[j]>>14<n[_o]>>16&&(n[j]&3)===e&&(n[j]+=16384,Bv(a,r)):Bv(a,r)}var mi=-1,To=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,o,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=o}};function Tw(n){return(n.flags&8)!==0}function Nw(n){return(n.flags&16)!==0}function kw(n,e,t){let o=0;for(;o<t.length;){let i=t[o];if(typeof i=="number"){if(i!==0)break;o++;let r=t[o++],s=t[o++],a=t[o++];n.setAttribute(e,s,a,r)}else{let r=i,s=t[++o];Aw(r)?n.setProperty(e,r,s):n.setAttribute(e,r,s),o++}}return o}function Pw(n){return n===3||n===4||n===6}function Aw(n){return n.charCodeAt(0)===64}function vi(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let o=0;o<e.length;o++){let i=e[o];typeof i=="number"?t=i:t===0||(t===-1||t===2?Vv(n,t,i,null,e[++o]):Vv(n,t,i,null,null))}}return n}function Vv(n,e,t,o,i){let r=0,s=n.length;if(e===-1)s=-1;else for(;r<n.length;){let a=n[r++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=r-1;break}}}for(;r<n.length;){let a=n[r];if(typeof a=="number")break;if(a===t){i!==null&&(n[r+1]=i);return}r++,i!==null&&r++}s!==-1&&(n.splice(s,0,e),r=s+1),n.splice(r++,0,t),i!==null&&n.splice(r++,0,i)}function Dy(n){return n!==mi}function La(n){return n&32767}function Rw(n){return n>>16}function Ba(n,e){let t=Rw(n),o=e;for(;t>0;)o=o[bo],t--;return o}var wu=!0;function jv(n){let e=wu;return wu=n,e}var Ow=256,wy=Ow-1,Ey=5,Fw=0,on={};function Lw(n,e,t){let o;typeof t=="string"?o=t.charCodeAt(0)||0:t.hasOwnProperty(vo)&&(o=t[vo]),o==null&&(o=t[vo]=Fw++);let i=o&wy,r=1<<i;e.data[n+(i>>Ey)]|=r}function Va(n,e){let t=My(n,e);if(t!==-1)return t;let o=e[L];o.firstCreatePass&&(n.injectorIndex=e.length,hu(o.data,n),hu(e,null),hu(o.blueprint,null));let i=rf(n,e),r=n.injectorIndex;if(Dy(i)){let s=La(i),a=Ba(i,e),d=a[L].data;for(let c=0;c<8;c++)e[r+c]=a[s+c]|d[s+c]}return e[r+8]=i,r}function hu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function My(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function rf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,o=null,i=e;for(;i!==null;){if(o=Ny(i),o===null)return mi;if(t++,i=i[bo],o.injectorIndex!==-1)return o.injectorIndex|t<<16}return mi}function Eu(n,e,t){Lw(n,e,t)}function Sy(n,e,t){if(t&8||n!==void 0)return n;fa(e,"NodeInjector")}function Iy(n,e,t,o){if(t&8&&o===void 0&&(o=null),(t&3)===0){let i=n[Dn],r=yt(void 0);try{return i?i.get(e,o,t&8):Nl(e,o,t&8)}finally{yt(r)}}return Sy(o,e,t)}function xy(n,e,t,o=0,i){if(n!==null){if(e[j]&2048&&!(o&2)){let s=Hw(n,e,t,o,on);if(s!==on)return s}let r=Ty(n,e,t,o,on);if(r!==on)return r}return Iy(e,t,o,i)}function Ty(n,e,t,o,i){let r=Vw(t);if(typeof r=="function"){if(!iu(e,n,o))return o&1?Sy(i,t,o):Iy(e,t,o,i);try{let s;if(s=r(o),s==null&&!(o&8))fa(t);else return s}finally{ru()}}else if(typeof r=="number"){let s=null,a=My(n,e),d=mi,c=o&1?e[nt][tt]:null;for((a===-1||o&4)&&(d=a===-1?rf(n,e):e[a+8],d===mi||!zv(o,!1)?a=-1:(s=e[L],a=La(d),e=Ba(d,e)));a!==-1;){let l=e[L];if(Hv(r,a,l.data)){let u=Bw(a,e,t,s,o,c);if(u!==on)return u}d=e[a+8],d!==mi&&zv(o,e[L].data[a+8]===c)&&Hv(r,a,e)?(s=l,a=La(d),e=Ba(d,e)):a=-1}}return i}function Bw(n,e,t,o,i,r){let s=e[L],a=s.data[n+8],d=o==null?Un(a)&&wu:o!=s&&(a.type&3)!==0,c=i&1&&r===a,l=Aa(a,s,t,d,c);return l!==null?wr(e,s,l,a,i):on}function Aa(n,e,t,o,i){let r=n.providerIndexes,s=e.data,a=r&1048575,d=n.directiveStart,c=n.directiveEnd,l=r>>20,u=o?a:a+l,h=i?a+l:c;for(let p=u;p<h;p++){let v=s[p];if(p<d&&t===v||p>=d&&v.type===t)return p}if(i){let p=s[d];if(p&&Ht(p)&&p.type===t)return d}return null}function wr(n,e,t,o,i){let r=n[t],s=e.data;if(r instanceof To){let a=r;if(a.resolving)throw Tl("");let d=jv(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],l,u=a.injectImpl?yt(a.injectImpl):null,h=iu(n,o,0);try{r=n[t]=a.factory(void 0,i,s,n,o),e.firstCreatePass&&t>=o.directiveStart&&Iw(t,s[t],e)}finally{u!==null&&yt(u),jv(d),a.resolving=!1,ru()}}return r}function Vw(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(vo)?n[vo]:void 0;return typeof e=="number"?e>=0?e&wy:jw:e}function Hv(n,e,t){let o=1<<n;return!!(t[e+(n>>Ey)]&o)}function zv(n,e){return!(n&2)&&!(n&1&&e)}var xo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,o){return xy(this._tNode,this._lView,e,fo(o),t)}};function jw(){return new xo(ze(),B())}function ve(n){return Tr(()=>{let e=n.prototype.constructor,t=e[ar]||Mu(e),o=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==o;){let r=i[ar]||Mu(i);if(r&&r!==t)return r;i=Object.getPrototypeOf(i)}return r=>new r})}function Mu(n){return wl(n)?()=>{let e=Mu(Le(n));return e&&e()}:po(n)}function Hw(n,e,t,o,i){let r=n,s=e;for(;r!==null&&s!==null&&s[j]&2048&&!pi(s);){let a=Ty(r,s,t,o|2,on);if(a!==on)return a;let d=r.parent;if(!d){let c=s[Bl];if(c){let l=c.get(t,on,o);if(l!==on)return l}d=Ny(s),s=s[bo]}r=d}return i}function Ny(n){let e=n[L],t=e.type;return t===2?e.declTNode:t===1?n[tt]:null}function zw(){return Di(ze(),B())}function Di(n,e){return new Y(zt(n,e))}var Y=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=zw}return n})();function ky(n){return n instanceof Y?n.nativeElement:n}function Uw(){return this._results[Symbol.iterator]()}var ja=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ie}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let o=Jm(e);(this._changesDetected=!Km(this._results,o,t))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Uw};function Py(n){return(n.flags&128)===128}var sf=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(sf||{}),Ay=new Map,$w=0;function Gw(){return $w++}function Ww(n){Ay.set(n[wn],n)}function Su(n){Ay.delete(n[wn])}var Uv="__ngContext__";function yi(n,e){tn(e)?(n[Uv]=e[wn],Ww(e)):n[Uv]=e}function Ry(n){return Fy(n[ui])}function Oy(n){return Fy(n[St])}function Fy(n){for(;n!==null&&!jt(n);)n=n[St];return n}var qw;function af(n){qw=n}var wi=new N("",{factory:()=>Zw}),Zw="ng";var Ka=new N(""),Sn=new N("",{providedIn:"platform",factory:()=>"unknown"}),Nr=new N(""),Ei=new N("",{factory:()=>f(J).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ly="r";var By="di";var Vy=!1,jy=new N("",{factory:()=>Vy});var Yw=(n,e,t,o)=>{};function Xw(n,e,t,o){Yw(n,e,t,o)}function Ja(n){return(n.flags&32)===32}var Qw=()=>null;function Hy(n,e,t=!1){return Qw(n,e,t)}function zy(n,e){let t=n.contentQueries;if(t!==null){let o=O(null);try{for(let i=0;i<t.length;i+=2){let r=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];vr(r),a.contentQueries(2,e[s],s)}}}finally{O(o)}}}function Iu(n,e,t){vr(0);let o=O(null);try{e(n,t)}finally{O(o)}}function df(n,e,t){if(jl(e)){let o=O(null);try{let i=e.directiveStart,r=e.directiveEnd;for(let s=i;s<r;s++){let a=n.data[s];if(a.contentQueries){let d=t[s];a.contentQueries(1,d,s)}}}finally{O(o)}}}var Gt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Gt||{});var xa;function Kw(){if(xa===void 0&&(xa=null,ri.trustedTypes))try{xa=ri.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return xa}function ed(n){return Kw()?.createHTML(n)||n}var Mn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ra})`}},xu=class extends Mn{getTypeName(){return"HTML"}},Tu=class extends Mn{getTypeName(){return"Style"}},Nu=class extends Mn{getTypeName(){return"Script"}},ku=class extends Mn{getTypeName(){return"URL"}},Pu=class extends Mn{getTypeName(){return"ResourceURL"}};function an(n){return n instanceof Mn?n.changingThisBreaksApplicationSecurity:n}function Zn(n,e){let t=Uy(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ra})`)}return t===e}function Uy(n){return n instanceof Mn&&n.getTypeName()||null}function cf(n){return new xu(n)}function lf(n){return new Tu(n)}function uf(n){return new Nu(n)}function ff(n){return new ku(n)}function pf(n){return new Pu(n)}function Jw(n){let e=new Ru(n);return eE()?new Au(e):e}var Au=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(ed(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch(t){return null}}},Ru=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=ed(e),t}};function eE(){try{return!!new window.DOMParser().parseFromString(ed(""),"text/html")}catch(n){return!1}}var tE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kr(n){return n=String(n),n.match(tE)?n:"unsafe:"+n}function In(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Pr(...n){let e={};for(let t of n)for(let o in t)t.hasOwnProperty(o)&&(e[o]=!0);return e}var $y=In("area,br,col,hr,img,wbr"),Gy=In("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wy=In("rp,rt"),nE=Pr(Wy,Gy),oE=Pr(Gy,In("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),iE=Pr(Wy,In("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$v=Pr($y,oE,iE,nE),qy=In("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rE=In("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sE=In("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),aE=Pr(qy,rE,sE),dE=In("script,style,template"),Ou=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,o=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?o=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,o&&t.firstChild){i.push(t),t=uE(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=lE(t);if(r){t=r;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=Gv(e).toLowerCase();if(!$v.hasOwnProperty(t))return this.sanitizedSomething=!0,!dE.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let o=e.attributes;for(let i=0;i<o.length;i++){let r=o.item(i),s=r.name,a=s.toLowerCase();if(!aE.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let d=r.value;qy[a]&&(d=kr(d)),this.buf.push(" ",s,'="',Wv(d),'"')}return this.buf.push(">"),!0}endElement(e){let t=Gv(e).toLowerCase();$v.hasOwnProperty(t)&&!$y.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Wv(e))}};function cE(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function lE(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw Zy(e);return e}function uE(n){let e=n.firstChild;if(e&&cE(n,e))throw Zy(e);return e}function Gv(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function Zy(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var fE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pE=/([^\#-~ |!])/g;function Wv(n){return n.replace(/&/g,"&amp;").replace(fE,function(e){let t=e.charCodeAt(0),o=e.charCodeAt(1);return"&#"+((t-55296)*1024+(o-56320)+65536)+";"}).replace(pE,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ta;function hf(n,e){let t=null;try{Ta=Ta||Jw(n);let o=e?String(e):"";t=Ta.getInertBodyElement(o);let i=5,r=o;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,o=r,r=t.innerHTML,t=Ta.getInertBodyElement(o)}while(o!==r);let a=new Ou().sanitizeChildren(qv(t)||t);return ed(a)}finally{if(t){let o=qv(t)||t;for(;o.firstChild;)o.firstChild.remove()}}}function qv(n){return"content"in n&&hE(n)?n.content:null}function hE(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var gE=/^>|^->|<!--|-->|--!>|<!-$/g,mE=/(<|>)/g,vE="\u200B$1\u200B";function yE(n){return n.replace(gE,e=>e.replace(mE,vE))}function bE(n,e){return n.createText(e)}function _E(n,e,t){n.setValue(e,t)}function CE(n,e){return n.createComment(yE(e))}function Yy(n,e,t){return n.createElement(e,t)}function Ha(n,e,t,o,i){n.insertBefore(e,t,o,i)}function Xy(n,e,t){n.appendChild(e,t)}function Zv(n,e,t,o,i){o!==null?Ha(n,e,t,o,i):Xy(n,e,t)}function Qy(n,e,t,o){n.removeChild(null,e,t,o)}function DE(n,e,t){n.setAttribute(e,"style",t)}function wE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Ky(n,e,t){let{mergedAttrs:o,classes:i,styles:r}=t;o!==null&&kw(n,e,o),i!==null&&wE(n,e,i),r!==null&&DE(n,e,r)}var kt=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(kt||{});function gf(n){let e=EE();return e?e.sanitize(kt.URL,n)||"":Zn(n,"URL")?an(n):kr(ua(n))}function EE(){let n=B();return n&&n[Jt].sanitizer}function Po(n){return n.ownerDocument}function ME(n){return n instanceof Function?n():n}function SE(n,e,t){let o=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let r=e.length;if(i+r===o||n.charCodeAt(i+r)<=32)return i}t=i+1}}var Jy="ng-template";function IE(n,e,t,o){let i=0;if(o){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SE(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(mf(n))return!1;if(i=e.indexOf(1,i),i>-1){let r;for(;++i<e.length&&typeof(r=e[i])=="string";)if(r.toLowerCase()===t)return!0}return!1}function mf(n){return n.type===4&&n.value!==Jy}function xE(n,e,t){let o=n.type===4&&!t?Jy:n.value;return e===o}function TE(n,e,t){let o=4,i=n.attrs,r=i!==null?PE(i):0,s=!1;for(let a=0;a<e.length;a++){let d=e[a];if(typeof d=="number"){if(!s&&!Ut(o)&&!Ut(d))return!1;if(s&&Ut(d))continue;s=!1,o=d|o&1;continue}if(!s)if(o&4){if(o=2|o&1,d!==""&&!xE(n,d,t)||d===""&&e.length===1){if(Ut(o))return!1;s=!0}}else if(o&8){if(i===null||!IE(n,i,d,t)){if(Ut(o))return!1;s=!0}}else{let c=e[++a],l=NE(d,i,mf(n),t);if(l===-1){if(Ut(o))return!1;s=!0;continue}if(c!==""){let u;if(l>r?u="":u=i[l+1].toLowerCase(),o&2&&c!==u){if(Ut(o))return!1;s=!0}}}}return Ut(o)||s}function Ut(n){return(n&1)===0}function NE(n,e,t,o){if(e===null)return-1;let i=0;if(o||!t){let r=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)r=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=r?1:2}return-1}else return AE(e,n)}function eb(n,e,t=!1){for(let o=0;o<e.length;o++)if(TE(n,e[o],t))return!0;return!1}function kE(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function PE(n){for(let e=0;e<n.length;e++){let t=n[e];if(Pw(t))return e}return n.length}function AE(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let o=n[t];if(typeof o=="number")return-1;if(o===e)return t;t++}return-1}function RE(n,e){e:for(let t=0;t<e.length;t++){let o=e[t];if(n.length===o.length){for(let i=0;i<n.length;i++)if(n[i]!==o[i])continue e;return!0}}return!1}function Yv(n,e){return n?":not("+e.trim()+")":e}function OE(n){let e=n[0],t=1,o=2,i="",r=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(o&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else o&8?i+="."+s:o&4&&(i+=" "+s);else i!==""&&!Ut(s)&&(e+=Yv(r,i),i=""),o=s,r=r||!Ut(o);t++}return i!==""&&(e+=Yv(r,i)),e}function FE(n){return n.map(OE).join(",")}function LE(n){let e=[],t=[],o=1,i=2;for(;o<n.length;){let r=n[o];if(typeof r=="string")i===2?r!==""&&e.push(r,n[++o]):i===8&&t.push(r);else{if(!Ut(i))break;i=r}o++}return t.length&&e.push(1,...t),e}var Pt={};function vf(n,e,t,o,i,r,s,a,d,c,l){let u=De+o,h=u+i,p=BE(u,h),v=typeof c=="function"?c():c;return p[L]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:d,consts:v,incompleteFirstPass:!1,ssrId:l}}function BE(n,e){let t=[];for(let o=0;o<e;o++)t.push(o<n?null:Pt);return t}function VE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=vf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yf(n,e,t,o,i,r,s,a,d,c,l){let u=e.blueprint.slice();return u[Vt]=i,u[j]=o|4|128|8|64|1024,(c!==null||n&&n[j]&2048)&&(u[j]|=2048),Ul(u),u[Be]=u[bo]=n,u[Ne]=t,u[Jt]=s||n&&n[Jt],u[fe]=a||n&&n[fe],u[Dn]=d||n&&n[Dn]||null,u[tt]=r,u[wn]=Gw(),u[yo]=l,u[Bl]=c,u[nt]=e.type==2?n[nt]:u,u}function jE(n,e,t){let o=zt(e,n),i=VE(t),r=n[Jt].rendererFactory,s=bf(n,yf(n,i,null,tb(t),o,e,null,r.createRenderer(o,t),null,null,null));return n[e.index]=s}function tb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function nb(n,e,t,o){if(t===0)return-1;let i=e.length;for(let r=0;r<t;r++)e.push(o),n.blueprint.push(o),n.data.push(null);return i}function bf(n,e){return n[ui]?n[Ll][St]=e:n[ui]=e,n[Ll]=e,e}function b(n=1){ob(me(),B(),nn()+n,!1)}function ob(n,e,t,o){if(!o)if((e[j]&3)===3){let r=n.preOrderCheckHooks;r!==null&&ka(e,r,t)}else{let r=n.preOrderHooks;r!==null&&Pa(e,r,0,t)}Gn(t)}var td=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(td||{});function Fu(n,e,t,o){let i=O(null);try{let[r,s,a]=n.inputs[t],d=null;(s&td.SignalBased)!==0&&(d=e[r][Ue]),d!==null&&d.transformFn!==void 0?o=d.transformFn(o):a!==null&&(o=a.call(e,o)),n.setInput!==null?n.setInput(e,d,o,t,r):my(e,d,r,o)}finally{O(i)}}var rn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(rn||{}),HE;function _f(n,e){return HE(n,e)}var No=new Set,nd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(nd||{}),Ao=new N(""),Xv=new Set;function xn(n){Xv.has(n)||(Xv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Cf=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=C({token:n,providedIn:"root",factory:()=>new n})}return n})(),ib=[0,1,2,3],rb=(()=>{class n{ngZone=f(q);scheduler=f(_n);errorHandler=f(Mt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){f(Ao,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ce(ne.AfterRenderHooksStart),this.executing=!0;for(let o of ib)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[o]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let r=i.hooks[o];return r(i.pipelinedValue)},i.snapshot))}catch(r){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let o of this.sequences)o.afterRun(),o.once&&(this.sequences.delete(o),o.destroy());for(let o of this.deferredRegistrations)this.sequences.add(o);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ce(ne.AfterRenderHooksEnd)}register(t){let{view:o}=t;o!==void 0?((o[Co]??=[]).push(t),Mo(o),o[j]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,o){return o?o.run(nd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=C({token:n,providedIn:"root",factory:()=>new n})}return n})(),za=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,o,i,r,s=null){this.impl=e,this.hooks=t,this.view=o,this.once=i,this.snapshot=s,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Co];e&&(this.view[Co]=e.filter(t=>t!==this))}};function dn(n,e){let t=e?.injector??f(he);return xn("NgAfterNextRender"),UE(n,t,e,!0)}function zE(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function UE(n,e,t,o){let i=e.get(Cf);i.impl??=e.get(rb);let r=e.get(Ao,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(ut):null,a=e.get(_r,null,{optional:!0}),d=new za(i.impl,zE(n),a?.view,o,s,r?.snapshot(null));return i.impl.register(d),d}var Df=new N("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:f(He)})});function sb(n,e,t){let o=n.get(Df);if(Array.isArray(e))for(let i of e)o.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else o.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);o.scheduler&&o.scheduler(n)}function $E(n,e){let t=n.get(Df);if(e.detachedLeaveAnimationFns){for(let o of e.detachedLeaveAnimationFns)t.queue.delete(o);e.detachedLeaveAnimationFns=void 0}}function GE(n,e){for(let[t,o]of e)sb(n,o.animateFns)}function WE(n,e){let t=n.get(Df);if(Array.isArray(e))for(let o of e)t.queue.delete(o);else t.queue.delete(e)}function Qv(n,e,t,o){let i=n?.[Do]?.enter;e!==null&&i&&i.has(t.index)&&GE(o,i)}function gi(n,e,t,o,i,r,s,a){if(i!=null){let d,c=!1;jt(i)?d=i:tn(i)&&(c=!0,i=i[Vt]);let l=It(i);n===0&&o!==null?(Qv(a,o,r,t),s==null?Xy(e,o,l):Ha(e,o,l,s||null,!0)):n===1&&o!==null?(Qv(a,o,r,t),Ha(e,o,l,s||null,!0)):n===2?Kv(a,r,t,u=>{Qy(e,l,c,u)}):n===3&&Kv(a,r,t,()=>{e.destroyNode(l)}),d!=null&&oM(e,n,t,d,r,o,s)}}function qE(n,e){ab(n,e),e[Vt]=null,e[tt]=null}function ZE(n,e,t,o,i,r){o[Vt]=i,o[tt]=e,id(n,o,t,1,i,r)}function ab(n,e){e[Jt].changeDetectionScheduler?.notify(9),id(n,e,e[fe],2,null,null)}function YE(n){let e=n[ui];if(!e)return gu(n[L],n);for(;e;){let t=null;if(tn(e))t=e[ui];else{let o=e[Ee];o&&(t=o)}if(!t){for(;e&&!e[St]&&e!==n;)tn(e)&&gu(e[L],e),e=e[Be];e===null&&(e=n),tn(e)&&gu(e[L],e),t=e&&e[St]}e=t}}function wf(n,e){let t=n[wo],o=t.indexOf(e);t.splice(o,1)}function od(n,e){if(Eo(e))return;let t=e[fe];t.destroyNode&&id(n,e,t,3,null,null),YE(e)}function gu(n,e){if(Eo(e))return;let t=O(null);try{e[j]&=-129,e[j]|=256,e[_t]&&oo(e[_t]),KE(n,e),QE(n,e),e[L].type===1&&e[fe].destroy();let o=e[Hn];if(o!==null&&jt(e[Be])){o!==e[Be]&&wf(o,e);let i=e[en];i!==null&&i.detachView(n)}Su(e)}finally{O(t)}}function Kv(n,e,t,o){let i=n?.[Do];if(i?.enter?.has(e.index)&&WE(t,i.enter.get(e.index).animateFns),i==null||i.leave==null||!i.leave.has(e.index))return o(!1);n&&No.add(n[wn]),sb(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let d=0;d<s.animateFns.length;d++){let c=s.animateFns[d],{promise:l}=c();a.push(l)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),XE(n,o)}else n&&No.delete(n[wn]),o(!1)},i)}function XE(n,e){let t=n[Do]?.running;if(t){t.then(()=>{n[Do].running=void 0,No.delete(n[wn]),e(!0)});return}e(!1)}function QE(n,e){let t=n.cleanup,o=e[li];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?o[a]():o[-a].unsubscribe(),s+=2}else{let a=o[t[s+1]];t[s].call(a)}o!==null&&(e[li]=null);let i=e[yn];if(i!==null){e[yn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let r=e[Bn];if(r!==null){e[Bn]=null;for(let s of r)s.destroy()}}function KE(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let o=0;o<t.length;o+=2){let i=e[t[o]];if(!(i instanceof To)){let r=t[o+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let a=i[r[s]],d=r[s+1];ce(ne.LifecycleHookStart,a,d);try{d.call(a)}finally{ce(ne.LifecycleHookEnd,a,d)}}else{ce(ne.LifecycleHookStart,i,r);try{r.call(i)}finally{ce(ne.LifecycleHookEnd,i,r)}}}}}function db(n,e,t){return JE(n,e.parent,t)}function JE(n,e,t){let o=e;for(;o!==null&&o.type&168;)e=o,o=e.parent;if(o===null)return t[Vt];if(Un(o)){let{encapsulation:i}=n.data[o.directiveStart+o.componentOffset];if(i===Gt.None||i===Gt.Emulated)return null}return zt(o,t)}function cb(n,e,t){return tM(n,e,t)}function eM(n,e,t){return n.type&40?zt(n,t):null}var tM=eM,Jv;function Ef(n,e,t,o){let i=db(n,o,e),r=e[fe],s=o.parent||e[tt],a=cb(s,o,e);if(i!=null)if(Array.isArray(t))for(let d=0;d<t.length;d++)Zv(r,i,t[d],a,!1);else Zv(r,i,t,a,!1);Jv!==void 0&&Jv(r,o,e,t,i)}function Cr(n,e){if(e!==null){let t=e.type;if(t&3)return zt(e,n);if(t&4)return Lu(-1,n[e.index]);if(t&8){let o=e.child;if(o!==null)return Cr(n,o);{let i=n[e.index];return jt(i)?Lu(-1,i):It(i)}}else{if(t&128)return Cr(n,e.next);if(t&32)return _f(e,n)()||It(n[e.index]);{let o=lb(n,e);if(o!==null){if(Array.isArray(o))return o[0];let i=Vn(n[nt]);return Cr(i,o)}else return Cr(n,e.next)}}}return null}function lb(n,e){if(e!==null){let o=n[nt][tt],i=e.projection;return o.projection[i]}return null}function Lu(n,e){let t=Ee+n+1;if(t<e.length){let o=e[t],i=o[L].firstChild;if(i!==null)return Cr(o,i)}return e[zn]}function Mf(n,e,t,o,i,r,s){for(;t!=null;){let a=o[Dn];if(t.type===128){t=t.next;continue}let d=o[t.index],c=t.type;if(s&&e===0&&(d&&yi(It(d),o),t.flags|=2),!Ja(t))if(c&8)Mf(n,e,t.child,o,i,r,!1),gi(e,n,a,i,d,t,r,o);else if(c&32){let l=_f(t,o),u;for(;u=l();)gi(e,n,a,i,u,t,r,o);gi(e,n,a,i,d,t,r,o)}else c&16?ub(n,e,o,t,i,r):gi(e,n,a,i,d,t,r,o);t=s?t.projectionNext:t.next}}function id(n,e,t,o,i,r){Mf(t,o,n.firstChild,e,i,r,!1)}function nM(n,e,t){let o=e[fe],i=db(n,t,e),r=t.parent||e[tt],s=cb(r,t,e);ub(o,0,e,t,i,s)}function ub(n,e,t,o,i,r){let s=t[nt],d=s[tt].projection[o.projection];if(Array.isArray(d))for(let c=0;c<d.length;c++){let l=d[c];gi(e,n,t[Dn],i,l,o,r,t)}else{let c=d,l=s[Be];Py(o)&&(c.flags|=128),Mf(n,e,c,l,i,r,!0)}}function oM(n,e,t,o,i,r,s){let a=o[zn],d=It(o);a!==d&&gi(e,n,t,r,a,i,s);for(let c=Ee;c<o.length;c++){let l=o[c];id(l[L],l,n,e,r,a)}}function iM(n,e,t,o,i){if(e)i?n.addClass(t,o):n.removeClass(t,o);else{let r=o.indexOf("-")===-1?void 0:rn.DashCase;i==null?n.removeStyle(t,o,r):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),r|=rn.Important),n.setStyle(t,o,i,r))}}function fb(n,e,t,o,i){let r=nn(),s=o&2;try{Gn(-1),s&&e.length>De&&ob(n,e,De,!1);let a=s?ne.TemplateUpdateStart:ne.TemplateCreateStart;ce(a,i,t),t(o,i)}finally{Gn(r);let a=s?ne.TemplateUpdateEnd:ne.TemplateCreateEnd;ce(a,i,t)}}function rd(n,e,t){lM(n,e,t),(t.flags&64)===64&&uM(n,e,t)}function Ar(n,e,t=zt){let o=e.localNames;if(o!==null){let i=e.index+1;for(let r=0;r<o.length;r+=2){let s=o[r+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function rM(n,e,t,o){let r=o.get(jy,Vy)||t===Gt.ShadowDom||t===Gt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,r);return sM(s),s}function sM(n){aM(n)}var aM=()=>null;function dM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function pb(n,e,t,o,i,r){let s=e[L];if(Tf(n,s,e,t,o)){Un(n)&&cM(e,n.index);return}n.type&3&&(t=dM(t)),hb(n,e,t,o,i,r)}function hb(n,e,t,o,i,r){if(n.type&3){let s=zt(n,e);o=r!=null?r(o,n.value||"",t):o,i.setProperty(s,t,o)}else n.type&12}function cM(n,e){let t=xt(e,n);t[j]&16||(t[j]|=64)}function lM(n,e,t){let o=t.directiveStart,i=t.directiveEnd;Un(t)&&jE(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Va(t,e);let r=t.initialInputs;for(let s=o;s<i;s++){let a=n.data[s],d=wr(e,n,s,t);if(yi(d,e),r!==null&&gM(e,s-o,d,a,t,r),Ht(a)){let c=xt(t.index,e);c[Ne]=wr(e,n,s,t)}}}function uM(n,e,t){let o=t.directiveStart,i=t.directiveEnd,r=t.index,s=wv();try{Gn(r);for(let a=o;a<i;a++){let d=n.data[a],c=e[a];Ca(a),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&fM(d,c)}}finally{Gn(-1),Ca(s)}}function fM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Sf(n,e){let t=n.directiveRegistry,o=null;if(t)for(let i=0;i<t.length;i++){let r=t[i];eb(e,r.selectors,!1)&&(o??=[],Ht(r)?o.unshift(r):o.push(r))}return o}function pM(n,e,t,o,i,r){let s=zt(n,e);hM(e[fe],s,r,n.value,t,o,i)}function hM(n,e,t,o,i,r,s){if(r==null)n.removeAttribute(e,i,t);else{let a=s==null?ua(r):s(r,o||"",i);n.setAttribute(e,i,a,t)}}function gM(n,e,t,o,i,r){let s=r[e];if(s!==null)for(let a=0;a<s.length;a+=2){let d=s[a],c=s[a+1];Fu(o,t,d,c)}}function If(n,e,t,o,i){let r=De+t,s=e[L],a=i(s,e,n,o,t);e[r]=a,So(n,!0);let d=n.type===2;return d?(Ky(e[fe],a,n),(mv()===0||fi(n))&&yi(a,e),vv()):yi(a,e),Ma()&&(!d||!Ja(n))&&Ef(s,e,a,n),n}function xf(n){let e=n;return Jl()?eu():(e=e.parent,So(e,!1)),e}function mM(n,e){let t=n[Dn];if(!t)return;let o;try{o=t.get(En,null)}catch(i){o=null}o?.(e)}function Tf(n,e,t,o,i){let r=n.inputs?.[o],s=n.hostDirectiveInputs?.[o],a=!1;if(s)for(let d=0;d<s.length;d+=2){let c=s[d],l=s[d+1],u=e.data[c];Fu(u,t[c],l,i),a=!0}if(r)for(let d of r){let c=t[d],l=e.data[d];Fu(l,c,o,i),a=!0}return a}function vM(n,e){let t=xt(e,n),o=t[L];yM(o,t);let i=t[Vt];i!==null&&t[yo]===null&&(t[yo]=Hy(i,t[Dn])),ce(ne.ComponentStart);try{Nf(o,t,t[Ne])}finally{ce(ne.ComponentEnd,t[Ne])}}function yM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Nf(n,e,t){wa(e);try{let o=n.viewQuery;o!==null&&Iu(1,o,t);let i=n.template;i!==null&&fb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[en]?.finishViewCreation(n),n.staticContentQueries&&zy(n,e),n.staticViewQueries&&Iu(2,n.viewQuery,t);let r=n.components;r!==null&&bM(e,r)}catch(o){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),o}finally{e[j]&=-5,Ea()}}function bM(n,e){for(let t=0;t<e.length;t++)vM(n,e[t])}function Rr(n,e,t,o){let i=O(null);try{let r=e.tView,a=n[j]&4096?4096:16,d=yf(n,r,t,a,null,e,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null),c=n[e.index];d[Hn]=c;let l=n[en];return l!==null&&(d[en]=l.createEmbeddedView(r)),Nf(r,d,t),d}finally{O(i)}}function bi(n,e){return!e||e.firstChild===null||Py(n)}function Er(n,e,t,o,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let r=e[t.index];r!==null&&o.push(It(r)),jt(r)&&gb(r,o);let s=t.type;if(s&8)Er(n,e,t.child,o);else if(s&32){let a=_f(t,e),d;for(;d=a();)o.push(d)}else if(s&16){let a=lb(e,t);if(Array.isArray(a))o.push(...a);else{let d=Vn(e[nt]);Er(d[L],d,a,o,!0)}}t=i?t.projectionNext:t.next}return o}function gb(n,e){for(let t=Ee;t<n.length;t++){let o=n[t],i=o[L].firstChild;i!==null&&Er(o[L],o,i,e)}n[zn]!==n[Vt]&&e.push(n[zn])}function mb(n){if(n[Co]!==null){for(let e of n[Co])e.impl.addSequence(e);n[Co].length=0}}var vb=[];function _M(n){return n[_t]??CM(n)}function CM(n){let e=vb.pop()??Object.create(wM);return e.lView=n,e}function DM(n){n.lView[_t]!==n&&(n.lView=null,vb.push(n))}var wM=y(g({},Zo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Mo(n.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function EM(n){let e=n[_t]??Object.create(MM);return e.lView=n,e}var MM=y(g({},Zo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Vn(n.lView);for(;e&&!yb(e[L]);)e=Vn(e);e&&$l(e)},consumerOnSignalRead(){this.lView[_t]=this}});function yb(n){return n.type!==2}function bb(n){if(n[Bn]===null)return;let e=!0;for(;e;){let t=!1;for(let o of n[Bn])o.dirty&&(t=!0,o.zone===null||Zone.current===o.zone?o.run():o.zone.run(()=>o.run()));e=t&&!!(n[j]&8192)}}var SM=100;function _b(n,e=0){let o=n[Jt].rendererFactory,i=!1;i||o.begin?.();try{IM(n,e)}finally{i||o.end?.()}}function IM(n,e){let t=tu();try{cr(!0),Bu(n,e);let o=0;for(;mr(n);){if(o===SM)throw new H(103,!1);o++,Bu(n,1)}}finally{cr(t)}}function xM(n,e,t,o){if(Eo(e))return;let i=e[j],r=!1,s=!1;wa(e);let a=!0,d=null,c=null;r||(yb(n)?(c=_M(e),d=Yo(c)):Ms()===null?(a=!1,c=EM(e),d=Yo(c)):e[_t]&&(oo(e[_t]),e[_t]=null));try{Ul(e),_v(n.bindingStartIndex),t!==null&&fb(n,e,t,2,o);let l=(i&3)===3;if(!r)if(l){let p=n.preOrderCheckHooks;p!==null&&ka(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Pa(e,p,0,null),pu(e,0)}if(s||TM(e),bb(e),Cb(e,0),n.contentQueries!==null&&zy(n,e),!r)if(l){let p=n.contentCheckHooks;p!==null&&ka(e,p)}else{let p=n.contentHooks;p!==null&&Pa(e,p,1),pu(e,1)}kM(n,e);let u=n.components;u!==null&&wb(e,u,0);let h=n.viewQuery;if(h!==null&&Iu(2,h,o),!r)if(l){let p=n.viewCheckHooks;p!==null&&ka(e,p)}else{let p=n.viewHooks;p!==null&&Pa(e,p,2),pu(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ma]){for(let p of e[ma])p();e[ma]=null}r||(mb(e),e[j]&=-73)}catch(l){throw r||Mo(e),l}finally{c!==null&&(Ki(c,d),a&&DM(c)),Ea()}}function Cb(n,e){for(let t=Ry(n);t!==null;t=Oy(t))for(let o=Ee;o<t.length;o++){let i=t[o];Db(i,e)}}function TM(n){for(let e=Ry(n);e!==null;e=Oy(e)){if(!(e[j]&2))continue;let t=e[wo];for(let o=0;o<t.length;o++){let i=t[o];$l(i)}}}function NM(n,e,t){ce(ne.ComponentStart);let o=xt(e,n);try{Db(o,t)}finally{ce(ne.ComponentEnd,o[Ne])}}function Db(n,e){ya(n)&&Bu(n,e)}function Bu(n,e){let o=n[L],i=n[j],r=n[_t],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(r?.dirty&&Ji(r)),s||=!1,r&&(r.dirty=!1),n[j]&=-9217,s)xM(o,n,o.template,n[Ne]);else if(i&8192){let a=O(null);try{bb(n),Cb(n,1);let d=o.components;d!==null&&wb(n,d,1),mb(n)}finally{O(a)}}}function wb(n,e,t){for(let o=0;o<e.length;o++)NM(n,e[o],t)}function kM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let o=0;o<t.length;o++){let i=t[o];if(i<0)Gn(~i);else{let r=i,s=t[++o],a=t[++o];Dv(s,r);let d=e[r];ce(ne.HostBindingsUpdateStart,d);try{a(2,d)}finally{ce(ne.HostBindingsUpdateEnd,d)}}}}finally{Gn(-1)}}function kf(n,e){let t=tu()?64:1088;for(n[Jt].changeDetectionScheduler?.notify(e);n;){n[j]|=t;let o=Vn(n);if(pi(n)&&!o)return n;n=o}return null}function Eb(n,e,t,o){return[n,!0,0,e,null,o,null,t,null,null]}function Mb(n,e){let t=Ee+e;if(t<n.length)return n[t]}function Or(n,e,t,o=!0){let i=e[L];if(PM(i,e,n,t),o){let s=Lu(t,n),a=e[fe],d=a.parentNode(n[zn]);d!==null&&ZE(i,n[tt],a,e,d,s)}let r=e[yo];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function Sb(n,e){let t=Mr(n,e);return t!==void 0&&od(t[L],t),t}function Mr(n,e){if(n.length<=Ee)return;let t=Ee+e,o=n[t];if(o){let i=o[Hn];i!==null&&i!==n&&wf(i,o),e>0&&(n[t-1][St]=o[St]);let r=fr(n,Ee+e);qE(o[L],o);let s=r[en];s!==null&&s.detachView(r[L]),o[Be]=null,o[St]=null,o[j]&=-129}return o}function PM(n,e,t,o){let i=Ee+o,r=t.length;o>0&&(t[i-1][St]=e),o<r-Ee?(e[St]=t[i],kl(t,Ee+o,e)):(t.push(e),e[St]=null),e[Be]=t;let s=e[Hn];s!==null&&t!==s&&Ib(s,e);let a=e[en];a!==null&&a.insertView(n),ba(e),e[j]|=128}function Ib(n,e){let t=n[wo],o=e[Be];if(tn(o))n[j]|=2;else{let i=o[Be][nt];e[nt]!==i&&(n[j]|=2)}t===null?n[wo]=[e]:t.push(e)}var Wn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[L];return Er(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ne]}set context(e){this._lView[Ne]=e}get destroyed(){return Eo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(jt(e)){let t=e[hr],o=t?t.indexOf(this):-1;o>-1&&(Mr(e,o),fr(t,o))}this._attachedToViewContainer=!1}od(this._lView[L],this._lView)}onDestroy(e){Gl(this._lView,e)}markForCheck(){kf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[j]&=-129}reattach(){ba(this._lView),this._lView[j]|=128}detectChanges(){this._lView[j]|=1024,_b(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pi(this._lView),t=this._lView[Hn];t!==null&&!e&&wf(t,this._lView),ab(this._lView[L],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=pi(this._lView),o=this._lView[Hn];o!==null&&!t&&Ib(o,this._lView),ba(this._lView)}};var sn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=AM;constructor(t,o,i){this._declarationLView=t,this._declarationTContainer=o,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,o){return this.createEmbeddedViewImpl(t,o)}createEmbeddedViewImpl(t,o,i){let r=Rr(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:o,dehydratedView:i});return new Wn(r)}}return n})();function AM(){return Pf(ze(),B())}function Pf(n,e){return n.type&4?new sn(e,n,Di(n,e)):null}function Ro(n,e,t,o,i){let r=n.data[e];if(r===null)r=RM(n,e,t,o,i),Cv()&&(r.flags|=32);else if(r.type&64){r.type=t,r.value=o,r.attrs=i;let s=yv();r.injectorIndex=s===null?-1:s.injectorIndex}return So(r,!0),r}function RM(n,e,t,o,i){let r=Kl(),s=Jl(),a=s?r:r&&r.parent,d=n.data[e]=FM(n,a,t,e,o,i);return OM(n,d,r,s),d}function OM(n,e,t,o){n.firstChild===null&&(n.firstChild=e),t!==null&&(o?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function FM(n,e,t,o,i,r){let s=e?e.injectorIndex:-1,a=0;return Yl()&&(a|=128),{type:t,index:o,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:r,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function LM(n){let e=n[Vl]??[],o=n[Be][fe],i=[];for(let r of e)r.data[By]!==void 0?i.push(r):BM(r,o);n[Vl]=i}function BM(n,e){let t=0,o=n.firstChild;if(o){let i=n.data[Ly];for(;t<i;){let r=o.nextSibling;Qy(e,o,!1),o=r,t++}}}var VM=()=>null,jM=()=>null;function Ua(n,e){return VM(n,e)}function xb(n,e,t){return jM(n,e,t)}var Tb=class{},sd=class{},Vu=class{resolveComponentFactory(e){throw new H(917,!1)}},Fr=class{static NULL=new Vu},ot=class{},ft=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>HM()}return n})();function HM(){let n=B(),e=ze(),t=xt(e.index,n);return(tn(t)?t:n)[fe]}var Nb=(()=>{class n{static \u0275prov=C({token:n,providedIn:"root",factory:()=>null})}return n})();var Ra={},ju=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,o){let i=this.injector.get(e,Ra,o);return i!==Ra||t===Ra?i:this.parentInjector.get(e,t,o)}};function $a(n,e,t){let o=t?n.styles:null,i=t?n.classes:null,r=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")r=a;else if(r==1)i=sa(i,a);else if(r==2){let d=a,c=e[++s];o=sa(o,d+": "+c+";")}}t?n.styles=o:n.stylesWithoutHost=o,t?n.classes=i:n.classesWithoutHost=i}function ge(n,e=0){let t=B();if(t===null)return Z(n,e);let o=ze();return xy(o,t,Le(n),e)}function kb(n,e,t,o,i){let r=o===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,d=null,c=null;for(let l of s)if(l.resolveHostDirectives!==null){[a,d,c]=l.resolveHostDirectives(s);break}$M(n,e,t,a,r,d,c)}r!==null&&o!==null&&zM(t,o,r)}function zM(n,e,t){let o=n.localNames=[];for(let i=0;i<e.length;i+=2){let r=t[e[i+1]];if(r==null)throw new H(-301,!1);o.push(e[i],r)}}function UM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function $M(n,e,t,o,i,r,s){let a=o.length,d=null;for(let h=0;h<a;h++){let p=o[h];d===null&&Ht(p)&&(d=p,UM(n,t,h)),Eu(Va(t,e),n,p.type)}XM(t,n.data.length,a),d?.viewProvidersResolver&&d.viewProvidersResolver(d);for(let h=0;h<a;h++){let p=o[h];p.providersResolver&&p.providersResolver(p)}let c=!1,l=!1,u=nb(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=o[h];if(t.mergedAttrs=vi(t.mergedAttrs,p.hostAttrs),WM(n,t,e,u,p),YM(u,p,i),s!==null&&s.has(p)){let[E,k]=s.get(p);t.directiveToIndex.set(p.type,[u,E+t.directiveStart,k+t.directiveStart])}else(r===null||!r.has(p))&&t.directiveToIndex.set(p.type,u);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let v=p.type.prototype;!c&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),u++}GM(n,t,r)}function GM(n,e,t){for(let o=e.directiveStart;o<e.directiveEnd;o++){let i=n.data[o];if(t===null||!t.has(i))ey(0,e,i,o),ey(1,e,i,o),ny(e,o,!1);else{let r=t.get(i);ty(0,e,r,o),ty(1,e,r,o),ny(e,o,!0)}}}function ey(n,e,t,o){let i=n===0?t.inputs:t.outputs;for(let r in i)if(i.hasOwnProperty(r)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[r]??=[],s[r].push(o),Pb(e,r)}}function ty(n,e,t,o){let i=n===0?t.inputs:t.outputs;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(o,r),Pb(e,s)}}function Pb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function ny(n,e,t){let{attrs:o,inputs:i,hostDirectiveInputs:r}=n;if(o===null||!t&&i===null||t&&r===null||mf(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<o.length;){let d=o[a];if(d===0){a+=4;continue}else if(d===5){a+=2;continue}else if(typeof d=="number")break;if(!t&&i.hasOwnProperty(d)){let c=i[d];for(let l of c)if(l===e){s??=[],s.push(d,o[a+1]);break}}else if(t&&r.hasOwnProperty(d)){let c=r[d];for(let l=0;l<c.length;l+=2)if(c[l]===e){s??=[],s.push(c[l+1],o[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function WM(n,e,t,o,i){n.data[o]=i;let r=i.factory||(i.factory=po(i.type,!0)),s=new To(r,Ht(i),ge,null);n.blueprint[o]=s,t[o]=s,qM(n,e,o,nb(n,t,i.hostVars,Pt),i)}function qM(n,e,t,o,i){let r=i.hostBindings;if(r){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;ZM(s)!=a&&s.push(a),s.push(t,o,r)}}function ZM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function YM(n,e,t){if(t){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)t[e.exportAs[o]]=n;Ht(e)&&(t[""]=n)}}function XM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Af(n,e,t,o,i,r,s,a){let d=e[L],c=d.consts,l=Tt(c,s),u=Ro(d,n,t,o,l);return r&&kb(d,e,u,Tt(c,a),i),u.mergedAttrs=vi(u.mergedAttrs,u.attrs),u.attrs!==null&&$a(u,u.attrs,!1),u.mergedAttrs!==null&&$a(u,u.mergedAttrs,!0),d.queries!==null&&d.queries.elementStart(d,u),u}function Rf(n,e){_y(n,e),jl(e)&&n.queries.elementEnd(e)}function QM(n,e,t,o,i,r){let s=e.consts,a=Tt(s,i),d=Ro(e,n,t,o,a);if(d.mergedAttrs=vi(d.mergedAttrs,d.attrs),r!=null){let c=Tt(s,r);d.localNames=[];for(let l=0;l<c.length;l+=2)d.localNames.push(c[l],-1)}return d.attrs!==null&&$a(d,d.attrs,!1),d.mergedAttrs!==null&&$a(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function Ab(n,e,t){return n[e]=t}function Nt(n,e,t){if(t===Pt)return!1;let o=n[e];return Object.is(o,t)?!1:(n[e]=t,!0)}function KM(n,e,t,o){let i=Nt(n,e,t);return Nt(n,e+1,o)||i}function Oa(n,e,t){return function o(i){let r=Un(n)?xt(n.index,e):e;kf(r,5);let s=e[Ne],a=oy(e,s,t,i),d=o.__ngNextListenerFn__;for(;d;)a=oy(e,s,d,i)&&a,d=d.__ngNextListenerFn__;return a}}function oy(n,e,t,o){let i=O(null);try{return ce(ne.OutputStart,e,t),t(o)!==!1}catch(r){return mM(n,r),!1}finally{ce(ne.OutputEnd,e,t),O(i)}}function Rb(n,e,t,o,i,r,s,a){let d=fi(n),c=!1,l=null;if(!o&&d&&(l=eS(e,t,r,n.index)),l!==null){let u=l.__ngLastListenerFn__||l;u.__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,c=!0}else{let u=zt(n,t),h=o?o(u):u;Xw(t,h,r,a);let p=i.listen(h,r,a);if(!JM(r)){let v=o?E=>o(It(E[n.index])):n.index;Ob(v,e,t,r,a,p,!1)}}return c}function JM(n){return n.startsWith("animation")||n.startsWith("transition")}function eS(n,e,t,o){let i=n.cleanup;if(i!=null)for(let r=0;r<i.length-1;r+=2){let s=i[r];if(s===t&&i[r+1]===o){let a=e[li],d=i[r+2];return a&&a.length>d?a[d]:null}typeof s=="string"&&(r+=2)}return null}function Ob(n,e,t,o,i,r,s){let a=e.firstCreatePass?ql(e):null,d=Wl(t),c=d.length;d.push(i,r),a&&a.push(o,n,c,(c+1)*(s?-1:1))}function iy(n,e,t,o,i,r){let s=e[t],a=e[L],c=a.data[t].outputs[o],u=s[c].subscribe(r);Ob(n.index,a,e,i,r,u,!0)}var Hu=Symbol("BINDING");var Ga=class extends Fr{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=jn(e);return new _i(t,this.ngModule)}};function tS(n){return Object.keys(n).map(e=>{let[t,o,i]=n[e],r={propName:t,templateName:e,isSignal:(o&td.SignalBased)!==0};return i&&(r.transform=i),r})}function nS(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function oS(n,e,t){let o=e instanceof He?e:e?.injector;return o&&n.getStandaloneInjector!==null&&(o=n.getStandaloneInjector(o)||o),o?new ju(t,o):t}function iS(n){let e=n.get(ot,null);if(e===null)throw new H(407,!1);let t=n.get(Nb,null),o=n.get(_n,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:o,ngReflect:!1}}function rS(n,e){let t=Fb(n);return Yy(e,t,t==="svg"?Hl:t==="math"?cv:null)}function Fb(n){return(n.selectors[0][0]||"div").toLowerCase()}var _i=class extends sd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=nS(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=FE(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,o,i,r,s){ce(ne.DynamicComponentStart);let a=O(null);try{let d=this.componentDef,c=sS(o,d,s,r),l=oS(d,i||this.ngModule,e),u=iS(l),h=u.rendererFactory.createRenderer(null,d),p=o?rM(h,o,d.encapsulation,l):rS(d,h),v=s?.some(ry)||r?.some(P=>typeof P!="function"&&P.bindings.some(ry)),E=yf(null,c,null,512|tb(d),null,null,u,h,l,null,Hy(p,l,!0));E[De]=p,wa(E);let k=null;try{let P=Af(De,E,2,"#host",()=>c.directiveRegistry,!0,0);Ky(h,p,P),yi(p,E),rd(c,E,P),df(c,P,E),Rf(c,P),t!==void 0&&dS(P,this.ngContentSelectors,t),k=xt(P.index,E),E[Ne]=k[Ne],Nf(c,E,null)}catch(P){throw k!==null&&Su(k),Su(E),P}finally{ce(ne.DynamicComponentEnd),Ea()}return new Wa(this.componentType,E,!!v)}finally{O(a)}}};function sS(n,e,t,o){let i=n?["ng-version","21.1.4"]:LE(e.selectors[0]),r=null,s=null,a=0;if(t)for(let l of t)a+=l[Hu].requiredVars,l.create&&(l.targetIdx=0,(r??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(o)for(let l=0;l<o.length;l++){let u=o[l];if(typeof u!="function")for(let h of u.bindings){a+=h[Hu].requiredVars;let p=l+1;h.create&&(h.targetIdx=p,(r??=[]).push(h)),h.update&&(h.targetIdx=p,(s??=[]).push(h))}}let d=[e];if(o)for(let l of o){let u=typeof l=="function"?l:l.type,h=ca(u);d.push(h)}return vf(0,null,aS(r,s),1,a,d,null,null,null,[i],null)}function aS(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let o of n)o.create();if(t&2&&e)for(let o of e)o.update()}}function ry(n){let e=n[Hu].kind;return e==="input"||e==="twoWay"}var Wa=class extends Tb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,o){super(),this._rootLView=t,this._hasInputBindings=o,this._tNode=gr(t[L],De),this.location=Di(this._tNode,t),this.instance=xt(this._tNode.index,t)[Ne],this.hostView=this.changeDetectorRef=new Wn(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let o=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,r=Tf(o,i[L],i,e,t);this.previousInputValues.set(e,t);let s=xt(o.index,i);kf(s,1)}get injector(){return new xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dS(n,e,t){let o=n.projection=[];for(let i=0;i<e.length;i++){let r=t[i];o.push(r!=null&&r.length?Array.from(r):null)}}var Tn=(()=>{class n{static __NG_ELEMENT_ID__=cS}return n})();function cS(){let n=ze();return Bb(n,B())}var lS=Tn,Lb=class extends lS{_lContainer;_hostTNode;_hostLView;constructor(e,t,o){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=o}get element(){return Di(this._hostTNode,this._hostLView)}get injector(){return new xo(this._hostTNode,this._hostLView)}get parentInjector(){let e=rf(this._hostTNode,this._hostLView);if(Dy(e)){let t=Ba(e,this._hostLView),o=La(e),i=t[L].data[o+8];return new xo(i,t)}else return new xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sy(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ee}createEmbeddedView(e,t,o){let i,r;typeof o=="number"?i=o:o!=null&&(i=o.index,r=o.injector);let s=Ua(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},r,s);return this.insertImpl(a,i,bi(this._hostTNode,s)),a}createComponent(e,t,o,i,r,s,a){let d=e&&!ww(e),c;if(d)c=t;else{let k=t||{};c=k.index,o=k.injector,i=k.projectableNodes,r=k.environmentInjector||k.ngModuleRef,s=k.directives,a=k.bindings}let l=d?e:new _i(jn(e)),u=o||this.parentInjector;if(!r&&l.ngModule==null){let P=(d?u:this.parentInjector).get(He,null);P&&(r=P)}let h=jn(l.componentType??{}),p=Ua(this._lContainer,h?.id??null),v=p?.firstChild??null,E=l.create(u,i,v,r,s,a);return this.insertImpl(E.hostView,c,bi(this._hostTNode,p)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,o){let i=e._lView;if(fv(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let d=i[Be],c=new Lb(d,d[tt],d[Be]);c.detach(c.indexOf(e))}}let r=this._adjustIndex(t),s=this._lContainer;return Or(s,i,r,o),e.attachToViewContainerRef(),kl(mu(s),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sy(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),o=Mr(this._lContainer,t);o&&(fr(mu(this._lContainer),t),od(o[L],o))}detach(e){let t=this._adjustIndex(e,-1),o=Mr(this._lContainer,t);return o&&fr(mu(this._lContainer),t)!=null?new Wn(o):null}_adjustIndex(e,t=0){return e??this.length+t}};function sy(n){return n[hr]}function mu(n){return n[hr]||(n[hr]=[])}function Bb(n,e){let t,o=e[n.index];return jt(o)?t=o:(t=Eb(o,e,null,n),e[n.index]=t,bf(e,t)),fS(t,e,n,o),new Lb(t,n,e)}function uS(n,e){let t=n[fe],o=t.createComment(""),i=zt(e,n),r=t.parentNode(i);return Ha(t,r,o,t.nextSibling(i),!1),o}var fS=gS,pS=()=>!1;function hS(n,e,t){return pS(n,e,t)}function gS(n,e,t,o){if(n[zn])return;let i;t.type&8?i=It(o):i=uS(e,t),n[zn]=i}var zu=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Uu=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let o=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let r=0;r<o;r++){let s=t.getByIndex(r),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ff(e,t).matches!==null&&this.queries[t].setDirty()}},qa=class{flags;read;predicate;constructor(e,t,o=null){this.flags=t,this.read=o,typeof e=="string"?this.predicate=CS(e):this.predicate=e}},$u=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let o=0;o<this.length;o++){let i=t!==null?t.length:0,r=this.getByIndex(o).embeddedTView(e,i);r&&(r.indexInDeclarationView=o,t!==null?t.push(r):t=[r])}return t!==null?new n(t):null}template(e,t){for(let o=0;o<this.queries.length;o++)this.queries[o].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Gu=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,o=e.parent;for(;o!==null&&o.type&8&&o.index!==t;)o=o.parent;return t===(o!==null?o.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let o=this.metadata.predicate;if(Array.isArray(o))for(let i=0;i<o.length;i++){let r=o[i];this.matchTNodeWithReadOption(e,t,mS(t,r)),this.matchTNodeWithReadOption(e,t,Aa(t,e,r,!1,!1))}else o===sn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Aa(t,e,o,!1,!1))}matchTNodeWithReadOption(e,t,o){if(o!==null){let i=this.metadata.read;if(i!==null)if(i===Y||i===Tn||i===sn&&t.type&4)this.addMatch(t.index,-2);else{let r=Aa(t,e,i,!1,!1);r!==null&&this.addMatch(t.index,r)}else this.addMatch(t.index,o)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function mS(n,e){let t=n.localNames;if(t!==null){for(let o=0;o<t.length;o+=2)if(t[o]===e)return t[o+1]}return null}function vS(n,e){return n.type&11?Di(n,e):n.type&4?Pf(n,e):null}function yS(n,e,t,o){return t===-1?vS(e,n):t===-2?bS(n,e,o):wr(n,n[L],t,e)}function bS(n,e,t){if(t===Y)return Di(e,n);if(t===sn)return Pf(e,n);if(t===Tn)return Bb(e,n)}function Vb(n,e,t,o){let i=e[en].queries[o];if(i.matches===null){let r=n.data,s=t.matches,a=[];for(let d=0;s!==null&&d<s.length;d+=2){let c=s[d];if(c<0)a.push(null);else{let l=r[c];a.push(yS(e,l,s[d+1],t.metadata.read))}}i.matches=a}return i.matches}function Wu(n,e,t,o){let i=n.queries.getByIndex(t),r=i.matches;if(r!==null){let s=Vb(n,e,i,t);for(let a=0;a<r.length;a+=2){let d=r[a];if(d>0)o.push(s[a/2]);else{let c=r[a+1],l=e[-d];for(let u=Ee;u<l.length;u++){let h=l[u];h[Hn]===h[Be]&&Wu(h[L],h,c,o)}if(l[wo]!==null){let u=l[wo];for(let h=0;h<u.length;h++){let p=u[h];Wu(p[L],p,c,o)}}}}}return o}function Of(n,e){return n[en].queries[e].queryList}function jb(n,e,t){let o=new ja((t&4)===4);return gv(n,e,o,o.destroy),(e[en]??=new Uu).queries.push(new zu(o))-1}function Hb(n,e,t){let o=me();return o.firstCreatePass&&(zb(o,new qa(n,e,t),-1),(e&2)===2&&(o.staticViewQueries=!0)),jb(o,B(),e)}function _S(n,e,t,o){let i=me();if(i.firstCreatePass){let r=ze();zb(i,new qa(e,t,o),r.index),DS(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return jb(i,B(),t)}function CS(n){return n.split(",").map(e=>e.trim())}function zb(n,e,t){n.queries===null&&(n.queries=new $u),n.queries.track(new Gu(e,t))}function DS(n,e){let t=n.contentQueries||(n.contentQueries=[]),o=t.length?t[t.length-1]:-1;e!==o&&t.push(n.queries.length-1,e)}function Ff(n,e){return n.queries.getByIndex(e)}function Ub(n,e){let t=n[L],o=Ff(t,e);return o.crossesNgTemplate?Wu(t,n,e,[]):Vb(t,n,o,e)}function $b(n,e,t){let o,i=er(()=>{o._dirtyCounter();let r=wS(o,n);if(e&&r===void 0)throw new H(-951,!1);return r});return o=i[Ue],o._dirtyCounter=F(0),o._flatValue=void 0,i}function Lf(n){return $b(!0,!1,n)}function Bf(n){return $b(!0,!0,n)}function Gb(n,e){let t=n[Ue];t._lView=B(),t._queryIndex=e,t._queryList=Of(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(o=>o+1))}function wS(n,e){let t=n._lView,o=n._queryIndex;if(t===void 0||o===void 0||t[j]&4)return e?void 0:Ye;let i=Of(t,o),r=Ub(t,o);return i.reset(r,ky),e?i.first:i._changesDetected||n._flatValue===void 0?n._flatValue=i.toArray():n._flatValue}var Wt=class{};function Vf(n,e){return new Za(n,e??null,[])}var Za=class extends Wt{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ga(this);constructor(e,t,o,i=!0){super(),this.ngModuleType=e,this._parent=t;let r=qm(e);this._bootstrapComponents=ME(r.bootstrap),this._r3Injector=su(e,t,[{provide:Wt,useValue:this},{provide:Fr,useValue:this.componentFactoryResolver},...o],bn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}};var Sr=class extends Wt{injector;componentFactoryResolver=new Ga(this);instance=null;constructor(e){super();let t=new go([...e.providers,{provide:Wt,useValue:this},{provide:Fr,useValue:this.componentFactoryResolver}],e.parent||di(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wb(n,e,t=null){return new Sr({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var ES=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let o=Rl(!1,t.type),i=o.length>0?Wb([o],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=C({token:n,providedIn:"environment",factory:()=>new n(Z(He))})}return n})();function S(n){return Tr(()=>{let e=qb(n),t=y(g({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===sf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ES).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gt.Emulated,styles:n.styles||Ye,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&xn("NgStandalone"),Zb(t);let o=n.dependencies;return t.directiveDefs=ay(o,MS),t.pipeDefs=ay(o,Zm),t.id=xS(t),t})}function MS(n){return jn(n)||ca(n)}function Ct(n){return Tr(()=>({type:n.type,bootstrap:n.bootstrap||Ye,declarations:n.declarations||Ye,imports:n.imports||Ye,exports:n.exports||Ye,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function SS(n,e){if(n==null)return Bt;let t={};for(let o in n)if(n.hasOwnProperty(o)){let i=n[o],r,s,a,d;Array.isArray(i)?(a=i[0],r=i[1],s=i[2]??r,d=i[3]||null):(r=i,s=i,a=td.None,d=null),t[r]=[o,a,d],e[r]=s}return t}function IS(n){if(n==null)return Bt;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function R(n){return Tr(()=>{let e=qb(n);return Zb(e),e})}function qb(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Bt,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ye,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:SS(n.inputs,e),outputs:IS(n.outputs),debugInfo:null}}function Zb(n){n.features?.forEach(e=>e(n))}function ay(n,e){return n?()=>{let t=typeof n=="function"?n():n,o=[];for(let i of t){let r=e(i);r!==null&&o.push(r)}return o}:null}function xS(n){let e=0,t=typeof n.consts=="function"?"":n.consts,o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let r of o.join("|"))e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pt(n){let e=t=>{let o=Array.isArray(n);t.hostDirectives===null?(t.resolveHostDirectives=TS,t.hostDirectives=o?n.map(qu):[n]):o?t.hostDirectives.unshift(...n.map(qu)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function TS(n){let e=[],t=!1,o=null,i=null;for(let r=0;r<n.length;r++){let s=n[r];if(s.hostDirectives!==null){let a=e.length;o??=new Map,i??=new Map,Yb(s,e,o),i.set(s,[a,e.length-1])}r===0&&Ht(s)&&(t=!0,e.push(s))}for(let r=t?1:0;r<n.length;r++)e.push(n[r]);return[e,o,i]}function Yb(n,e,t){if(n.hostDirectives!==null)for(let o of n.hostDirectives)if(typeof o=="function"){let i=o();for(let r of i)dy(qu(r),e,t)}else dy(o,e,t)}function dy(n,e,t){let o=ca(n.directive);NS(o.declaredInputs,n.inputs),Yb(o,e,t),t.set(o,n),e.push(o)}function qu(n){return typeof n=="function"?{directive:Le(n),inputs:Bt,outputs:Bt}:{directive:Le(n.directive),inputs:cy(n.inputs),outputs:cy(n.outputs)}}function cy(n){if(n===void 0||n.length===0)return Bt;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function NS(n,e){for(let t in e)if(e.hasOwnProperty(t)){let o=e[t],i=n[t];n[o]=i}}function kS(n){return Object.getPrototypeOf(n.prototype).constructor}function le(n){let e=kS(n.type),t=!0,o=[n];for(;e;){let i;if(Ht(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){o.push(i);let s=n;s.inputs=vu(n.inputs),s.declaredInputs=vu(n.declaredInputs),s.outputs=vu(n.outputs);let a=i.hostBindings;a&&FS(n,a);let d=i.viewQuery,c=i.contentQueries;if(d&&RS(n,d),c&&OS(n,c),PS(n,i),Wm(n.outputs,i.outputs),Ht(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let r=i.features;if(r)for(let s=0;s<r.length;s++){let a=r[s];a&&a.ngInherit&&a(n),a===le&&(t=!1)}}e=Object.getPrototypeOf(e)}AS(o)}function PS(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let o=e.inputs[t];o!==void 0&&(n.inputs[t]=o,n.declaredInputs[t]=e.declaredInputs[t])}}function AS(n){let e=0,t=null;for(let o=n.length-1;o>=0;o--){let i=n[o];i.hostVars=e+=i.hostVars,i.hostAttrs=vi(i.hostAttrs,t=vi(t,i.hostAttrs))}}function vu(n){return n===Bt?{}:n===Ye?[]:n}function RS(n,e){let t=n.viewQuery;t?n.viewQuery=(o,i)=>{e(o,i),t(o,i)}:n.viewQuery=e}function OS(n,e){let t=n.contentQueries;t?n.contentQueries=(o,i,r)=>{e(o,i,r),t(o,i,r)}:n.contentQueries=e}function FS(n,e){let t=n.hostBindings;t?n.hostBindings=(o,i)=>{e(o,i),t(o,i)}:n.hostBindings=e}function Xb(n,e,t,o,i,r,s,a){if(t.firstCreatePass){n.mergedAttrs=vi(n.mergedAttrs,n.attrs);let l=n.tView=vf(2,n,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),l.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),So(n,!1);let d=BS(t,e,n,o);Ma()&&Ef(t,e,d,n),yi(d,e);let c=Eb(d,e,d,n);e[o+De]=c,bf(e,c),hS(c,n,e)}function LS(n,e,t,o,i,r,s,a,d,c,l){let u=t+De,h;return e.firstCreatePass?(h=Ro(e,u,4,s||null,a||null),_a()&&kb(e,n,h,Tt(e.consts,c),Sf),_y(e,h)):h=e.data[u],Xb(h,n,e,t,o,i,r,d),fi(h)&&rd(e,n,h),c!=null&&Ar(n,h,l),h}function Ir(n,e,t,o,i,r,s,a,d,c,l){let u=t+De,h;if(e.firstCreatePass){if(h=Ro(e,u,4,s||null,a||null),c!=null){let p=Tt(e.consts,c);h.localNames=[];for(let v=0;v<p.length;v+=2)h.localNames.push(p[v],-1)}}else h=e.data[u];return Xb(h,n,e,t,o,i,r,d),c!=null&&Ar(n,h,l),h}function cn(n,e,t,o,i,r,s,a){let d=B(),c=me(),l=Tt(c.consts,r);return LS(d,c,n,e,t,o,i,l,void 0,s,a),cn}var BS=VS;function VS(n,e,t,o){return br(!0),e[fe].createComment("")}function Qb(n){return typeof n=="function"&&n[Ue]!==void 0}function jf(n){return Qb(n)&&typeof n.set=="function"}var Hf=new N("");function Mi(n){return!!n&&typeof n.then=="function"}function zf(n){return!!n&&typeof n.subscribe=="function"}var Kb=new N("");var Uf=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,o)=>{this.resolve=t,this.reject=o});appInits=f(Kb,{optional:!0})??[];injector=f(he);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let r=ci(this.injector,i);if(Mi(r))t.push(r);else if(zf(r)){let s=new Promise((a,d)=>{r.subscribe({complete:a,error:d})});t.push(s)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{o()}).catch(i=>{this.reject(i)}),t.length===0&&o(),this.initialized=!0}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jb=new N("");function e_(){Gc(()=>{let n="";throw new H(600,n)})}function t_(n){return n.isBoundToModule}var jS=10;var At=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=f(En);afterRenderManager=f(Cf);zonelessEnabled=f(hi);rootEffectScheduler=f(Ia);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ie;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=f(Io);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Et(t=>!t))}constructor(){f(Ao,{optional:!0})}whenStable(){let t;return new Promise(o=>{t=this.isStable.subscribe({next:i=>{i&&o()}})}).finally(()=>{t.unsubscribe()})}_injector=f(He);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,o){return this.bootstrapImpl(t,o)}bootstrapImpl(t,o,i=he.NULL){return this._injector.get(q).run(()=>{ce(ne.BootstrapComponentStart);let s=t instanceof sd;if(!this._injector.get(Uf).done){let v="";throw new H(405,v)}let d;s?d=t:d=this._injector.get(Fr).resolveComponentFactory(t),this.componentTypes.push(d.componentType);let c=t_(d)?void 0:this._injector.get(Wt),l=o||d.selector,u=d.create(i,[],l,c),h=u.location.nativeElement,p=u.injector.get(Hf,null);return p?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),Dr(this.components,u),p?.unregisterApplication(h)}),this._loadComponent(u),ce(ne.BootstrapComponentEnd,u),u})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ce(ne.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(nd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ce(ne.ChangeDetectionEnd),new H(101,!1);let t=O(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,O(t),this.afterTick.next(),ce(ne.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ot,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<jS;){ce(ne.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ce(ne.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let o=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!o&&!mr(i))continue;let r=o&&!this.zonelessEnabled?0:1;_b(i,r),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>mr(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let o=t;this._views.push(o),o.attachToAppRef(this)}detachView(t){let o=t;Dr(this._views,o),o.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Jb,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dr(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dr(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function se(n,e,t,o){let i=B(),r=$n();if(Nt(i,r,e)){let s=me(),a=yr();pM(a,i,n,e,t,o)}return se}var oV=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Zu=class{destroy(e){}updateValue(e,t){}swap(e,t){let o=Math.min(e,t),i=Math.max(e,t),r=this.detach(i);if(i-o>1){let s=this.detach(o);this.attach(o,r),this.attach(i,s)}else this.attach(o,r)}move(e,t){this.attach(t,this.detach(e))}};function yu(n,e,t,o,i){return n===t&&Object.is(e,o)?1:Object.is(i(n,e),i(t,o))?-1:0}function HS(n,e,t,o){let i,r,s=0,a=n.length-1,d=void 0;if(Array.isArray(e)){O(o);let c=e.length-1;for(O(null);s<=a&&s<=c;){let l=n.at(s),u=e[s],h=yu(s,l,s,u,t);if(h!==0){h<0&&n.updateValue(s,u),s++;continue}let p=n.at(a),v=e[c],E=yu(a,p,c,v,t);if(E!==0){E<0&&n.updateValue(a,v),a--,c--;continue}let k=t(s,l),P=t(a,p),Ie=t(s,u);if(Object.is(Ie,P)){let be=t(c,v);Object.is(be,k)?(n.swap(s,a),n.updateValue(a,v),c--,a--):n.move(a,s),n.updateValue(s,u),s++;continue}if(i??=new Ya,r??=uy(n,s,a,t),Yu(n,i,s,Ie))n.updateValue(s,u),s++,a++;else if(r.has(Ie))i.set(k,n.detach(s)),a--;else{let be=n.create(s,e[s]);n.attach(s,be),s++,a++}}for(;s<=c;)ly(n,i,t,s,e[s]),s++}else if(e!=null){O(o);let c=e[Symbol.iterator]();O(null);let l=c.next();for(;!l.done&&s<=a;){let u=n.at(s),h=l.value,p=yu(s,u,s,h,t);if(p!==0)p<0&&n.updateValue(s,h),s++,l=c.next();else{i??=new Ya,r??=uy(n,s,a,t);let v=t(s,h);if(Yu(n,i,s,v))n.updateValue(s,h),s++,a++,l=c.next();else if(!r.has(v))n.attach(s,n.create(s,h)),s++,a++,l=c.next();else{let E=t(s,u);i.set(E,n.detach(s)),a--}}}for(;!l.done;)ly(n,i,t,n.length,l.value),l=c.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(c=>{n.destroy(c)})}function Yu(n,e,t,o){return e!==void 0&&e.has(o)?(n.attach(t,e.get(o)),e.delete(o),!0):!1}function ly(n,e,t,o,i){if(Yu(n,e,o,t(o,i)))n.updateValue(o,i);else{let r=n.create(o,i);n.attach(o,r)}}function uy(n,e,t,o){let i=new Set;for(let r=e;r<=t;r++)i.add(o(r,n.at(r)));return i}var Ya=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let o=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(o);)o=i.get(o);i.set(o,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,o]of this.kvMap)if(e(o,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(o);)o=i.get(o),e(o,t)}}};function X(n,e,t,o,i,r,s,a){xn("NgControlFlow");let d=B(),c=me(),l=Tt(c.consts,r);return Ir(d,c,n,e,t,o,i,l,256,s,a),$f}function $f(n,e,t,o,i,r,s,a){xn("NgControlFlow");let d=B(),c=me(),l=Tt(c.consts,r);return Ir(d,c,n,e,t,o,i,l,512,s,a),$f}function Q(n,e){xn("NgControlFlow");let t=B(),o=$n(),i=t[o]!==Pt?t[o]:-1,r=i!==-1?Xa(t,De+i):void 0,s=0;if(Nt(t,o,n)){let a=O(null);try{if(r!==void 0&&Sb(r,s),n!==-1){let d=De+n,c=Xa(t,d),l=Ju(t[L],d),u=xb(c,l,t),h=Rr(t,l,e,{dehydratedView:u});Or(c,h,s,bi(l,u))}}finally{O(a)}}else if(r!==void 0){let a=Mb(r,s);a!==void 0&&(a[Ne]=e)}}var Xu=class{lContainer;$implicit;$index;constructor(e,t,o){this.lContainer=e,this.$implicit=t,this.$index=o}get $count(){return this.lContainer.length-Ee}};function Gf(n){return n}function ad(n,e){return e}var Qu=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,o){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=o}};function Xe(n,e,t,o,i,r,s,a,d,c,l,u,h){xn("NgControlFlow");let p=B(),v=me(),E=d!==void 0,k=B(),P=a?s.bind(k[nt][Ne]):s,Ie=new Qu(E,P);k[De+n]=Ie,Ir(p,v,n+1,e,t,o,i,Tt(v.consts,r),256),E&&Ir(p,v,n+2,d,c,l,u,Tt(v.consts,h),512)}var Ku=class extends Zu{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,o){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=o}get length(){return this.lContainer.length-Ee}at(e){return this.getLView(e)[Ne].$implicit}attach(e,t){let o=t[yo];this.needsIndexUpdate||=e!==this.length,Or(this.lContainer,t,e,bi(this.templateTNode,o)),zS(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,US(this.lContainer,e),$S(this.lContainer,e)}create(e,t){let o=Ua(this.lContainer,this.templateTNode.tView.ssrId);return Rr(this.hostLView,this.templateTNode,new Xu(this.lContainer,t,e),{dehydratedView:o})}destroy(e){od(e[L],e)}updateValue(e,t){this.getLView(e)[Ne].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ne].$index=e}getLView(e){return GS(this.lContainer,e)}};function Qe(n){let e=O(null),t=nn();try{let o=B(),i=o[L],r=o[t],s=t+1,a=Xa(o,s);if(r.liveCollection===void 0){let c=Ju(i,s);r.liveCollection=new Ku(a,o,c)}else r.liveCollection.reset();let d=r.liveCollection;if(HS(d,n,r.trackByFn,e),d.updateIndexes(),r.hasEmptyBlock){let c=$n(),l=d.length===0;if(Nt(o,c,l)){let u=t+2,h=Xa(o,u);if(l){let p=Ju(i,u),v=xb(h,p,o),E=Rr(o,p,void 0,{dehydratedView:v});Or(h,E,0,bi(p,v))}else i.firstUpdatePass&&LM(h),Sb(h,0)}}}finally{O(e)}}function Xa(n,e){return n[e]}function zS(n,e){if(n.length<=Ee)return;let t=Ee+e,o=n[t],i=o?o[Do]:void 0;if(o&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let r=o[Dn];$E(r,i),No.delete(o[wn]),i.detachedLeaveAnimationFns=void 0}}function US(n,e){if(n.length<=Ee)return;let t=Ee+e,o=n[t],i=o?o[Do]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function $S(n,e){return Mr(n,e)}function GS(n,e){return Mb(n,e)}function Ju(n,e){return gr(n,e)}function I(n,e,t){let o=B(),i=$n();if(Nt(o,i,e)){let r=me(),s=yr();pb(s,o,n,e,o[fe],t)}return I}function ef(n,e,t,o,i){Tf(e,n,t,i?"class":"style",o)}function w(n,e,t,o){let i=B(),r=i[L],s=n+De,a=r.firstCreatePass?Af(s,i,2,e,Sf,_a(),t,o):r.data[s];if(If(a,i,n,e,n_),fi(a)){let d=i[L];rd(d,i,a),df(d,a,i)}return o!=null&&Ar(i,a),w}function D(){let n=me(),e=ze(),t=xf(e);return n.firstCreatePass&&Rf(n,t),Xl(t)&&Ql(),Zl(),t.classesWithoutHost!=null&&Tw(t)&&ef(n,t,B(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Nw(t)&&ef(n,t,B(),t.stylesWithoutHost,!1),D}function A(n,e,t,o){return w(n,e,t,o),D(),A}function G(n,e,t,o){let i=B(),r=i[L],s=n+De,a=r.firstCreatePass?QM(s,r,2,e,t,o):r.data[s];return If(a,i,n,e,n_),o!=null&&Ar(i,a),G}function U(){let n=ze(),e=xf(n);return Xl(e)&&Ql(),Zl(),U}function ke(n,e,t,o){return G(n,e,t,o),U(),ke}var n_=(n,e,t,o,i)=>(br(!0),Yy(e[fe],o,Tv()));function Wf(n,e,t){let o=B(),i=o[L],r=n+De,s=i.firstCreatePass?Af(r,o,8,"ng-container",Sf,_a(),e,t):i.data[r];if(If(s,o,n,"ng-container",WS),fi(s)){let a=o[L];rd(a,o,s),df(a,s,o)}return t!=null&&Ar(o,s),Wf}function qf(){let n=me(),e=ze(),t=xf(e);return n.firstCreatePass&&Rf(n,t),qf}function Yn(n,e,t){return Wf(n,e,t),qf(),Yn}var WS=(n,e,t,o,i)=>(br(!0),CE(e[fe],""));function ht(){return B()}function ln(n,e,t){let o=B(),i=$n();if(Nt(o,i,e)){let r=me(),s=yr();hb(s,o,n,e,o[fe],t)}return ln}var Lr="en-US";var qS=Lr;function o_(n){typeof n=="string"&&(qS=n.toLowerCase().replace(/_/g,"-"))}function x(n,e,t){let o=B(),i=me(),r=ze();return i_(i,o,o[fe],r,n,e,t),x}function it(n,e,t){let o=B(),i=me(),r=ze();return(r.type&3||t)&&Rb(r,i,o,t,o[fe],n,e,Oa(r,o,e)),it}function i_(n,e,t,o,i,r,s){let a=!0,d=null;if((o.type&3||s)&&(d??=Oa(o,e,r),Rb(o,n,e,s,t,i,r,d)&&(a=!1)),a){let c=o.outputs?.[i],l=o.hostDirectiveOutputs?.[i];if(l&&l.length)for(let u=0;u<l.length;u+=2){let h=l[u],p=l[u+1];d??=Oa(o,e,r),iy(o,e,h,p,i,d)}if(c&&c.length)for(let u of c)d??=Oa(o,e,r),iy(o,e,u,i,i,d)}}function T(n=1){return xv(n)}function ZS(n,e){let t=null,o=kE(n);for(let i=0;i<e.length;i++){let r=e[i];if(r==="*"){t=i;continue}if(o===null?eb(n,r,!0):RE(o,r))return i}return t}function ae(n){let e=B()[nt][tt];if(!e.projection){let t=n?n.length:1,o=e.projection=ev(t,null),i=o.slice(),r=e.child;for(;r!==null;){if(r.type!==128){let s=n?ZS(r,n):0;s!==null&&(i[s]?i[s].projectionNext=r:o[s]=r,i[s]=r)}r=r.next}}}function K(n,e=0,t,o,i,r){let s=B(),a=me(),d=o?n+1:null;d!==null&&Ir(s,a,d,o,i,r,null,t);let c=Ro(a,De+n,16,null,t||null);c.projection===null&&(c.projection=e),eu();let u=!s[yo]||Yl();s[nt][tt].projection[c.projection]===null&&d!==null?YS(s,a,d):u&&!Ja(c)&&nM(a,s,c)}function YS(n,e,t){let o=De+t,i=e.data[o],r=n[o],s=Ua(r,i.tView.ssrId),a=Rr(n,i,void 0,{dehydratedView:s});Or(r,a,0,bi(i,s))}function dd(n,e,t){return Hb(n,e,t),dd}function cd(n){let e=B(),t=me(),o=Da();vr(o+1);let i=Ff(t,o);if(n.dirty&&uv(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let r=Ub(e,o);n.reset(r,ky),n.notifyOnChanges()}return!0}return!1}function ld(){return Of(B(),Da())}function ud(n,e,t,o,i){return Gb(e,_S(n,t,o,i)),ud}function Nn(n,e,t,o){return Gb(n,Hb(e,t,o)),Nn}function kn(n=1){vr(Da()+n)}function Na(n,e){return n<<17|e<<2}function ko(n){return n>>17&32767}function XS(n){return(n&2)==2}function QS(n,e){return n&131071|e<<17}function tf(n){return n|2}function Ci(n){return(n&131068)>>2}function bu(n,e){return n&-131069|e<<2}function KS(n){return(n&1)===1}function nf(n){return n|1}function JS(n,e,t,o,i,r){let s=r?e.classBindings:e.styleBindings,a=ko(s),d=Ci(s);n[o]=t;let c=!1,l;if(Array.isArray(t)){let u=t;l=u[1],(l===null||si(u,l)>0)&&(c=!0)}else l=t;if(i)if(d!==0){let h=ko(n[a+1]);n[o+1]=Na(h,a),h!==0&&(n[h+1]=bu(n[h+1],o)),n[a+1]=QS(n[a+1],o)}else n[o+1]=Na(a,0),a!==0&&(n[a+1]=bu(n[a+1],o)),a=o;else n[o+1]=Na(d,0),a===0?a=o:n[d+1]=bu(n[d+1],o),d=o;c&&(n[o+1]=tf(n[o+1])),fy(n,l,o,!0),fy(n,l,o,!1),eI(e,l,n,o,r),s=Na(a,d),r?e.classBindings=s:e.styleBindings=s}function eI(n,e,t,o,i){let r=i?n.residualClasses:n.residualStyles;r!=null&&typeof e=="string"&&si(r,e)>=0&&(t[o+1]=nf(t[o+1]))}function fy(n,e,t,o){let i=n[t+1],r=e===null,s=o?ko(i):Ci(i),a=!1;for(;s!==0&&(a===!1||r);){let d=n[s],c=n[s+1];tI(d,e)&&(a=!0,n[s+1]=o?nf(c):tf(c)),s=o?ko(c):Ci(c)}a&&(n[t+1]=o?tf(i):nf(i))}function tI(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?si(n,e)>=0:!1}var $t={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nI(n){return n.substring($t.key,$t.keyEnd)}function oI(n){return iI(n),r_(n,s_(n,0,$t.textEnd))}function r_(n,e){let t=$t.textEnd;return t===e?-1:(e=$t.keyEnd=rI(n,$t.key=e,t),s_(n,e,t))}function iI(n){$t.key=0,$t.keyEnd=0,$t.value=0,$t.valueEnd=0,$t.textEnd=n.length}function s_(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function rI(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function $e(n,e,t){return a_(n,e,t,!1),$e}function ee(n,e){return a_(n,e,null,!0),ee}function Se(n){aI(pI,sI,n,!0)}function sI(n,e){for(let t=oI(e);t>=0;t=r_(e,t))ha(n,nI(e),!0)}function a_(n,e,t,o){let i=B(),r=me(),s=ou(2);if(r.firstUpdatePass&&c_(r,n,s,o),e!==Pt&&Nt(i,s,e)){let a=r.data[nn()];l_(r,a,i,i[fe],n,i[s+1]=gI(e,t),o,s)}}function aI(n,e,t,o){let i=me(),r=ou(2);i.firstUpdatePass&&c_(i,null,r,o);let s=B();if(t!==Pt&&Nt(s,r,t)){let a=i.data[nn()];if(u_(a,o)&&!d_(i,r)){let d=o?a.classesWithoutHost:a.stylesWithoutHost;d!==null&&(t=sa(d,t||"")),ef(i,a,s,t,o)}else hI(i,a,s,s[fe],s[r+1],s[r+1]=fI(n,e,t),o,r)}}function d_(n,e){return e>=n.expandoStartIndex}function c_(n,e,t,o){let i=n.data;if(i[t+1]===null){let r=i[nn()],s=d_(n,t);u_(r,o)&&e===null&&!s&&(e=!1),e=dI(i,r,e,o),JS(i,r,e,t,s,o)}}function dI(n,e,t,o){let i=Ev(n),r=o?e.residualClasses:e.residualStyles;if(i===null)(o?e.classBindings:e.styleBindings)===0&&(t=_u(null,n,e,t,o),t=xr(t,e.attrs,o),r=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=_u(i,n,e,t,o),r===null){let d=cI(n,e,o);d!==void 0&&Array.isArray(d)&&(d=_u(null,n,e,d[1],o),d=xr(d,e.attrs,o),lI(n,e,o,d))}else r=uI(n,e,o)}return r!==void 0&&(o?e.residualClasses=r:e.residualStyles=r),t}function cI(n,e,t){let o=t?e.classBindings:e.styleBindings;if(Ci(o)!==0)return n[ko(o)]}function lI(n,e,t,o){let i=t?e.classBindings:e.styleBindings;n[ko(i)]=o}function uI(n,e,t){let o,i=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<i;r++){let s=n[r].hostAttrs;o=xr(o,s,t)}return xr(o,e.attrs,t)}function _u(n,e,t,o,i){let r=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(r=e[a],o=xr(o,r.hostAttrs,i),r!==n);)a++;return n!==null&&(t.directiveStylingLast=a),o}function xr(n,e,t){let o=t?1:2,i=-1;if(e!==null)for(let r=0;r<e.length;r++){let s=e[r];typeof s=="number"?i=s:i===o&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ha(n,s,t?!0:e[++r]))}return n===void 0?null:n}function fI(n,e,t){if(t==null||t==="")return Ye;let o=[],i=an(t);if(Array.isArray(i))for(let r=0;r<i.length;r++)n(o,i[r],!0);else if(i instanceof Set)for(let r of i)n(o,r,!0);else if(typeof i=="object")for(let r in i)i.hasOwnProperty(r)&&n(o,r,i[r]);else typeof i=="string"&&e(o,i);return o}function pI(n,e,t){let o=String(e);o!==""&&!o.includes(" ")&&ha(n,o,t)}function hI(n,e,t,o,i,r,s,a){i===Pt&&(i=Ye);let d=0,c=0,l=0<i.length?i[0]:null,u=0<r.length?r[0]:null;for(;l!==null||u!==null;){let h=d<i.length?i[d+1]:void 0,p=c<r.length?r[c+1]:void 0,v=null,E;l===u?(d+=2,c+=2,h!==p&&(v=u,E=p)):u===null||l!==null&&l<u?(d+=2,v=l):(c+=2,v=u,E=p),v!==null&&l_(n,e,t,o,v,E,s,a),l=d<i.length?i[d]:null,u=c<r.length?r[c]:null}}function l_(n,e,t,o,i,r,s,a){if(!(e.type&3))return;let d=n.data,c=d[a+1],l=KS(c)?py(d,e,t,i,Ci(c),s):void 0;if(!Qa(l)){Qa(r)||XS(c)&&(r=py(d,null,t,i,a,s));let u=zl(nn(),t);iM(o,s,u,i,r)}}function py(n,e,t,o,i,r){let s=e===null,a;for(;i>0;){let d=n[i],c=Array.isArray(d),l=c?d[1]:d,u=l===null,h=t[i+1];h===Pt&&(h=u?Ye:void 0);let p=u?ga(h,o):l===o?h:void 0;if(c&&!Qa(p)&&(p=ga(d,o)),Qa(p)&&(a=p,s))return a;let v=n[i+1];i=s?ko(v):Ci(v)}if(e!==null){let d=r?e.residualClasses:e.residualStyles;d!=null&&(a=ga(d,o))}return a}function Qa(n){return n!==void 0}function gI(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=bn(an(n)))),n}function u_(n,e){return(n.flags&(e?8:16))!==0}function V(n,e=""){let t=B(),o=me(),i=n+De,r=o.firstCreatePass?Ro(o,i,1,e,null):o.data[i],s=mI(o,t,r,e);t[i]=s,Ma()&&Ef(o,t,s,r),So(r,!1)}var mI=(n,e,t,o)=>(br(!0),bE(e[fe],o));function f_(n,e,t,o=""){return Nt(n,$n(),t)?e+ua(t)+o:Pt}function we(n){return un("",n),we}function un(n,e,t){let o=B(),i=f_(o,n,e,t);return i!==Pt&&vI(o,nn(),i),un}function vI(n,e,t){let o=zl(e,n);_E(n[fe],o,t)}function fd(n,e,t){jf(e)&&(e=e());let o=B(),i=$n();if(Nt(o,i,e)){let r=me(),s=yr();pb(s,o,n,e,o[fe],t)}return fd}function Zf(n,e){let t=jf(n);return t&&n.set(e),t}function pd(n,e){let t=B(),o=me(),i=ze();return i_(o,t,t[fe],i,n,e),pd}var p_={};function Br(n){xn("NgLet");let e=me(),t=B(),o=n+De,i=Ro(e,o,128,null,null);return So(i,!1),va(e,t,o,p_),Br}function hd(n){let e=me(),t=B(),o=nn();return va(e,t,o,n),n}function gd(n){let e=bv(),t=lv(e,De+n);if(t===p_)throw new H(314,!1);return t}function md(n,e,t=""){return f_(B(),n,e,t)}function hy(n,e,t){let o=me();o.firstCreatePass&&h_(e,o.data,o.blueprint,Ht(n),t)}function h_(n,e,t,o,i){if(n=Le(n),Array.isArray(n))for(let r=0;r<n.length;r++)h_(n[r],e,t,o,i);else{let r=me(),s=B(),a=ze(),d=ho(n)?n:Le(n.provide),c=Fl(n),l=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(ho(n)||!n.multi){let p=new To(c,i,ge,null),v=Du(d,e,i?l:l+h,u);v===-1?(Eu(Va(a,s),r,d),Cu(r,n,e.length),e.push(d),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[v]=p,s[v]=p)}else{let p=Du(d,e,l+h,u),v=Du(d,e,l,l+h),E=p>=0&&t[p],k=v>=0&&t[v];if(i&&!k||!i&&!E){Eu(Va(a,s),r,d);let P=_I(i?bI:yI,t.length,i,o,c,n);!i&&k&&(t[v].providerFactory=P),Cu(r,n,e.length,0),e.push(d),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else{let P=g_(t[i?v:p],c,!i&&o);Cu(r,n,p>-1?p:v,P)}!i&&o&&k&&t[v].componentProviders++}}}function Cu(n,e,t,o){let i=ho(e),r=sv(e);if(i||r){let d=(r?Le(e.useClass):e).prototype.ngOnDestroy;if(d){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=c.indexOf(t);l===-1?c.push(t,[o,d]):c[l+1].push(o,d)}else c.push(t,d)}}}function g_(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Du(n,e,t,o){for(let i=t;i<o;i++)if(e[i]===n)return i;return-1}function yI(n,e,t,o,i){return of(this.multi,[])}function bI(n,e,t,o,i){let r=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,d=wr(o,o[L],this.providerFactory.index,i);s=d.slice(0,a),of(r,s);for(let c=a;c<d.length;c++)s.push(d[c])}else s=[],of(r,s);return s}function of(n,e){for(let t=0;t<n.length;t++){let o=n[t];e.push(o())}return e}function _I(n,e,t,o,i,r){let s=new To(n,t,ge,null);return s.multi=[],s.index=e,s.componentProviders=0,g_(s,i,o&&!t),s}function Ke(n,e){return t=>{t.providersResolver=(o,i)=>hy(o,i?i(n):n,!1),e&&(t.viewProvidersResolver=(o,i)=>hy(o,i?i(e):e,!0))}}function Si(n,e,t){return CI(B(),nu(),n,e,t)}function Yf(n,e,t,o){return DI(B(),nu(),n,e,t,o)}function m_(n,e){let t=n[e];return t===Pt?void 0:t}function CI(n,e,t,o,i,r){let s=e+t;return Nt(n,s,i)?Ab(n,s+1,r?o.call(r,i):o(i)):m_(n,s+1)}function DI(n,e,t,o,i,r,s){let a=e+t;return KM(n,a,i,r)?Ab(n,a+2,s?o.call(s,i,r):o(i,r)):m_(n,a+2)}var v_=(()=>{class n{applicationErrorHandler=f(En);appRef=f(At);taskService=f(Io);ngZone=f(q);zonelessEnabled=f(hi);tracing=f(Ao,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lr):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(f(Sa,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?Pv:du;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lr+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){this.applicationErrorHandler(o)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y_(){return[{provide:_n,useExisting:v_},{provide:q,useClass:ur},{provide:hi,useValue:!0}]}function wI(){return typeof $localize<"u"&&$localize.locale||Lr}var vd=new N("",{factory:()=>f(vd,{optional:!0,skipSelf:!0})||wI()});var yd=class{destroyed=!1;listeners=null;errorHandler=f(Mt,{optional:!0});destroyRef=f(ut);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new H(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(mo(953,!1));return}if(this.listeners===null)return;let t=O(null);try{for(let o of this.listeners)try{o(e)}catch(i){this.errorHandler?.handleError(i)}}finally{O(t)}}};function m(n,e){return er(n,e?.equal)}var w_=Symbol("InputSignalNode#UNSET"),VI=y(g({},Ss),{transformFn:void 0,applyValueToInputSignal(n,e){tr(n,e)}});function E_(n,e){let t=Object.create(VI);t.value=n,t.transformFn=e?.transform;function o(){if(Qi(t),t.value===w_){let i=null;throw new H(-950,i)}return t.value}return o[Ue]=t,o}function ue(n){return new yd}function b_(n,e){return E_(n,e)}function jI(n){return E_(w_,n)}var _=(b_.required=jI,b_);function __(n,e){return Lf(e)}function HI(n,e){return Bf(e)}var Oo=(__.required=HI,__);function C_(n,e){return Lf(e)}function zI(n,e){return Bf(e)}var M_=(C_.required=zI,C_);var UI=(()=>{class n{zone=f(q);changeDetectionScheduler=f(_n);applicationRef=f(At);applicationErrorHandler=f(En);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$I=new N("",{factory:()=>!1});function GI({ngZoneFactory:n,scheduleInRootZone:e}){return n??=()=>new q(y(g({},I_()),{scheduleInRootZone:e})),[{provide:hi,useValue:!1},{provide:q,useFactory:n},{provide:Cn,multi:!0,useFactory:()=>{let t=f(UI,{optional:!0});return()=>t.initialize()}},{provide:Cn,multi:!0,useFactory:()=>{let t=f(WI);return()=>{t.initialize()}}},{provide:Sa,useValue:e??au}]}function S_(n){let e=n?.scheduleInRootZone,t=GI({ngZoneFactory:()=>{let o=I_(n);return o.scheduleInRootZone=e,o.shouldCoalesceEventChangeDetection&&xn("NgZone_CoalesceEvent"),new q(o)},scheduleInRootZone:e});return ai([{provide:$I,useValue:!0},t])}function I_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var WI=(()=>{class n{subscription=new xe;initialized=!1;zone=f(q);pendingTasks=f(Io);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{q.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{q.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xf=new N(""),qI=new N("");function Vr(n){return!n.moduleRef}function ZI(n){let e=Vr(n)?n.r3Injector:n.moduleRef.injector,t=e.get(q);return t.run(()=>{Vr(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let o=e.get(En),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o})}),Vr(n)){let r=()=>e.destroy(),s=n.platformInjector.get(Xf);s.add(r),e.onDestroy(()=>{i.unsubscribe(),s.delete(r)})}else{let r=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Xf);s.add(r),n.moduleRef.onDestroy(()=>{Dr(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(r)})}return XI(o,t,()=>{let r=e.get(Io),s=r.add(),a=e.get(Uf);return a.runInitializers(),a.donePromise.then(()=>{let d=e.get(vd,Lr);if(o_(d||Lr),!e.get(qI,!0))return Vr(n)?e.get(At):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Vr(n)){let l=e.get(At);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return YI?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>{r.remove(s)})})})}var YI;function XI(n,e,t){try{let o=t();return Mi(o)?o.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):o}catch(o){throw e.runOutsideAngular(()=>n(o)),o}}var bd=null;function QI(n=[],e){return he.create({name:e,providers:[{provide:pr,useValue:"platform"},{provide:Xf,useValue:new Set([()=>bd=null])},...n]})}function KI(n=[]){if(bd)return bd;let e=QI(n);return bd=e,e_(),JI(e),e}function JI(n){let e=n.get(Ka,null);ci(n,()=>{e?.forEach(t=>t())})}var ex=1e4;var r4=ex-1e3;var Ii=(()=>{class n{static __NG_ELEMENT_ID__=tx}return n})();function tx(n){return nx(ze(),B(),(n&16)===16)}function nx(n,e,t){if(Un(n)&&!t){let o=xt(n.index,e);return new Wn(o,o)}else if(n.type&175){let o=e[nt];return new Wn(o,e)}return null}function x_(n){let{rootComponent:e,appProviders:t,platformProviders:o,platformRef:i}=n;ce(ne.BootstrapApplicationStart);try{let r=i?.injector??KI(o),s=[y_(),Rv,...t||[]],a=new Sr({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return ZI({r3Injector:a.injector,platformInjector:r,rootComponent:e})}catch(r){return Promise.reject(r)}finally{ce(ne.BootstrapApplicationEnd)}}function Pn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function T_(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function _d(n,e){let t=jn(n),o=e.elementInjector||di();return new _i(t).create(o,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var N_=null;function Rt(){return N_}function Qf(n){N_??=n}var jr=class{},Cd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:()=>f(k_),providedIn:"platform"})}return n})();var k_=(()=>{class n extends Cd{_location;_history;_doc=f(J);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rt().getBaseHref(this._doc)}onPopState(t){let o=Rt().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",t,!1),()=>o.removeEventListener("popstate",t)}onHashChange(t){let o=Rt().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",t,!1),()=>o.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,o,i){this._history.pushState(t,o,i)}replaceState(t,o,i){this._history.replaceState(t,o,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function R_(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function P_(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Xn(n){return n&&n[0]!=="?"?`?${n}`:n}var Dd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:()=>f(ix),providedIn:"root"})}return n})(),ox=new N(""),ix=(()=>{class n extends Dd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,o){super(),this._platformLocation=t,this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??f(J).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return R_(this._baseHref,t)}path(t=!1){let o=this._platformLocation.pathname+Xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${o}${i}`:o}pushState(t,o,i,r){let s=this.prepareExternalUrl(i+Xn(r));this._platformLocation.pushState(t,o,s)}replaceState(t,o,i,r){let s=this.prepareExternalUrl(i+Xn(r));this._platformLocation.replaceState(t,o,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(o){return new(o||n)(Z(Cd),Z(ox,8))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wd=(()=>{class n{_subject=new ie;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let o=this._locationStrategy.getBaseHref();this._basePath=ax(P_(A_(o))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,o=""){return this.path()==this.normalize(t+Xn(o))}normalize(t){return n.stripTrailingSlash(sx(this._basePath,A_(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,o="",i=null){this._locationStrategy.pushState(i,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(o)),i)}replaceState(t,o="",i=null){this._locationStrategy.replaceState(i,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(o)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}),()=>{let o=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",o){this._urlChangeListeners.forEach(i=>i(t,o))}subscribe(t,o,i){return this._subject.subscribe({next:t,error:o??void 0,complete:i??void 0})}static normalizeQueryParams=Xn;static joinWithSlash=R_;static stripTrailingSlash=P_;static \u0275fac=function(o){return new(o||n)(Z(Dd))};static \u0275prov=C({token:n,factory:()=>rx(),providedIn:"root"})}return n})();function rx(){return new wd(Z(Dd))}function sx(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function A_(n){return n.replace(/\/index.html$/,"")}function ax(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Kf=/\s+/,O_=[],Jf=(()=>{class n{_ngEl;_renderer;initialClasses=O_;rawClass;stateMap=new Map;constructor(t,o){this._ngEl=t,this._renderer=o}set klass(t){this.initialClasses=t!=null?t.trim().split(Kf):O_}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Kf):t}ngDoCheck(){for(let o of this.initialClasses)this._updateState(o,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let o of t)this._updateState(o,!0);else if(t!=null)for(let o of Object.keys(t))this._updateState(o,!!t[o]);this._applyStateDiff()}_updateState(t,o){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==o&&(i.changed=!0,i.enabled=o),i.touched=!0):this.stateMap.set(t,{enabled:o,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let o=t[0],i=t[1];i.changed?(this._toggleClass(o,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(o,!1),this.stateMap.delete(o)),i.touched=!1}}_toggleClass(t,o){t=t.trim(),t.length>0&&t.split(Kf).forEach(i=>{o?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(o){return new(o||n)(ge(Y),ge(ft))};static \u0275dir=R({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})(),xi=(()=>{class n{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletEnvironmentInjector;ngComponentOutletContent;ngComponentOutletNgModule;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(t){this._viewContainerRef=t}_needToReCreateNgModuleInstance(t){return t.ngComponentOutletNgModule!==void 0}_needToReCreateComponentInstance(t){return t.ngComponentOutlet!==void 0||t.ngComponentOutletContent!==void 0||t.ngComponentOutletInjector!==void 0||t.ngComponentOutletEnvironmentInjector!==void 0||this._needToReCreateNgModuleInstance(t)}ngOnChanges(t){if(this._needToReCreateComponentInstance(t)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let o=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(t)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=Vf(this.ngComponentOutletNgModule,dx(o)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:o,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent,environmentInjector:this.ngComponentOutletEnvironmentInjector})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let t of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(t,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(t){for(let[o,i]of this._inputsUsed)i?(t.setInput(o,this.ngComponentOutletInputs[o]),this._inputsUsed.set(o,!1)):(t.setInput(o,void 0),this._inputsUsed.delete(o))}static \u0275fac=function(o){return new(o||n)(ge(Tn))};static \u0275dir=R({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletEnvironmentInjector:"ngComponentOutletEnvironmentInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule"},exportAs:["ngComponentOutlet"],features:[qn]})}return n})();function dx(n){return n.get(Wt).injector}var rt=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=Ct({type:n});static \u0275inj=lt({})}return n})();function ep(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let o=t.indexOf("="),[i,r]=o==-1?[t,""]:[t.slice(0,o),t.slice(o+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}var Hr=class{};var tp="browser";function Ed(n){return n===tp}var zr=class{_doc;constructor(e){this._doc=e}manager},Md=(()=>{class n extends zr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,i,r){return t.addEventListener(o,i,r),()=>this.removeEventListener(t,o,i,r)}removeEventListener(t,o,i,r){return t.removeEventListener(o,i,r)}static \u0275fac=function(o){return new(o||n)(Z(J))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),xd=new N(""),rp=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,o){this._zone=o,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Md));this._plugins=i.slice().reverse();let r=t.find(s=>s instanceof Md);r&&this._plugins.push(r)}addEventListener(t,o,i,r){return this._findPluginFor(o).addEventListener(t,o,i,r)}getZone(){return this._zone}_findPluginFor(t){let o=this._eventNameToPlugin.get(t);if(o)return o;if(o=this._plugins.find(r=>r.supports(t)),!o)throw new H(5101,!1);return this._eventNameToPlugin.set(t,o),o}static \u0275fac=function(o){return new(o||n)(Z(xd),Z(q))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),np="ng-app-id";function F_(n){for(let e of n)e.remove()}function L_(n,e){let t=e.createElement("style");return t.textContent=n,t}function ux(n,e,t,o){let i=n.head?.querySelectorAll(`style[${np}="${e}"],link[${np}="${e}"]`);if(i)for(let r of i)r.removeAttribute(np),r instanceof HTMLLinkElement?o.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&t.set(r.textContent,{usage:0,elements:[r]})}function ip(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sp=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,o,i,r={}){this.doc=t,this.appId=o,this.nonce=i,ux(t,o,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,o){for(let i of t)this.addUsage(i,this.inline,L_);o?.forEach(i=>this.addUsage(i,this.external,ip))}removeStyles(t,o){for(let i of t)this.removeUsage(i,this.inline);o?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,o,i){let r=o.get(t);r?r.usage++:o.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,o){let i=o.get(t);i&&(i.usage--,i.usage<=0&&(F_(i.elements),o.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])F_(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[o,{elements:i}]of this.inline)i.push(this.addElement(t,L_(o,this.doc)));for(let[o,{elements:i}]of this.external)i.push(this.addElement(t,ip(o,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,o){return this.nonce&&o.setAttribute("nonce",this.nonce),t.appendChild(o)}static \u0275fac=function(o){return new(o||n)(Z(J),Z(wi),Z(Ei,8),Z(Sn))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),op={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ap=/%COMP%/g;var V_="%COMP%",fx=`_nghost-${V_}`,px=`_ngcontent-${V_}`,hx=!0,gx=new N("",{factory:()=>hx});function mx(n){return px.replace(ap,n)}function vx(n){return fx.replace(ap,n)}function j_(n,e){return e.map(t=>t.replace(ap,n))}var dp=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,o,i,r,s,a,d=null,c=null){this.eventManager=t,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=r,this.doc=s,this.ngZone=a,this.nonce=d,this.tracingService=c,this.defaultRenderer=new Ur(t,s,a,this.tracingService)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,o);return i instanceof Id?i.applyToHost(t):i instanceof $r&&i.applyStyles(),i}getOrCreateRenderer(t,o){let i=this.rendererByCompId,r=i.get(o.id);if(!r){let s=this.doc,a=this.ngZone,d=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,u=this.tracingService;switch(o.encapsulation){case Gt.Emulated:r=new Id(d,c,o,this.appId,l,s,a,u);break;case Gt.ShadowDom:return new Sd(d,t,o,s,a,this.nonce,u,c);case Gt.ExperimentalIsolatedShadowDom:return new Sd(d,t,o,s,a,this.nonce,u);default:r=new $r(d,c,o,l,s,a,u);break}i.set(o.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(o){return new(o||n)(Z(rp),Z(sp),Z(wi),Z(gx),Z(J),Z(q),Z(Ei),Z(Ao,8))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),Ur=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,o,i){this.eventManager=e,this.doc=t,this.ngZone=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(op[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(B_(e)?e.content:e).appendChild(t)}insertBefore(e,t,o){e&&(B_(e)?e.content:e).insertBefore(t,o)}removeChild(e,t){t.remove()}selectRootElement(e,t){let o=typeof e=="string"?this.doc.querySelector(e):e;if(!o)throw new H(-5104,!1);return t||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,o,i){if(i){t=i+":"+t;let r=op[i];r?e.setAttributeNS(r,t,o):e.setAttribute(t,o)}else e.setAttribute(t,o)}removeAttribute(e,t,o){if(o){let i=op[o];i?e.removeAttributeNS(i,t):e.removeAttribute(`${o}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,o,i){i&(rn.DashCase|rn.Important)?e.style.setProperty(t,o,i&rn.Important?"important":""):e.style[t]=o}removeStyle(e,t,o){o&rn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,o){e!=null&&(e[t]=o)}setValue(e,t){e.nodeValue=t}listen(e,t,o,i){if(typeof e=="string"&&(e=Rt().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let r=this.decoratePreventDefault(o);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(e,t,r)),this.eventManager.addEventListener(e,t,r,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function B_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Sd=class extends Ur{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,o,i,r,s,a,d){super(e,i,r,a),this.hostEl=t,this.sharedStylesHost=d,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let c=o.styles;c=j_(o.id,c);for(let u of c){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=u,this.shadowRoot.appendChild(h)}let l=o.getExternalStyles?.();if(l)for(let u of l){let h=ip(u,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,o){return super.insertBefore(this.nodeOrShadowRoot(e),t,o)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},$r=class extends Ur{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,o,i,r,s,a,d){super(e,r,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let c=o.styles;this.styles=d?j_(d,c):c,this.styleUrls=o.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&No.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Id=class extends $r{contentAttr;hostAttr;constructor(e,t,o,i,r,s,a,d){let c=i+"-"+o.id;super(e,t,o,r,s,a,d,c),this.contentAttr=mx(c),this.hostAttr=vx(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let o=super.createElement(e,t);return super.setAttribute(o,this.contentAttr,""),o}};var Td=class n extends jr{supportsDOMEvents=!0;static makeCurrent(){Qf(new n)}onAndCancel(e,t,o,i){return e.addEventListener(t,o,i),()=>{e.removeEventListener(t,o,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=yx();return t==null?null:bx(t)}resetBaseElement(){Gr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ep(document.cookie,e)}},Gr=null;function yx(){return Gr=Gr||document.head.querySelector("base"),Gr?Gr.getAttribute("href"):null}function bx(n){return new URL(n,document.baseURI).pathname}var _x=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})(),H_=["alt","control","meta","shift"],Cx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dx={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},z_=(()=>{class n extends zr{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,o,i,r){let s=n.parseEventName(o),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rt().onAndCancel(t,s.domEventName,a,r))}static parseEventName(t){let o=t.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let r=n._normalizeKey(o.pop()),s="",a=o.indexOf("code");if(a>-1&&(o.splice(a,1),s="code."),H_.forEach(c=>{let l=o.indexOf(c);l>-1&&(o.splice(l,1),s+=c+".")}),s+=r,o.length!=0||r.length===0)return null;let d={};return d.domEventName=i,d.fullKey=s,d}static matchEventFullKeyCode(t,o){let i=Cx[t.key]||t.key,r="";return o.indexOf("code.")>-1&&(i=t.code,r="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),H_.forEach(s=>{if(s!==i){let a=Dx[s];a(t)&&(r+=s+".")}}),r+=i,r===o)}static eventCallback(t,o,i){return r=>{n.matchEventFullKeyCode(r,t)&&i.runGuarded(()=>o(r))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(o){return new(o||n)(Z(J))};static \u0275prov=C({token:n,factory:n.\u0275fac})}return n})();function cp(n,e,t){return M(this,null,function*(){let o=g({rootComponent:n},wx(e,t));return x_(o)})}function wx(n,e){return{platformRef:e?.platformRef,appProviders:[...xx,...n?.providers??[]],platformProviders:Ix}}function Ex(){Td.makeCurrent()}function Mx(){return new Mt}function Sx(){return af(document),document}var Ix=[{provide:Sn,useValue:tp},{provide:Ka,useValue:Ex,multi:!0},{provide:J,useFactory:Sx}];var xx=[{provide:pr,useValue:"root"},{provide:Mt,useFactory:Mx},{provide:xd,useClass:Md,multi:!0},{provide:xd,useClass:z_,multi:!0},dp,sp,rp,{provide:ot,useExisting:dp},{provide:Hr,useClass:_x},[]];var lp=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:function(o){let i=null;return o?i=new(o||n):i=Z(Tx),i},providedIn:"root"})}return n})(),Tx=(()=>{class n extends lp{_doc;constructor(t){super(),this._doc=t}sanitize(t,o){if(o==null)return null;switch(t){case kt.NONE:return o;case kt.HTML:return Zn(o,"HTML")?an(o):hf(this._doc,String(o)).toString();case kt.STYLE:return Zn(o,"Style")?an(o):o;case kt.SCRIPT:if(Zn(o,"Script"))return an(o);throw new H(5200,!1);case kt.URL:return Zn(o,"URL")?an(o):kr(String(o));case kt.RESOURCE_URL:if(Zn(o,"ResourceURL"))return an(o);throw new H(5201,!1);default:throw new H(5202,!1)}}bypassSecurityTrustHtml(t){return cf(t)}bypassSecurityTrustStyle(t){return lf(t)}bypassSecurityTrustScript(t){return uf(t)}bypassSecurityTrustUrl(t){return ff(t)}bypassSecurityTrustResourceUrl(t){return pf(t)}static \u0275fac=function(o){return new(o||n)(Z(J))};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U_={providers:[uu(),S_({eventCoalescing:!0})]};function Wr(n){return n.buttons===0||n.detail===0}function qr(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var up;function $_(){if(up==null){let n=typeof document<"u"?document.head:null;up=!!(n&&(n.createShadowRoot||n.attachShadow))}return up}function fp(n){if($_()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function gt(n){return n.composedPath?n.composedPath()[0]:n.target}var pp;try{pp=typeof Intl<"u"&&Intl.v8BreakIterator}catch(n){pp=!1}var mt=(()=>{class n{_platformId=f(Sn);isBrowser=this._platformId?Ed(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||pp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zr;function G_(){if(Zr==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zr=!0}))}finally{Zr=Zr||!1}return Zr}function Ti(n){return G_()?n:!!n.capture}function Qn(n){return n instanceof Y?n.nativeElement:n}var W_=new N("cdk-input-modality-detector-options"),q_={ignoreKeys:[18,17,224,91,16]},Z_=650,hp={passive:!0,capture:!0},Y_=(()=>{class n{_platform=f(mt);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new ao(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(o=>o===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=gt(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<Z_||(this._modality.next(Wr(t)?"keyboard":"mouse"),this._mostRecentTarget=gt(t))};_onTouchstart=t=>{if(qr(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gt(t)};constructor(){let t=f(q),o=f(J),i=f(W_,{optional:!0});if(this._options=g(g({},q_),i),this.modalityDetected=this._modality.pipe(rr(1)),this.modalityChanged=this.modalityDetected.pipe(dl()),this._platform.isBrowser){let r=f(ot).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[r.listen(o,"keydown",this._onKeydown,hp),r.listen(o,"mousedown",this._onMousedown,hp),r.listen(o,"touchstart",this._onTouchstart,hp)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yr=(function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n})(Yr||{}),X_=new N("cdk-focus-monitor-default-options"),Nd=Ti({passive:!0,capture:!0}),gp=(()=>{class n{_ngZone=f(q);_platform=f(mt);_inputModalityDetector=f(Y_);_origin=null;_lastFocusOrigin=null;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=f(J);_stopInputModalityDetector=new ie;constructor(){let t=f(X_,{optional:!0});this._detectionMode=t?.detectionMode||Yr.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let o=gt(t);for(let i=o;i;i=i.parentElement)t.type==="focus"?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,o=!1){let i=Qn(t);if(!this._platform.isBrowser||i.nodeType!==1)return ir();let r=fp(i)||this._document,s=this._elementInfo.get(i);if(s)return o&&(s.checkChildren=!0),s.subject;let a={checkChildren:o,subject:new ie,rootNode:r};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let o=Qn(t),i=this._elementInfo.get(o);i&&(i.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(i))}focusVia(t,o,i){let r=Qn(t),s=this._document.activeElement;r===s?this._getClosestElementsInfo(r).forEach(([a,d])=>this._originChanged(a,o,d)):(this._setOrigin(o),typeof r.focus=="function"&&r.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,o)=>this.stopMonitoring(o))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Yr.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,o){t.classList.toggle("cdk-focused",!!o),t.classList.toggle("cdk-touch-focused",o==="touch"),t.classList.toggle("cdk-keyboard-focused",o==="keyboard"),t.classList.toggle("cdk-mouse-focused",o==="mouse"),t.classList.toggle("cdk-program-focused",o==="program")}_setOrigin(t,o=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&o,this._detectionMode===Yr.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?Z_:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(t,o){let i=this._elementInfo.get(o),r=gt(t);!i||!i.checkChildren&&o!==r||this._originChanged(o,this._getFocusOrigin(r),i)}_onBlur(t,o){let i=this._elementInfo.get(o);!i||i.checkChildren&&t.relatedTarget instanceof Node&&o.contains(t.relatedTarget)||(this._setClasses(o),this._emitOrigin(i,null))}_emitOrigin(t,o){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(o))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let o=t.rootNode,i=this._rootNodeFocusListenerCount.get(o)||0;i||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,Nd),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,Nd)}),this._rootNodeFocusListenerCount.set(o,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(lo(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(t){let o=t.rootNode;if(this._rootNodeFocusListenerCount.has(o)){let i=this._rootNodeFocusListenerCount.get(o);i>1?this._rootNodeFocusListenerCount.set(o,i-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Nd),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Nd),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,o,i){this._setClasses(t,o),this._emitOrigin(i,o),this._lastFocusOrigin=o}_getClosestElementsInfo(t){let o=[];return this._elementInfo.forEach((i,r)=>{(r===t||i.checkChildren&&r.contains(t))&&o.push([r,i])}),o}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:o,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!o||o===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let r=t.labels;if(r){for(let s=0;s<r.length;s++)if(r[s].contains(o))return!0}return!1}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kd=new WeakMap,Kn=(()=>{class n{_appRef;_injector=f(he);_environmentInjector=f(He);load(t){let o=this._appRef=this._appRef||this._injector.get(At),i=kd.get(o);i||(i={loaders:new Set,refs:[]},kd.set(o,i),o.onDestroy(()=>{kd.get(o)?.refs.forEach(r=>r.destroy()),kd.delete(o)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(_d(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pd;function Nx(){if(Pd===void 0&&(Pd=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Pd=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Pd}function kx(n){return Nx()?.createHTML(n)||n}function Q_(n,e,t){let o=t.sanitize(kt.HTML,e);n.innerHTML=kx(o||"")}function Xr(n){return Array.isArray(n)?n:[n]}var K_=new Set,Fo,Ad=(()=>{class n{_platform=f(mt);_nonce=f(Ei,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ax}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Px(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Px(n,e){if(!K_.has(n))try{Fo||(Fo=document.createElement("style"),e&&Fo.setAttribute("nonce",e),Fo.setAttribute("type","text/css"),document.head.appendChild(Fo)),Fo.sheet&&(Fo.sheet.insertRule(`@media ${n} {body{ }}`,0),K_.add(n))}catch(t){console.error(t)}}function Ax(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var mp=(()=>{class n{_mediaMatcher=f(Ad);_zone=f(q);_queries=new Map;_destroySubject=new ie;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return J_(Xr(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let i=J_(Xr(t)).map(s=>this._registerQuery(s).observable),r=ol(i);return r=ni(r.pipe(al(1)),r.pipe(rr(1),sl(0))),r.pipe(Et(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:d,query:c})=>{a.matches=a.matches||d,a.breakpoints[c]=d}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let o=this._mediaMatcher.matchMedia(t),r={observable:new pe(s=>{let a=d=>this._zone.run(()=>s.next(d));return o.addListener(a),()=>{o.removeListener(a)}}).pipe(cl(o),Et(({matches:s})=>({query:t,matches:s})),lo(this._destroySubject)),mql:o};return this._queries.set(t,r),r}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function J_(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var eC=new N("liveAnnouncerElement",{providedIn:"root",factory:()=>null}),tC=new N("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Rx=0,vp=(()=>{class n{_ngZone=f(q);_defaultOptions=f(tC,{optional:!0});_liveElement;_document=f(J);_sanitizer=f(lp);_previousTimeout;_currentPromise;_currentResolve;constructor(){let t=f(eC,{optional:!0});this._liveElement=t||this._createLiveElement()}announce(t,...o){let i=this._defaultOptions,r,s;return o.length===1&&typeof o[0]=="number"?s=o[0]:[r,s]=o,this.clear(),clearTimeout(this._previousTimeout),r||(r=i&&i.politeness?i.politeness:"polite"),s==null&&i&&(s=i.duration),this._liveElement.setAttribute("aria-live",r),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{!t||typeof t=="string"?this._liveElement.textContent=t:Q_(this._liveElement,t,this._sanitizer),typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let t="cdk-live-announcer-element",o=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let r=0;r<o.length;r++)o[r].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id=`cdk-live-announcer-${Rx++}`,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(t){let o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<o.length;i++){let r=o[i],s=r.getAttribute("aria-owns");s?s.indexOf(t)===-1&&r.setAttribute("aria-owns",s+" "+t):r.setAttribute("aria-owns",t)}}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yp={},Lo=class n{_appId=f(wi);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(e,t=!1){return this._appId!=="ng"&&(e+=this._appId),yp.hasOwnProperty(e)||(yp[e]=0),`${e}${t?n._infix+"-":""}${yp[e]++}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})};function bp(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var nC={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Ox=new N("MATERIAL_ANIMATIONS"),oC=null;function Fx(){return f(Ox,{optional:!0})?.animationsDisabled||f(Nr,{optional:!0})==="NoopAnimations"?"di-disabled":(oC??=f(Ad).matchMedia("(prefers-reduced-motion)").matches,oC?"reduced-motion":"enabled")}function Bo(){return Fx()!=="enabled"}function Vo(n){return n==null?"":typeof n=="string"?n:`${n}px`}var Ot=(function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n})(Ot||{}),_p=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ot.HIDDEN;constructor(e,t,o,i=!1){this._renderer=e,this.element=t,this.config=o,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},iC=Ti({passive:!0,capture:!0}),Cp=class{_events=new Map;addHandler(e,t,o,i){let r=this._events.get(t);if(r){let s=r.get(o);s?s.add(i):r.set(o,new Set([i]))}else this._events.set(t,new Map([[o,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,iC)})}removeHandler(e,t,o){let i=this._events.get(e);if(!i)return;let r=i.get(t);r&&(r.delete(o),r.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,iC)))}_delegateEventHandler=e=>{let t=gt(e);t&&this._events.get(e.type)?.forEach((o,i)=>{(i===t||i.contains(t))&&o.forEach(r=>r.handleEvent(e))})}},Qr={enterDuration:225,exitDuration:150},Lx=800,rC=Ti({passive:!0,capture:!0}),sC=["mousedown","touchstart"],aC=["mouseup","mouseleave","touchend","touchcancel"],Bx=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=S({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(o,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),Rd=class n{_target;_ngZone;_platform;_containerElement;_triggerElement=null;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple=null;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect=null;static _eventManager=new Cp;constructor(e,t,o,i,r){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Qn(o)),r&&r.get(Kn).load(Bx)}fadeInRipple(e,t,o={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=g(g({},Qr),o.animation);o.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let s=o.radius||Vx(e,t,i),a=e-i.left,d=t-i.top,c=r.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=`${a-s}px`,l.style.top=`${d-s}px`,l.style.height=`${s*2}px`,l.style.width=`${s*2}px`,o.color!=null&&(l.style.backgroundColor=o.color),l.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(l);let u=window.getComputedStyle(l),h=u.transitionProperty,p=u.transitionDuration,v=h==="none"||p==="0s"||p==="0s, 0s"||i.width===0&&i.height===0,E=new _p(this,l,o,v);l.style.transform="scale3d(1, 1, 1)",E.state=Ot.FADING_IN,o.persistent||(this._mostRecentTransientRipple=E);let k=null;return!v&&(c||r.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let P=()=>{k&&(k.fallbackTimer=null),clearTimeout(be),this._finishRippleTransition(E)},Ie=()=>this._destroyRipple(E),be=setTimeout(Ie,c+100);l.addEventListener("transitionend",P),l.addEventListener("transitioncancel",Ie),k={onTransitionEnd:P,onTransitionCancel:Ie,fallbackTimer:be}}),this._activeRipples.set(E,k),(v||!c)&&this._finishRippleTransition(E),E}fadeOutRipple(e){if(e.state===Ot.FADING_OUT||e.state===Ot.HIDDEN)return;let t=e.element,o=g(g({},Qr),e.config.animation);t.style.transitionDuration=`${o.exitDuration}ms`,t.style.opacity="0",e.state=Ot.FADING_OUT,(e._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Qn(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,sC.forEach(o=>{n._eventManager.addHandler(this._ngZone,o,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{aC.forEach(t=>{this._triggerElement.addEventListener(t,this,rC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ot.FADING_IN?this._startFadeOutTransition(e):e.state===Ot.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:o}=e.config;e.state=Ot.VISIBLE,!o&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ot.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Wr(e),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Lx;!this._target.rippleDisabled&&!t&&!o&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!qr(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let o=0;o<t.length;o++)this.fadeInRipple(t[o].clientX,t[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Ot.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ot.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(sC.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(aC.forEach(t=>e.removeEventListener(t,this,rC)),this._pointerUpEventsRegistered=!1))}};function Vx(n,e,t){let o=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(o*o+i*i)}var dC=new N("mat-ripple-global-options");var jx={capture:!0},Hx=["focus","mousedown","mouseenter","touchstart"],Dp="mat-ripple-loader-uninitialized",wp="mat-ripple-loader-class-name",cC="mat-ripple-loader-centered",Od="mat-ripple-loader-disabled",lC=(()=>{class n{_document=f(J);_animationsDisabled=Bo();_globalRippleOptions=f(dC,{optional:!0});_platform=f(mt);_ngZone=f(q);_injector=f(he);_eventCleanups;_hosts=new Map;constructor(){let t=f(ot).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Hx.map(o=>t.listen(this._document,o,this._onInteraction,jx)))}ngOnDestroy(){let t=this._hosts.keys();for(let o of t)this.destroyRipple(o);this._eventCleanups.forEach(o=>o())}configureRipple(t,o){t.setAttribute(Dp,this._globalRippleOptions?.namespace??""),(o.className||!t.hasAttribute(wp))&&t.setAttribute(wp,o.className||""),o.centered&&t.setAttribute(cC,""),o.disabled&&t.setAttribute(Od,"")}setDisabled(t,o){let i=this._hosts.get(t);i?(i.target.rippleDisabled=o,!o&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):o?t.setAttribute(Od,""):t.removeAttribute(Od)}_onInteraction=t=>{let o=gt(t);if(o instanceof HTMLElement){let i=o.closest(`[${Dp}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",t.getAttribute(wp)),t.append(o);let i=this._globalRippleOptions,r=this._animationsDisabled?0:i?.animation?.enterDuration??Qr.enterDuration,s=this._animationsDisabled?0:i?.animation?.exitDuration??Qr.exitDuration,a={rippleDisabled:this._animationsDisabled||i?.disabled||t.hasAttribute(Od),rippleConfig:{centered:t.hasAttribute(cC),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:r,exitDuration:s}}},d=new Rd(a,this._ngZone,o,this._platform,this._injector),c=!a.rippleDisabled;c&&d.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:d,hasSetUpEvents:c}),t.removeAttribute(Dp)}destroyRipple(t){let o=this._hosts.get(t);o&&(o.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var uC=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=S({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(o,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus-visible::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var zx=new N("MAT_BUTTON_CONFIG");function fC(n){return n==null?void 0:T_(n)}var pC=(()=>{class n{_elementRef=f(Y);_ngZone=f(q);_animationsDisabled=Bo();_config=f(zx,{optional:!0});_focusMonitor=f(gp);_cleanupClick;_renderer=f(ft);_rippleLoader=f(lC);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){f(Kn).load(uC);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",o){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,o):this._elementRef.nativeElement.focus(o)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(o,i){o&2&&(se("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),Se(i.color?"mat-"+i.color:""),ee("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Pn],disabled:[2,"disabled","disabled",Pn],ariaDisabled:[2,"aria-disabled","ariaDisabled",Pn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Pn],tabIndex:[2,"tabIndex","tabIndex",fC],_tabindex:[2,"tabindex","_tabindex",fC]}})}return n})();var Ux=new N("cdk-dir-doc",{providedIn:"root",factory:()=>f(J)}),$x=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Gx(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?$x.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var hC=(()=>{class n{get value(){return this.valueSignal()}valueSignal=F("ltr");change=new re;constructor(){let t=f(Ux,{optional:!0});if(t){let o=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(Gx(o||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wx=["matButton",""],qx=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Zx=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var gC=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),mC=(()=>{class n extends pC{get appearance(){return this._appearance}set appearance(t){this.setAppearance(t||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let t=Yx(this._elementRef.nativeElement);t&&this.setAppearance(t)}setAppearance(t){if(t===this._appearance)return;let o=this._elementRef.nativeElement.classList,i=this._appearance?gC.get(this._appearance):null,r=gC.get(t);i&&o.remove(...i),o.add(...r),this._appearance=t}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=S({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[le],attrs:Wx,ngContentSelectors:Zx,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(o,i){o&1&&(ae(qx),ke(0,"span",0),K(1),G(2,"span",1),K(3,1),U(),K(4,2),ke(5,"span",2)(6,"span",3)),o&2&&ee("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus-visible>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus-visible>.mat-focus-indicator::before,.mat-mdc-raised-button:focus-visible>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus-visible>.mat-focus-indicator::before,.mat-tonal-button:focus-visible>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function Yx(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var Kr=class{_attachedHost=null;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Ni=class extends Kr{component;viewContainerRef;injector;projectableNodes;constructor(e,t,o,i){super(),this.component=e,this.viewContainerRef=t,this.injector=o,this.projectableNodes=i}},ki=class extends Kr{templateRef;viewContainerRef;context;injector;constructor(e,t,o,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=o,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Ep=class extends Kr{element;constructor(e){super(),this.element=e instanceof Y?e.nativeElement:e}},Pi=class{_attachedPortal=null;_disposeFn=null;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Ni)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ki)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Ep)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},Fd=class extends Pi{outletElement;_appRef;_defaultInjector;constructor(e,t,o){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=o}attachComponentPortal(e){let t;if(e.viewContainerRef){let o=e.injector||e.viewContainerRef.injector,i=o.get(Wt,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:o,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let o=this._appRef,i=e.injector||this._defaultInjector||he.NULL,r=i.get(He,o.injector);t=_d(e.component,{elementInjector:i,environmentInjector:r,projectableNodes:e.projectableNodes||void 0}),o.attachView(t.hostView),this.setDisposeFn(()=>{o.viewCount>0&&o.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,o=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return o.rootNodes.forEach(i=>this.outletElement.appendChild(i)),o.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(o);i!==-1&&t.remove(i)}),this._attachedPortal=e,o}attachDomPortal=e=>{let t=e.element;t.parentNode;let o=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(o,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(t,o)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Mp=(()=>{class n extends Pi{_moduleRef=f(Wt,{optional:!0});_document=f(J);_viewContainerRef=f(Tn);_isInitialized=!1;_attachedRef=null;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new re;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let o=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,i=o.createComponent(t.component,{index:o.length,injector:t.injector||o.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return o!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);let o=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachDomPortal=t=>{let o=t.element;o.parentNode;let i=this._document.createComment("dom-portal");t.setAttachedHost(this),o.parentNode.insertBefore(i,o),this._getRootNode().appendChild(o),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(o,i)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[le]})}return n})();var Ld=class{enable(){}disable(){}attach(){}};var Ai=class{positionStrategy;scrollStrategy=new Ld;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;usePopover;eventPredicate;constructor(e){if(e){let t=Object.keys(e);for(let o of t)e[o]!==void 0&&(this[o]=e[o])}}};var bC=(()=>{class n{_attachedOverlays=[];_document=f(J);_isAttached=!1;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let o=this._attachedOverlays.indexOf(t);o>-1&&this._attachedOverlays.splice(o,1),this._attachedOverlays.length===0&&this.detach()}canReceiveEvent(t,o,i){return i.observers.length<1?!1:t.eventPredicate?t.eventPredicate(o):!0}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_C=(()=>{class n extends bC{_ngZone=f(q);_renderer=f(ot).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let o=this._attachedOverlays;for(let i=o.length-1;i>-1;i--){let r=o[i];if(this.canReceiveEvent(r,t,r._keydownEvents)){this._ngZone.run(()=>r._keydownEvents.next(t));break}}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CC=(()=>{class n extends bC{_platform=f(mt);_ngZone=f(q);_renderer=f(ot).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget=null;_cleanups;add(t){if(super.add(t),!this._isAttached){let o=this._document.body,i={capture:!0},r=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[r.listen(o,"pointerdown",this._pointerDownListener,i),r.listen(o,"click",this._clickListener,i),r.listen(o,"auxclick",this._clickListener,i),r.listen(o,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=gt(t)};_clickListener=t=>{let o=gt(t),i=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let r=this._attachedOverlays.slice();for(let s=r.length-1;s>-1;s--){let a=r[s],d=a._outsidePointerEvents;if(!(!a.hasAttached()||!this.canReceiveEvent(a,t,d))){if(vC(a.overlayElement,o)||vC(a.overlayElement,i))break;this._ngZone?this._ngZone.run(()=>d.next(t)):d.next(t)}}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vC(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,o=e;for(;o;){if(o===n)return!0;o=t&&o instanceof ShadowRoot?o.host:o.parentNode}return!1}var DC=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=S({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(o,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}.cdk-overlay-popover{background:none;border:none;padding:0;outline:0;overflow:visible;position:fixed;pointer-events:none;white-space:normal;color:inherit;text-decoration:none;width:100%;height:100%;inset:auto;top:0;left:0}.cdk-overlay-popover::backdrop{display:none}.cdk-overlay-popover .cdk-overlay-backdrop{position:fixed;z-index:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Qx=(()=>{class n{_platform=f(mt);_containerElement;_document=f(J);_styleLoader=f(Kn);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||bp()){let i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let r=0;r<i.length;r++)i[r].remove()}let o=this._document.createElement("div");o.classList.add(t),bp()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}_loadStyles(){this._styleLoader.load(DC)}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sp=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,o,i){this._renderer=t,this._ngZone=o,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}};function wC(n){return n&&n.nodeType===1}var Bd=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ie;_attachments=new ie;_detachments=new ie;_positionStrategy;_scrollStrategy;_locationChanges=xe.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_disposed=!1;_previousHostParent;_keydownEvents=new ie;_outsidePointerEvents=new ie;_afterNextRenderRef;constructor(e,t,o,i,r,s,a,d,c,l=!1,u,h){this._portalOutlet=e,this._host=t,this._pane=o,this._config=i,this._ngZone=r,this._keyboardDispatcher=s,this._document=a,this._location=d,this._outsideClickDispatcher=c,this._animationsDisabled=l,this._injector=u,this._renderer=h,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}get eventPredicate(){return this._config?.eventPredicate||null}attach(e){if(this._disposed)return null;this._attachHost();let t=this._portalOutlet.attach(e);return this._positionStrategy?.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=dn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){if(this._disposed)return;let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent(),this._disposed=!0}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=g(g({},this._config),e),this._updateElementSize()}setDirection(e){this._config=y(g({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Vo(this._config.width),e.height=Vo(this._config.height),e.minWidth=Vo(this._config.minWidth),e.minHeight=Vo(this._config.minHeight),e.maxWidth=Vo(this._config.maxWidth),e.maxHeight=Vo(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachHost(){if(!this._host.parentElement){let e=this._config.usePopover?this._positionStrategy?.getPopoverInsertionPoint?.():null;wC(e)?e.after(this._host):e?.type==="parent"?e.element.appendChild(this._host):this._previousHostParent?.appendChild(this._host)}if(this._config.usePopover)try{this._host.showPopover()}catch(e){}}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new Sp(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._config.usePopover?this._host.prepend(this._backdropRef.element):this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){!this._config.usePopover&&this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,o){let i=Xr(t||[]).filter(r=>!!r);i.length&&(o?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=dn(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}};var yC="cdk-global-overlay-wrapper";function Ip(n){return new Vd}var Vd=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(yC),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:s,maxHeight:a}=o,d=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(r==="100%"||r==="100vh")&&(!a||a==="100%"||a==="100vh"),l=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",p="",v="",E="";d?E="flex-start":l==="center"?(E="center",h?v=u:p=u):h?l==="left"||l==="end"?(E="flex-end",p=u):(l==="right"||l==="start")&&(E="flex-start",v=u):l==="left"||l==="start"?(E="flex-start",p=u):(l==="right"||l==="end")&&(E="flex-end",v=u),e.position=this._cssPosition,e.marginLeft=d?"0":p,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=d?"0":v,t.justifyContent=E,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,o=t.style;t.classList.remove(yC),o.justifyContent=o.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}};var EC=new N("OVERLAY_DEFAULT_CONFIG");function xp(n,e){n.get(Kn).load(DC);let t=n.get(Qx),o=n.get(J),i=n.get(Lo),r=n.get(At),s=n.get(hC),a=n.get(ft,null,{optional:!0})||n.get(ot).createRenderer(null,null),d=new Ai(e),c=n.get(EC,null,{optional:!0})?.usePopover??!0;d.direction=d.direction||s.value,"showPopover"in o.body?d.usePopover=e?.usePopover??c:d.usePopover=!1;let l=o.createElement("div"),u=o.createElement("div");l.id=i.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),u.appendChild(l),d.usePopover&&(u.setAttribute("popover","manual"),u.classList.add("cdk-overlay-popover"));let h=d.usePopover?d.positionStrategy?.getPopoverInsertionPoint?.():null;return wC(h)?h.after(u):h?.type==="parent"?h.element.appendChild(u):t.getContainerElement().appendChild(u),new Bd(new Fd(l,r,n),u,l,d,n.get(q),n.get(_C),o,n.get(wd),n.get(CC),e?.disableAnimations??n.get(Nr,null,{optional:!0})==="NoopAnimations",n.get(He),a)}function Jx(n,e){if(n&1){let t=ht();w(0,"div",1)(1,"button",2),x("click",function(){_e(t);let i=T();return Ce(i.action())}),V(2),D()()}if(n&2){let t=T();b(2),un(" ",t.data.action," ")}}var eT=["label"];function tT(n,e){}var nT=Math.pow(2,31)-1,Jr=class{_overlayRef;instance;containerInstance;_afterDismissed=new ie;_afterOpened=new ie;_onAction=new ie;_durationTimeoutId;_dismissedByAction=!1;constructor(e,t){this._overlayRef=t,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,nT))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},MC=new N("MatSnackBarData"),Ri=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},oT=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),iT=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),rT=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),sT=(()=>{class n{snackBarRef=f(Jr);data=f(MC);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=S({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(o,i){o&1&&(w(0,"div",0),V(1),D(),X(2,Jx,3,1,"div",1)),o&2&&(b(),un(" ",i.data.message,`
`),b(),Q(i.hasAction?2:-1))},dependencies:[mC,oT,iT,rT],styles:[`.mat-mdc-simple-snack-bar{display:flex}.mat-mdc-simple-snack-bar .mat-mdc-snack-bar-label{max-height:50vh;overflow:auto}
`],encapsulation:2,changeDetection:0})}return n})(),Tp="_mat-snack-bar-enter",Np="_mat-snack-bar-exit",aT=(()=>{class n extends Pi{_ngZone=f(q);_elementRef=f(Y);_changeDetectorRef=f(Ii);_platform=f(mt);_animationsDisabled=Bo();snackBarConfig=f(Ri);_document=f(J);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=f(he);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new ie;_onExit=new ie;_onEnter=new ie;_animationState="void";_live;_label;_role;_liveElementId=f(Lo).getId("mat-snack-bar-container-live-");constructor(){super();let t=this.snackBarConfig;t.politeness==="assertive"&&!t.announcementMessage?this._live="assertive":t.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();let o=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),o}attachTemplatePortal(t){this._assertNotAttached();let o=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),o}attachDomPortal=t=>{this._assertNotAttached();let o=this._portalOutlet.attachDomPortal(t);return this._afterPortalAttached(),o};onAnimationEnd(t){t===Np?this._completeExit():t===Tp&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?dn(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Tp)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Tp)},200)))}exit(){return this._destroyed?ir(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?dn(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Np)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Np),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let t=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(s=>t.classList.add(s)):t.classList.add(o)),this._exposeToModals();let i=this._label.nativeElement,r="mdc-snackbar__label";i.classList.toggle(r,!i.querySelector(`.${r}`))}_exposeToModals(){let t=this._liveElementId,o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<o.length;i++){let r=o[i],s=r.getAttribute("aria-owns");this._trackedModals.add(r),s?s.indexOf(t)===-1&&r.setAttribute("aria-owns",s+" "+t):r.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{let o=t.getAttribute("aria-owns");if(o){let i=o.replace(this._liveElementId,"").trim();i.length>0?t.setAttribute("aria-owns",i):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let t=this._elementRef.nativeElement,o=t.querySelector("[aria-hidden]"),i=t.querySelector("[aria-live]");if(o&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&o.contains(document.activeElement)&&(r=document.activeElement),o.removeAttribute("aria-hidden"),i.appendChild(o),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=S({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(o,i){if(o&1&&dd(Mp,7)(eT,7),o&2){let r;cd(r=ld())&&(i._portalOutlet=r.first),cd(r=ld())&&(i._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(o,i){o&1&&x("animationend",function(s){return i.onAnimationEnd(s.animationName)})("animationcancel",function(s){return i.onAnimationEnd(s.animationName)}),o&2&&ee("mat-snack-bar-container-enter",i._animationState==="visible")("mat-snack-bar-container-exit",i._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!i._animationsDisabled)},features:[le],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(o,i){o&1&&(w(0,"div",1)(1,"div",2,0)(3,"div",3),cn(4,tT,0,0,"ng-template",4),D(),A(5,"div"),D()()),o&2&&(b(5),se("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[Mp],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return n})(),dT=new N("mat-snack-bar-default-options",{providedIn:"root",factory:()=>new Ri}),jd=(()=>{class n{_live=f(vp);_injector=f(he);_breakpointObserver=f(mp);_parentSnackBar=f(n,{optional:!0,skipSelf:!0});_defaultConfig=f(dT);_animationsDisabled=Bo();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=sT;snackBarContainerComponent=aT;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(){}openFromComponent(t,o){return this._attach(t,o)}openFromTemplate(t,o){return this._attach(t,o)}open(t,o="",i){let r=g(g({},this._defaultConfig),i);return r.data={message:t,action:o},r.announcementMessage===t&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,o){let i=o&&o.viewContainerRef&&o.viewContainerRef.injector,r=he.create({parent:i||this._injector,providers:[{provide:Ri,useValue:o}]}),s=new Ni(this.snackBarContainerComponent,o.viewContainerRef,r),a=t.attach(s);return a.instance.snackBarConfig=o,a.instance}_attach(t,o){let i=g(g(g({},new Ri),this._defaultConfig),o),r=this._createOverlay(i),s=this._attachSnackBarContainer(r,i),a=new Jr(s,r);if(t instanceof sn){let d=new ki(t,null,{$implicit:i.data,snackBarRef:a});a.instance=s.attachTemplatePortal(d)}else{let d=this._createInjector(i,a),c=new Ni(t,void 0,d),l=s.attachComponentPortal(c);a.instance=l.instance}return this._breakpointObserver.observe(nC.HandsetPortrait).pipe(lo(r.detachments())).subscribe(d=>{r.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),i.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(a,i),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,o){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),o.duration&&o.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(o.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter()}_createOverlay(t){let o=new Ai;o.direction=t.direction;let i=Ip(this._injector),r=t.direction==="rtl",s=t.horizontalPosition==="left"||t.horizontalPosition==="start"&&!r||t.horizontalPosition==="end"&&r,a=!s&&t.horizontalPosition!=="center";return s?i.left("0"):a?i.right("0"):i.centerHorizontally(),t.verticalPosition==="top"?i.top("0"):i.bottom("0"),o.positionStrategy=i,o.disableAnimations=this._animationsDisabled,xp(this._injector,o)}_createInjector(t,o){let i=t&&t.viewContainerRef&&t.viewContainerRef.injector;return he.create({parent:i||this._injector,providers:[{provide:Jr,useValue:o},{provide:MC,useValue:t.data}]})}static \u0275fac=function(o){return new(o||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qC=["backgroundPattern"];function cT(n,e){if(n&1&&(Re(),ke(0,"line")),n&2){let t=e.$implicit;se("x1",t.x1)("y1",t.y1)("x2",t.x2)("y2",t.y2)("stroke",t.major?"var(--ngd-background-line-major-color)":"var(--ngd-background-line-minor-color)")("stroke-width",t.major?"var(--ngd-background-line-major-width)":"var(--ngd-background-line-minor-width)")("opacity",t.major?"var(--ngd-background-line-major-opacity)":"var(--ngd-background-line-minor-opacity)")}}var Lg=["contentProjection"],et=["*"];function lT(n,e){n&1&&A(0,"ng-diagram-dotted-background")}function uT(n,e){n&1&&A(0,"ng-diagram-grid-background")}function fT(n,e){if(n&1&&(w(0,"div"),X(1,lT,1,0,"ng-diagram-dotted-background")(2,uT,1,0,"ng-diagram-grid-background"),D()),n&2){let t=T();b(),Q(t.isDottedBackground()?1:2)}}function pT(n,e){if(n&1&&ke(0,"div"),n&2){T();let t=gd(0);$e("left",t.x,"px")("top",t.y,"px")("width",t.width,"px")("height",t.height,"px")}}var hT=[[["ng-diagram-edge"]],[["ng-diagram-marker-arrow"]],[["ng-diagram-node"]]],gT=["ng-diagram-edge","ng-diagram-marker-arrow","ng-diagram-node"];function mT(n,e){if(n&1&&(Re(),A(0,"defs",0)),n&2){let t=T();I("sourceMarkerId",t.sourceMarkerId())("targetMarkerId",t.targetMarkerId())("edgeId",t.edge().id)}}function vT(n,e){if(n&1&&(w(0,"ng-diagram-base-edge-label",1)(1,"ng-diagram-default-edge-label"),V(2),D()()),n&2){T();let t=gd(1);I("id","edge-label")("positionOnEdge",.5),b(2),we(t)}}function yT(n,e){if(n&1&&A(0,"ng-diagram-resize-line",0),n&2){let t=e.$implicit,o=T(2);I("position",t)("targetData",o.nodeData())}}function bT(n,e){if(n&1&&A(0,"ng-diagram-resize-handle",0),n&2){let t=e.$implicit,o=T(2);I("position",t)("targetData",o.nodeData())}}function _T(n,e){if(n&1&&(Xe(0,yT,1,2,"ng-diagram-resize-line",0,ad),Xe(2,bT,1,2,"ng-diagram-resize-handle",0,ad)),n&2){let t=T();Qe(t.linePositions),b(2),Qe(t.handlePositions)}}function CT(n,e){n&1&&(Re(),G(0,"svg",2),ke(1,"path",3),U())}function DT(n,e){if(n&1&&(w(0,"ng-diagram-rotate-handle",0),K(1),D()),n&2){let t=T();I("data",t.nodeData())}}var wT=[[["ng-diagram-background"]]],ET=["ng-diagram-background"],MT=n=>({edge:n}),ST=n=>({node:n}),IT=(n,e)=>e.id;function xT(n,e){n&1&&Yn(0)}function TT(n,e){if(n&1&&cn(0,xT,1,0,"ng-container",4),n&2){let t=T().$implicit,o=T();I("ngComponentOutlet",o.getEdgeTemplate(t.type))("ngComponentOutletInputs",Si(2,MT,t))}}function NT(n,e){if(n&1&&A(0,"ng-diagram-default-edge",3),n&2){let t=T().$implicit;I("edge",t)}}function kT(n,e){if(n&1&&(w(0,"ng-diagram-edge"),X(1,TT,1,4,"ng-container")(2,NT,1,1,"ng-diagram-default-edge",3),D()),n&2){let t=e.$implicit,o=T();se("data-edge-id",t.id),b(),Q(o.getEdgeTemplate(t.type)?1:2)}}function PT(n,e){n&1&&Yn(0)}function AT(n,e){if(n&1&&cn(0,PT,1,0,"ng-container",4),n&2){let t=T().$implicit,o=T();I("ngComponentOutlet",o.getNodeTemplate(t.type))("ngComponentOutletInputs",Si(2,ST,t))}}function RT(n,e){if(n&1&&A(0,"ng-diagram-default-group-template",5),n&2){let t=T().$implicit,o=T();I("node",o.castToGroupNode(t))}}function OT(n,e){if(n&1&&A(0,"ng-diagram-default-node-template",5),n&2){let t=T().$implicit;I("node",t)}}function FT(n,e){if(n&1&&(w(0,"ng-diagram-node",2),X(1,AT,1,4,"ng-container")(2,RT,1,1,"ng-diagram-default-group-template",5)(3,OT,1,1,"ng-diagram-default-node-template",5),D()),n&2){let t=e.$implicit,o=T();I("node",t),se("data-node-id",t.id),b(),Q(o.getNodeTemplate(t.type)?1:o.isGroup(t)?2:3)}}function LT(n,e){n&1&&A(0,"ng-diagram-watermark")}var BT=["ng-diagram-default-minimap-node",""];function VT(n,e){if(n&1&&(Re(),ke(0,"circle")),n&2){let t=T();se("cx",t.cx())("cy",t.cy())("r",t.radius())}}function jT(n,e){if(n&1&&(Re(),ke(0,"ellipse")),n&2){let t=T();se("cx",t.cx())("cy",t.cy())("rx",t.rx())("ry",t.ry())}}function HT(n,e){if(n&1&&(Re(),ke(0,"rect")),n&2){let t=T();se("x",t.bounds().x)("y",t.bounds().y)("width",t.bounds().width)("height",t.bounds().height)}}var zT=["ng-diagram-minimap-diagram-bounds",""],UT=(n,e)=>({node:n,nodeStyle:e}),$T=(n,e)=>e.bounds.id;function GT(n,e){n&1&&Yn(0)}function WT(n,e){if(n&1&&(Re(),w(0,"foreignObject"),cn(1,GT,1,0,"ng-container",6),D()),n&2){let t=T().$implicit;se("x",t.bounds.x)("y",t.bounds.y)("width",t.bounds.width)("height",t.bounds.height)("transform",t.bounds.transform),b(),I("ngComponentOutlet",t.template)("ngComponentOutletInputs",Yf(7,UT,t.diagramNode,t.nodeStyle))}}function qT(n,e){if(n&1&&(Re(),A(0,"g",5)),n&2){let t=T().$implicit;I("bounds",t.bounds)("nodeStyle",t.nodeStyle)}}function ZT(n,e){if(n&1&&X(0,WT,2,10,":svg:foreignObject")(1,qT,1,2,":svg:g",5),n&2){let t=e.$implicit;Q(t.template?0:1)}}function YT(n,e){if(n&1&&(Re(),A(0,"rect",3)),n&2){let t=T(2);I("diagramBounds",t.diagramBounds())("minimapTransform",t.transform())}}function XT(n,e){if(n&1&&(Re(),A(0,"rect",4)),n&2){let t=T(2);se("x",t.viewportRect().x)("y",t.viewportRect().y)("width",t.viewportRect().width)("height",t.viewportRect().height)}}function QT(n,e){if(n&1&&(Re(),w(0,"g"),Xe(1,ZT,2,1,null,null,$T),D(),X(3,YT,1,2,":svg:rect",3),X(4,XT,1,4,":svg:rect",4)),n&2){let t=T();se("transform",t.nodesGroupTransform()),b(),Qe(t.minimapNodes()),b(2),Q(t.showDiagramBounds()?3:-1),b(),Q(t.hasValidViewport()?4:-1)}}function KT(n,e){n&1&&A(0,"ng-diagram-zoom-controls")}var JT=["preview"];function eN(n,e){if(n&1&&(G(0,"div"),K(1),U()),n&2){let t=T();$e("transform",t.isSafari?null:t.scaleTransform),ee("dragged-node",!t.isSafari)}}var ns=class n{boundingBox=F(null);static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})};Set.prototype.difference||(Set.prototype.difference=function(n){let e=new Set;for(let t of this)n.has(t)||e.add(t);return e}),Set.prototype.intersection||(Set.prototype.intersection=function(n){let e=new Set;for(let t of this)n.has(t)&&e.add(t);return e});var Rp=class{eventManager;state;constructor(e){this.eventManager=e,this.state=new Proxy({},{set:(t,o,i)=>(t[o]=i,this.emitStateChanged(),!0)})}getState(){return this.state}emitStateChanged(){this.eventManager.emit("actionStateChanged",{actionState:g({},this.state)})}get resize(){return this.state.resize}set resize(e){this.state.resize=e}get linking(){return this.state.linking}set linking(e){this.state.linking=e}get copyPaste(){return this.state.copyPaste}set copyPaste(e){this.state.copyPaste=e}get highlightGroup(){return this.state.highlightGroup}set highlightGroup(e){this.state.highlightGroup=e}get rotation(){return this.state.rotation}set rotation(e){this.state.rotation=e}get dragging(){return this.state.dragging}set dragging(e){this.state.dragging=e}get panning(){return this.state.panning}set panning(e){this.state.panning=e}clearResize(){this.state.resize=void 0}clearLinking(){this.state.linking=void 0}clearCopyPaste(){this.state.copyPaste=void 0}clearHighlightGroup(){this.state.highlightGroup=void 0}clearRotation(){this.state.rotation=void 0}clearDragging(){this.state.dragging=void 0}isResizing(){return!!this.state.resize}isLinking(){return!!this.state.linking}isRotating(){return!!this.state.rotation}isDragging(){return!!this.state.dragging}clearPanning(){this.state.panning=void 0}isPanning(){return!!this.state.panning?.active}},tN=n=>{if(!n||n.length===0)return"";if(n.length===1)return`M ${n[0].x},${n[0].y}`;if(n.length===2)return`M ${n[0].x},${n[0].y} L ${n[1].x},${n[1].y}`;if(n.length===3)return`M ${n[0].x},${n[0].y} Q ${n[1].x},${n[1].y} ${n[2].x},${n[2].y}`;if(n.length===4)return`M ${n[0].x},${n[0].y} C ${n[1].x},${n[1].y} ${n[2].x},${n[2].y} ${n[3].x},${n[3].y}`;let e=[`M ${n[0].x},${n[0].y}`];for(let t=1;t<n.length;t++)e.push(`L ${n[t].x},${n[t].y}`);return e.join(" ")};function nN(n,e){return Math.atan2(e.y-n.y,e.x-n.x)*(180/Math.PI)}var Bg=n=>(n%360+360)%360,oN=(n,e=!1)=>{let t=Bg(n),o;return o=t>=315||t<45?"right":t>=45&&t<135?"bottom":t>=135&&t<225?"left":"top",e?{right:"left",left:"right",top:"bottom",bottom:"top"}[o]:o},Oi=({min:n,value:e,max:t})=>Math.min(Math.max(e,n),t),iN=(n,e,t,o)=>{let{x:i,y:r,width:s,height:a}=n,{x:d,y:c}=e,l=0,u=0,h=d-i,p=i+s-d,v=c-r,E=r+a-c;if(h<t?l=Oi({min:0,max:t,value:-(h-t)}):p<t&&(l=-Oi({min:0,max:t,value:-(p-t)})),v<t?u=Oi({min:0,max:t,value:-(v-t)}):E<t&&(u=-Oi({min:0,max:t,value:-(E-t)})),l===0&&u===0)return null;let k=l/t,P=u/t;return k=isFinite(k)?k:1,P=isFinite(P)?P:1,{x:k*o,y:P*o}},rN=(n,e)=>Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2);function SC(n){return Math.abs(n-Math.trunc(n))}function sN(n,e){let t=Math.round(n/e);if(t===0&&e>1)return 0;let o=Math.abs(t)===1&&Math.abs(n)<e,i=Oi({min:1,max:e/2-1,value:Math.floor(e/2-1)});if(o&&e-Math.abs(n)>i)return 0;let r=t*e;if(e===1){let s=(r-1)%90==0;(r+1)%90==0?1-SC(n)<.9001&&(r+=1):s&&SC(n)<.9001&&(r-=1)}return Bg(r)}var Op=(n,e)=>e?e*Math.round(n/e):n,aN=(n,e)=>({x:Op(n.x,e.width),y:Op(n.y,e.height)}),Ve={angleBetweenPoints:nN,angleToSide:oN,clamp:Oi,distanceBetweenPoints:rN,normalizeAngle:Bg,snapAngle:sN,snapNumber:Op,snapPoint:aN,calculateEdgePanningForce:iN},dN=(n,e)=>{if(n.length<2)return n[0]||{x:0,y:0};let t=Ve.clamp({min:0,value:e,max:1});if(n.length===2){let[h,p]=n;return{x:h.x+(p.x-h.x)*t,y:h.y+(p.y-h.y)*t}}if(n.length===3){let[h,p,v]=n,E=1-t,k=E*E,P=t*t;return{x:k*h.x+2*E*t*p.x+P*v.x,y:k*h.y+2*E*t*p.y+P*v.y}}let[o,i,r,s]=n,a=1-t,d=a*a,c=d*a,l=t*t,u=l*t;return{x:c*o.x+3*d*t*i.x+3*a*l*r.x+u*s.x,y:c*o.y+3*d*t*i.y+3*a*l*r.y+u*s.y}},IC=(n,e)=>{switch(n.side){case"right":default:return{x:n.x+e,y:n.y};case"left":return{x:n.x-e,y:n.y};case"bottom":return{x:n.x,y:n.y+e};case"top":return{x:n.x,y:n.y-e}}},cN=(n,e,t=100)=>{if(!n||!e)return[];let o=IC(n,Math.abs(t)),i=IC(e,Math.abs(t));return[{x:n.x,y:n.y},o,i,{x:e.x,y:e.y}]};var Fp=class{name="bezier";computePoints(e,t){let{sourcePoint:o,targetPoint:i}=e;return cN(o,i,t?.bezier?.bezierControlOffset??100)}computeSvgPath(e){return tN(e)}computePointOnPath(e,t){return dN(e,t)}},lN=(n=[],e=16)=>{if(n.length===0)return"";if(n.length===1)return`M ${n[0].x},${n[0].y}`;if(n.length===2)return`M ${n[0].x},${n[0].y} L ${n[1].x},${n[1].y}`;let t=n[0],o=n.slice(1,-1),i=n[n.length-1],r=o.map((s,a)=>{let d=n[a],c=n[a+2],l=c.y-d.y,u=Math.min(Math.abs(c.x-d.x)/2,Math.abs(l)/2,e),h=d.x<s.x,p=d.x>s.x,v=d.y>s.y,E=d.y<s.y,k=c.x<s.x,P=c.x>s.x,Ie=c.y>s.y,be=c.y<s.y,Ft=Math.abs(d.x-s.x)<=1,Yt=Math.abs(d.y-s.y)<=1,Fn=Math.abs(c.x-s.x)<=1,wt=Math.abs(c.y-s.y)<=1;if(o.length<=2&&(Ft&&Yt||Fn&&wt))return"";if(d.y===s.y&&s.y===c.y)return`L${s.x+(p?u:-u)},${s.y}`;if(d.x===s.x&&s.x===c.x)return`L${s.x},${s.y+(E?-u:u)}`;let mn=h&&Ie||p&&be||E&&k||v&&P;return d.x===s.x?`L${s.x},${s.y+(E?-u:u)} A${u},${u},0,0,${mn?1:0},${s.x+(P?u:-u)},${s.y}`:`L${s.x+(p?u:-u)},${s.y} A${u},${u},0,0,${mn?1:0},${s.x},${s.y+(be?-u:u)}`});return`M ${t.x},${t.y} ${r.join(" ")} L ${i.x},${i.y}`},uN=(n,e)=>{if(n.length<2)return{x:0,y:0};let t=Ve.clamp({min:0,value:e,max:1}),o=[],i=0;for(let a=0;a<n.length-1;a++){let d=Math.hypot(n[a+1].x-n[a].x,n[a+1].y-n[a].y);o.push(d),i+=d}let r=i*t,s=0;for(let a=0;a<o.length;a++){let d=o[a];if(s+d>=r){let c=n[a],l=n[a+1],u=(r-s)/d;return{x:c.x+(l.x-c.x)*u,y:c.y+(l.y-c.y)*u}}s+=d}return n[n.length-1]},Jn=(n,e,t=20)=>{let o={left:{x:-t,y:0},right:{x:t,y:0},top:{x:0,y:-t},bottom:{x:0,y:t}}[e]||{x:0,y:0};return{x:n.x+o.x,y:n.y+o.y}},fN=(n,e,t,o,i=20)=>{let r=Jn({x:e.x,y:e.y},"bottom",i),s=Jn({x:t.x,y:t.y},n,i);return n==="bottom"?r.y>s.y?[{x:r.x,y:r.y},{x:s.x,y:r.y}]:[{x:r.x,y:s.y},{x:s.x,y:s.y}]:n==="left"?r.y>s.y?r.x>s.x?[{x:r.x,y:r.y},{x:s.x,y:r.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:o.x,y:r.y},{x:o.x,y:s.y}]:r.x>s.x?[{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:[{x:r.x,y:s.y}]:n==="top"?r.y>s.y?[{x:r.x,y:r.y},{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:[{x:r.x,y:o.y},{x:s.x,y:o.y}]:n==="right"?r.y>s.y?r.x>s.x?[{x:r.x,y:r.y},{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:s.x,y:r.y},{x:s.x,y:s.y}]:r.x>s.x?[{x:r.x,y:s.y}]:[{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:void 0},ZC=(n,e,t,o,i=20)=>{let r=Jn({x:e.x,y:e.y},"left",i),s=Jn({x:t.x,y:t.y},n,i);return n==="left"?r.x>s.x?[{x:s.x,y:r.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:r.x,y:s.y}]:n==="top"?r.x>s.x?r.y>s.y?[{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:[{x:s.x,y:r.y}]:r.y>s.y?[{x:r.x,y:r.y},{x:r.x,y:s.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:r.x,y:o.y},{x:s.x,y:o.y}]:n==="bottom"?r.x>s.x?r.y>s.y?[{x:r.x,y:r.y},{x:s.x,y:r.y}]:[{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:r.y>s.y?[{x:r.x,y:r.y},{x:r.x,y:o.y},{x:s.x,y:o.y}]:[{x:r.x,y:r.y},{x:r.x,y:s.y},{x:s.x,y:s.y}]:n==="right"?r.x>s.x?[{x:o.x,y:r.y},{x:o.x,y:s.y}]:[{x:r.x,y:r.y},{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:void 0},pN=(n,e,t,o,i=20)=>{let r=Jn({x:e.x,y:e.y},"right",i),s=Jn({x:t.x,y:t.y},n,i);return n==="right"?r.x>s.x?[{x:r.x,y:r.y},{x:r.x,y:s.y}]:[{x:s.x,y:r.y},{x:s.x,y:s.y}]:n==="top"?r.x<s.x?r.y<s.y?[{x:s.x,y:r.y}]:[{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:r.y<s.y?[{x:r.x,y:r.y},{x:r.x,y:o.y},{x:s.x,y:o.y}]:[{x:r.x,y:r.y},{x:r.x,y:s.y},{x:s.x,y:s.y}]:n==="bottom"?r.x<s.x?r.y<s.y?[{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:[{x:s.x,y:r.y}]:r.y<s.y?[{x:r.x,y:r.y},{x:r.x,y:s.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:r.x,y:o.y},{x:s.x,y:o.y}]:n==="left"?r.x<s.x?[{x:o.x,y:r.y},{x:o.x,y:s.y}]:[{x:r.x,y:r.y},{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:void 0},hN=(n,e,t,o,i=20)=>{let r=Jn(e,"top",i),s=Jn(t,n,i);return n==="left"?r.y>s.y?r.x>s.x?[{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:[{x:r.x,y:s.y}]:r.x>s.x?[{x:r.x,y:r.y},{x:s.x,y:r.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:o.x,y:r.y},{x:o.x,y:s.y}]:n==="right"?r.y>s.y?r.x>s.x?[{x:r.x,y:s.y}]:[{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:r.x>s.x?[{x:r.x,y:r.y},{x:o.x,y:r.y},{x:o.x,y:s.y}]:[{x:r.x,y:r.y},{x:s.x,y:r.y},{x:s.x,y:s.y}]:n==="bottom"?r.y>s.y?[{x:r.x,y:o.y},{x:s.x,y:o.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:o.x,y:r.y},{x:o.x,y:s.y},{x:s.x,y:s.y}]:n==="top"?r.y>s.y?[{x:r.x,y:s.y},{x:s.x,y:s.y}]:[{x:r.x,y:r.y},{x:s.x,y:r.y}]:void 0},gN={top:hN,right:pN,bottom:fN,left:ZC},mN=(n,e,t,o=20)=>(gN[n.side]||ZC)(e.side,{x:n.x,y:n.y},{x:e.x,y:e.y},t,o),vN=(n,e,t=20)=>{let o=mN(n,e,{x:(n?.x+e?.x)/2,y:(n.y+e.y)/2},t)||[];return[{x:n.x,y:n.y},...o,{x:e.x,y:e.y}]},Lp=class{name="orthogonal";computePoints(e,t){let{sourcePoint:o,targetPoint:i}=e,r=t?.orthogonal?.firstLastSegmentLength;return vN(o,i,r!=null&&r>=0?r:20)}computeSvgPath(e,t){let o=t?.orthogonal?.maxCornerRadius;return lN(e,o!=null&&o>=0?o:16)}computePointOnPath(e,t){return uN(e,t)}},yN=(n,e)=>{if(n.length<2)return n[0]||{x:0,y:0};let t=Ve.clamp({min:0,value:e,max:1});if(n.length===2){let a=n[0],d=n[1];return{x:a.x+(d.x-a.x)*t,y:a.y+(d.y-a.y)*t}}let o=0,i=[];for(let a=0;a<n.length-1;a++){let d=n[a+1].x-n[a].x,c=n[a+1].y-n[a].y,l=Math.sqrt(d*d+c*c);i.push(l),o+=l}let r=o*t,s=0;for(let a=0;a<i.length;a++){let d=i[a];if(s+d>=r){let c=(r-s)/d,l=n[a],u=n[a+1];return{x:l.x+(u.x-l.x)*c,y:l.y+(u.y-l.y)*c}}s+=d}return n[n.length-1]},Bp=class{name="polyline";computePoints(e){let{sourcePoint:t,targetPoint:o,edge:i}=e;return i.routingMode==="manual"&&i.points&&i.points.length>2?i.points:[{x:t.x,y:t.y},{x:o.x,y:o.y}]}computeSvgPath(e){return e.length===0?"":e.length===1?`M ${e[0].x},${e[0].y}`:e.map((t,o)=>o===0?`M ${t.x},${t.y}`:`L ${t.x},${t.y}`).join(" ")}computePointOnPath(e,t){return yN(e,t)}},bN=`[ngDiagram] Routing must have a non-empty name property. Registration skipped.

To fix this:
  \u2022 Ensure your EdgeRouting implementation has a 'name' property
  \u2022 The name should be a non-empty string

Documentation: https://www.ngdiagram.dev/docs/guides/edges/routing/
`,kp=(n,e,t)=>`[ngDiagram] Routing '${n}' is not registered. Falling back to '${t}' routing.

Available routings: ${e.join(", ")}

To fix this:
  \u2022 Register the routing using NgDiagramService.registerRouting()
  \u2022 Or use one of the available routings listed above

Documentation: https://www.ngdiagram.dev/docs/guides/edges/routing/
`,_N=(n,e)=>`[ngDiagram] Cannot set default routing to '${n}': routing not registered. Default routing unchanged.

Available routings: ${e.join(", ")}

To fix this:
  \u2022 First register the routing using NgDiagramService.registerRouting()
  \u2022 Then set it as default

Documentation: https://www.ngdiagram.dev/docs/guides/edges/routing/
`;var Vp=class{routings=new Map;defaultRouting;getRoutingConfig;constructor(e,t){this.defaultRouting=e||"orthogonal",this.getRoutingConfig=t||(()=>({})),this.registerRouting(new Lp),this.registerRouting(new Fp),this.registerRouting(new Bp)}registerRouting(e){e.name?this.routings.set(e.name,e):console.warn(bN)}unregisterRouting(e){this.routings.delete(e)}getRouting(e){return this.routings.get(e)}getRegisteredRoutings(){return Array.from(this.routings.keys())}hasRouting(e){return this.routings.has(e)}computePoints(e,t){let o=e||this.defaultRouting,i=this.routings.get(o);if(!i){let r=this.defaultRouting;if(console.warn(kp(o,this.getRegisteredRoutings(),r)),i=this.routings.get(r),!i)return[t.sourcePoint,t.targetPoint].filter(s=>!!s)}return i.computePoints(t,this.getRoutingConfig())}computePath(e,t){let o=e||this.defaultRouting,i=this.routings.get(o);if(!i){let r=this.defaultRouting;if(console.warn(kp(o,this.getRegisteredRoutings(),r)),i=this.routings.get(r),!i)return t.length===0?"":`M ${t[0].x},${t[0].y}`}return i.computeSvgPath(t,this.getRoutingConfig())}computePointOnPath(e,t,o){let i=e||this.defaultRouting,r=this.routings.get(i);if(!r){let d=this.defaultRouting;console.warn(kp(i,this.getRegisteredRoutings(),d)),r=this.routings.get(d)}if(r?.computePointOnPath)return r.computePointOnPath(t,o);if(t.length<2)return t[0]||{x:0,y:0};let s=t[0],a=t[t.length-1];return{x:s.x+(a.x-s.x)*o,y:s.y+(a.y-s.y)*o}}setDefaultRouting(e){this.routings.has(e)?this.defaultRouting=e:console.warn(_N(e,this.getRegisteredRoutings()))}getDefaultRouting(){return this.defaultRouting}},CN=(n,e,t)=>`[ngDiagram] Event listener error: Listener for "${n}" event threw an error.

Event: ${n}
Listener type: ${e}
Error: ${t instanceof Error?t.message:String(t)}

This indicates an error in your event listener callback.
Check your event listener implementation for the "${n}" event.
The diagram will continue to function, but this listener failed to execute.`,jp=class{listeners=new Map;enabled=!0;deferredEmits=[];on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);let o={callback:t,once:!1};return this.listeners.get(e).add(o),()=>this.removeListener(e,o)}once(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);let o={callback:t,once:!0};return this.listeners.get(e).add(o),()=>this.removeListener(e,o)}emit(e,t){if(!this.enabled)return;let o=this.listeners.get(e);if(!o||o.size===0)return;let i=[];for(let r of o)try{r.callback(t),r.once&&i.push(r)}catch(s){console.error(CN(String(e),r.once?"once":"on",s))}i.forEach(r=>{o.delete(r)})}deferredEmit(e,t){this.enabled&&this.deferredEmits.push({event:e,payload:t})}off(e,t){if(!t)return void this.listeners.delete(e);let o=this.listeners.get(e);if(!o)return;let i=Array.from(o).find(r=>r.callback===t);i&&o.delete(i)}offAll(){this.listeners.clear()}setEnabled(e){this.enabled=e}isEnabled(){return this.enabled}hasListeners(e){return this.listeners.has(e)&&this.listeners.get(e).size>0}flushDeferredEmits(){let e=[...this.deferredEmits];this.deferredEmits=[];for(let{event:t,payload:o}of e)this.emit(t,o)}clearDeferredEmits(){this.deferredEmits=[]}removeListener(e,t){let o=this.listeners.get(e);o&&(o.delete(t),o.size===0&&this.listeners.delete(e))}},DN=(o,i)=>M(null,[o,i],function*(n,{groupId:e,nodeIds:t}){let r=t.map(d=>n.flowCore.modelLookup.getNodeById(d)).filter(Boolean),s=n.flowCore.modelLookup.getNodeById(e);if(!s)return;let a=[];for(let d of r)n.flowCore.modelLookup.wouldCreateCircularDependency(d.id,e)||d.groupId!==e&&n.flowCore.config.grouping.canGroup(d,s)&&a.push({id:d.id,groupId:e});a.length>0&&(yield n.flowCore.commandHandler.emit("updateNodes",{nodes:a})),a.some(d=>!!d.groupId)&&n.flowCore.commandHandler.emit("highlightGroupClear")}),YC=(n,e)=>{let t=new Set(e.map(o=>o.id));return[...(n.measuredPorts??[]).filter(o=>!t.has(o.id)),...e]},XC=(n,e)=>n.map(t=>{let o=e.find(({portId:i})=>i===t.id)?.portChanges;return o?g(g({},t),o):t}),QC=(n,e)=>{let t=new Set(e);return(n??[]).filter(o=>!t.has(o.id))},wN=(n,e)=>M(null,null,function*(){let{nodes:t}=e;yield n.flowCore.applyUpdate({nodesToAdd:t},"addNodes")}),EN=(n,e)=>M(null,null,function*(){let{node:t}=e;yield n.flowCore.applyUpdate({nodesToAdd:[t]},"paletteDropNode")}),MN=(n,e)=>M(null,null,function*(){let{id:t,nodeChanges:o}=e;yield n.flowCore.applyUpdate({nodesToUpdate:[g({id:t},o)]},"updateNode")}),SN=(n,e)=>M(null,null,function*(){let{nodes:t}=e;yield n.flowCore.applyUpdate({nodesToUpdate:t},"updateNodes")}),IN=(n,e)=>M(null,null,function*(){let{edges:t}=n.flowCore.getState(),{ids:o}=e,i=new Set,r=new Set(o);t.forEach(s=>{(r.has(s.source)||r.has(s.target))&&i.add(s.id)}),yield n.flowCore.applyUpdate({nodesToRemove:Array.from(r),edgesToRemove:i.size>0?Array.from(i):[]},"deleteNodes")}),xN=n=>M(null,null,function*(){let{edges:e,nodes:t}=n.flowCore.getState();yield n.flowCore.applyUpdate({nodesToRemove:t.map(o=>o.id),edgesToRemove:e.map(o=>o.id)},"clearModel")}),TN=(n,e)=>M(null,null,function*(){let{edges:t}=e;yield n.flowCore.applyUpdate({edgesToAdd:t},"addEdges")}),NN=(n,e)=>M(null,null,function*(){let{id:t,edgeChanges:o}=e;yield n.flowCore.applyUpdate({edgesToUpdate:[g({id:t},o)]},"updateEdge")}),kN=(n,e)=>M(null,null,function*(){let{edges:t}=e;yield n.flowCore.applyUpdate({edgesToUpdate:t},"updateEdges")}),PN=(n,e)=>M(null,null,function*(){let{ids:t}=e;yield n.flowCore.applyUpdate({edgesToRemove:t},"deleteEdges")}),AN=(n,e)=>M(null,null,function*(){let{nodeId:t,ports:o}=e,i=n.flowCore.getNodeById(t);if(!i)return;let r=YC(i,o);yield n.flowCore.applyUpdate({nodesToUpdate:[{id:t,measuredPorts:r}]},"updateNode")}),RN=(n,e)=>M(null,null,function*(){let{additions:t}=e,o=[];t.forEach((i,r)=>{let s=n.flowCore.getNodeById(r);s&&o.push({id:r,measuredPorts:YC(s,i)})}),o.length!==0&&(yield n.flowCore.applyUpdate({nodesToUpdate:o},"addPortsBulk"))}),ON=(n,e)=>M(null,null,function*(){let{nodeId:t,ports:o}=e,i=n.flowCore.getNodeById(t);if(!i||!i.measuredPorts)return;let r=XC(i.measuredPorts,o);yield n.flowCore.applyUpdate({nodesToUpdate:[{id:t,measuredPorts:r}]},"updateNode")}),FN=(n,e)=>M(null,null,function*(){let{updates:t}=e,o=[];t.forEach((i,r)=>{let s=n.flowCore.getNodeById(r);s&&s.measuredPorts&&o.push({id:r,measuredPorts:XC(s.measuredPorts,i)})}),o.length!==0&&(yield n.flowCore.applyUpdate({nodesToUpdate:o},"updatePortsBulk"))}),LN=(n,e)=>M(null,null,function*(){let{nodeId:t,portIds:o}=e,i=n.flowCore.getNodeById(t);if(!i)return;let r=QC(i.measuredPorts,o);yield n.flowCore.applyUpdate({nodesToUpdate:[{id:t,measuredPorts:r}]},"updateNode")}),BN=(n,e)=>M(null,null,function*(){let{deletions:t}=e,o=[];t.forEach((i,r)=>{let s=n.flowCore.getNodeById(r);s&&o.push({id:r,measuredPorts:QC(s.measuredPorts,i)})}),o.length!==0&&(yield n.flowCore.applyUpdate({nodesToUpdate:o},"deletePortsBulk"))}),VN=(n,e)=>M(null,null,function*(){let{edgeId:t,labels:o}=e,i=n.flowCore.getEdgeById(t);if(!i)return;let r=i.points||[],s=n.flowCore.edgeRoutingManager,a=[...i.measuredLabels??[],...o.map(d=>y(g({},d),{position:s.computePointOnPath(i.routing,r,d.positionOnEdge)}))];yield n.flowCore.applyUpdate({edgesToUpdate:[{id:t,measuredLabels:a}]},"updateEdge")}),jN=(n,e)=>M(null,null,function*(){let{edgeId:t,labelUpdates:o}=e,i=n.flowCore.getEdgeById(t);if(!i)return;let r=i.points||[],s=n.flowCore.edgeRoutingManager,a=new Map;o.forEach(({labelId:c,labelChanges:l})=>{a.set(c,l)});let d=i.measuredLabels?.map(c=>{let l=a.get(c.id);if(!l){let h=s.computePointOnPath(i.routing,r,c.positionOnEdge);return y(g({},c),{position:h})}let u=s.computePointOnPath(i.routing,r,l.positionOnEdge??c.positionOnEdge);return y(g(g({},c),l),{position:u})});d&&(yield n.flowCore.applyUpdate({edgesToUpdate:[{id:t,measuredLabels:d}]},"updateEdge"))}),HN=(n,e)=>M(null,null,function*(){let{edgeId:t,labelIds:o}=e,i=n.flowCore.getEdgeById(t);if(!i)return;let r=i.measuredLabels?.filter(s=>!o.includes(s.id));yield n.flowCore.applyUpdate({edgesToUpdate:[{id:t,measuredLabels:r}]},"updateEdge")}),xC=(n,e,t)=>{if(!n)return"left";let o;if(e&&n.measuredPorts){let r=n.measuredPorts.find(s=>s.id===e);o=r?.position?{x:n.position.x+r.position.x+(r.size?.width??0)/2,y:n.position.y+r.position.y+(r.size?.height??0)/2}:{x:n.position.x+(n.size?.width??100)/2,y:n.position.y+(n.size?.height??50)/2}}else o={x:n.position.x+(n.size?.width??100)/2,y:n.position.y+(n.size?.height??50)/2};let i=Ve.angleBetweenPoints(o,t);return Ve.angleToSide(i,!0)};var KC=1e3/60;function Vg(n,e){let t=g({},n);for(let o in e)if(Object.hasOwn(e,o)){let i=e[o],r=n[o];i!==void 0&&(t[o]=typeof i!="object"||i===null||Array.isArray(i)||typeof i=="function"||typeof r!="object"||r===null||Array.isArray(r)||typeof r=="function"?i:Vg(r,i))}return t}var $d=(n,e)=>({x:n.x-e,y:n.y-e,width:2*e,height:2*e}),zd=(n,e)=>n?.x===e?.x&&n?.y===e?.y&&n?.width===e?.width&&n?.height===e?.height,We=({position:n={x:0,y:0},size:e={width:1,height:1}})=>({x:n?.x||0,y:n?.y||0,width:e?.width||1,height:e?.height||1}),JC=(n,e)=>!(n.x+n.width<=e.x||e.x+e.width<=n.x||n.y+n.height<=e.y||e.y+e.height<=n.y),zN=(n,e)=>n.x<=e.x&&n.x+n.width>=e.x+e.width&&n.y<=e.y&&n.y+n.height>=e.y+e.height,Hp=(n,e)=>{if(JC(n,e))return 0;let t=n.x+n.width,o=n.y+n.height,i=e.x+e.width,r=e.y+e.height;return t<=e.x?o<=e.y?Math.sqrt((t-e.x)**2+(o-e.y)**2):n.y>=r?Math.sqrt((t-e.x)**2+(n.y-r)**2):e.x-t:n.x>=i?o<=e.y?Math.sqrt((n.x-i)**2+(o-e.y)**2):n.y>=r?Math.sqrt((n.x-i)**2+(n.y-r)**2):n.x-i:o<=e.y?e.y-o:n.y>=r?n.y-r:1/0},fn=(n,e)=>n?.x===e?.x&&n?.y===e?.y,e0=(n,e)=>n?.width===e?.width&&n?.height===e?.height;var TC=n=>({left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height}),UN=(n,e)=>{if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!fn(n[t],e[t]))return!1;return!0},$o=n=>{if(n.length===0)return{x:0,y:0,width:0,height:0};let e=n[0].x,t=n[0].y,o=n[0].x+n[0].width,i=n[0].y+n[0].height;return n.forEach(r=>{e=Math.min(e,r.x),t=Math.min(t,r.y),o=Math.max(o,r.x+r.width),i=Math.max(i,r.y+r.height)}),{x:e,y:t,width:o-e,height:i-t}},t0=n=>{if(n.length===0)return{x:0,y:0,width:0,height:0};let e=n[0].x,t=n[0].y,o=n[0].x,i=n[0].y;return n.forEach(r=>{e=Math.min(e,r.x),t=Math.min(t,r.y),o=Math.max(o,r.x),i=Math.max(i,r.y)}),{x:e,y:t,width:o-e,height:i-t}},zp=(n,e=0)=>{let{x:t,y:o,width:i,height:r}=n,s=t+i/2,a=o+r/2,d=e*Math.PI/180,c=Math.cos(d),l=Math.sin(d);return[{x:t,y:o},{x:t+i,y:o},{x:t+i,y:o+r},{x:t,y:o+r}].map(({x:u,y:h})=>{let p=u-s,v=h-a;return{x:s+p*c-v*l,y:a+p*l+v*c}})},jg=(n,e=0)=>e===0?n:t0(zp(n,e)),Pp=(n,e,t)=>{let o=Math.cos(t),i=Math.sin(t),r=n.x-e.x,s=n.y-e.y;return{x:e.x+r*o-s*i,y:e.y+r*i+s*o}},$N=(n,e,t,o)=>{let i=(n.x-e.x)*(t.y-o.y)-(n.y-e.y)*(t.x-o.x);if(Math.abs(i)<1e-10)return null;let r=((n.x-t.x)*(t.y-o.y)-(n.y-t.y)*(t.x-o.x))/i,s=-((n.x-e.x)*(n.y-t.y)-(n.y-e.y)*(n.x-t.x))/i;return r>=0&&r<=1&&s>=0&&s<=1?{x:n.x+r*(e.x-n.x),y:n.y+r*(e.y-n.y)}:null},GN=(n,e)=>{let t=e.y-n.y,o=-(e.x-n.x),i=Math.hypot(t,o);return i===0?{x:1,y:0}:{x:t/i,y:o/i}},NC=n=>Math.abs(n.x)>=Math.abs(n.y)?n.x>=0?"right":"left":n.y>=0?"bottom":"top",WN=(n,e)=>{let t=We({position:n.position,size:n.size}),o=(n.angle||0)*Math.PI/180,i={x:t.x+t.width/2,y:t.y+t.height/2};if(e.x===i.x&&e.y===i.y){let p=o!==0?Pp({x:t.x+t.width,y:i.y},i,o):{x:t.x+t.width,y:i.y},v=o!==0?Pp({x:1,y:0},{x:0,y:0},o):{x:1,y:0};return{x:p.x,y:p.y,side:NC(v)}}let r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=o!==0?r.map(p=>Pp(p,i,o)):r,a=1/0,d=null,c=null;for(let p=0;p<4;p++){let v=s[p],E=s[(p+1)%4],k=$N(e,i,v,E);if(k){let P=Math.hypot(k.x-e.x,k.y-e.y);P<a&&(a=P,d=v,c=E)}}if(!d||!c)return{x:i.x,y:i.y,side:"right"};let l=GN(d,c),u=NC(l),h={x:(d.x+c.x)/2,y:(d.y+c.y)/2};return{x:h.x,y:h.y,side:u}},n0=(n,e)=>{let t=Math.round(e/90)%4;return{top:["top","right","bottom","left"],right:["right","bottom","left","top"],bottom:["bottom","left","top","right"],left:["left","top","right","bottom"]}[n][t]},o0=(n,e)=>{let{x:t,y:o,width:i,height:r}=We(n),s=t+e.position.x,a=o+e.position.y,d=n.side;return e.angle&&e.angle!==0&&(d=n0(n.side,e.angle)),d==="left"?{x:s,y:a+r/2}:d==="top"?{x:s+i/2,y:a}:d==="bottom"?{x:s+i/2,y:a+r}:d==="right"?{x:s+i,y:a+r/2}:{x:s,y:a}},i0=(n,e)=>{let t=n.measuredPorts?.find(o=>o.id===e);return t?o0(t,n):null},r0=(n,e)=>{let t=n.measuredPorts?.find(r=>r.id===e);if(!t)return null;let o=o0(t,n),i=t.side;return n.angle&&n.angle!==0&&(i=n0(t.side,n.angle)),y(g({},o),{side:i})},qN=n=>$o(n.map(e=>e.measuredBounds).filter(e=>e!==void 0)),ZN=n=>$o(n.map(YN)),Hg=(n,e)=>{let t=qN(n),o=ZN(e);return $o([t,o])},YN=n=>{let e=t0(n.points||[]),t=n.measuredLabels||[];if(t.length===0)return e;let o=t.filter(i=>i.position&&i.size).map(i=>({x:i.position.x-i.size.width/2,y:i.position.y-i.size.height/2,width:i.size.width,height:i.size.height}));return $o([e,...o])},jo=n=>{let e=n.measuredPorts||[],{x:t,y:o,width:i,height:r}=We(n),s=[jg({x:0,y:0,width:i,height:r},n.angle||0)];for(let d of e){let{x:c,y:l,width:u,height:h}=We(d);s.push({x:c,y:l,width:u,height:h})}let a=$o(s);return{x:t+a.x,y:o+a.y,width:a.width,height:a.height}},XN=(n,e,{useGroupRect:t=!0,allowResizeBelowChildrenBounds:o=!0}={})=>{if(!e.size?.width||!e.size?.height)throw new Error("Group must have both width and height defined");if(o)return{left:1/0,top:1/0,right:-1/0,bottom:-1/0};let i=TC(We(e));return n.length?n.reduce((r,s)=>{if(s.size&&(!s.size.width||!s.size.height))throw new Error(`calculateGroupBounds: child node ${s.id} does not have both width and height defined`);let a=TC(s.measuredBounds?s.measuredBounds:jo(s));return r.left=Math.min(r.left,a.left),r.top=Math.min(r.top,a.top),r.right=Math.max(r.right,a.right),r.bottom=Math.max(r.bottom,a.bottom),r},t?i:{left:1/0,top:1/0,right:-1/0,bottom:-1/0}):i};function eo(n){return"isGroup"in n}var vt=n=>(n?.width??0)>0&&(n?.height??0)>0,qt=n=>n?.x!=null&&n?.y!=null&&!isNaN(n.x)&&!isNaN(n.y),Up=class{permits;waiting=[];constructor(e){this.permits=e}acquire(){return M(this,null,function*(){return this.permits>0?(this.permits--,Promise.resolve()):new Promise(e=>{this.waiting.push(e)})})}release(){this.waiting.length>0?this.waiting.shift()():this.permits++}availablePermits(){return this.permits}getQueueLength(){return this.waiting.length}};function QN(n,e){let t=KN(e);return[...n].sort(t)}function KN(n){let e=new Map;return n.forEach((t,o)=>{e.set(t.id,o)}),(t,o)=>{let i=t.computedZIndex??0,r=o.computedZIndex??0;if(i!==r)return r-i;let s=e.get(t.id)??0;return(e.get(o.id)??0)-s}}var s0=({x:n,y:e,width:t,height:o},i)=>!t||!o||t<0||o<0?null:i.width&&i.height?{x:i.width/2-(n+t/2)*i.scale,y:i.height/2-(e+o/2)*i.scale}:null,JN=(t,o)=>M(null,[t,o],function*(n,{rect:e}){let{viewport:i}=n.flowCore.getState().metadata,r=s0(e,i);if(r){if(fn(i,{x:r.x,y:r.y}))return;yield n.flowCore.applyUpdate({metadataUpdate:{viewport:y(g({},i),{x:r.x,y:r.y})}},"centerOnRect")}}),e1=(t,o)=>M(null,[t,o],function*(n,{nodeOrId:e}){let i=typeof e=="string"?n.flowCore.getNodeById(e):e,{viewport:r}=n.flowCore.getState().metadata;if(!i||!i.size?.width||!i.size?.height)return;let s=s0({x:i.position.x,y:i.position.y,width:i.size.width,height:i.size.height},r);if(s){if(fn(r,{x:s.x,y:s.y}))return;yield n.flowCore.applyUpdate({metadataUpdate:{viewport:y(g({},r),{x:s.x,y:s.y})}},"centerOnNode")}});var t1=n=>n.length===0?{x:0,y:0}:{x:n.reduce((e,t)=>e+t.position.x,0)/n.length,y:n.reduce((e,t)=>e+t.position.y,0)/n.length},n1=(n,e)=>{let t=t1(n);if(!e.position)return{x:20,y:20};if(n.length===1){let o=n[0];return{x:e.position.x-(o.size?.width??0)/2-o.position.x,y:e.position.y-(o.size?.height??0)/2-o.position.y}}return{x:e.position.x-t.x,y:e.position.y-t.y}},o1=n=>{if(!n.measuredPorts||n.measuredPorts.length===0)return n;let e=n.measuredPorts.map(t=>y(g({},t),{nodeId:n.id}));return y(g({},n),{measuredPorts:e})},i1=(n,e,t,o)=>(e.forEach(i=>{let r=n.computeNodeId();o.set(i.id,r)}),e.map(i=>{let r=o.get(i.id),s=i.groupId?o.get(i.groupId):void 0,a=y(g({},i),{id:r,groupId:s,position:{x:i.position.x+t.x,y:i.position.y+t.y},selected:!0});return a=o1(a),a})),r1=(n,e,t)=>e.map(o=>{let i=n.computeEdgeId();return y(g({},o),{id:i,source:t.get(o.source)||o.source,target:t.get(o.target)||o.target,selected:!0})}),s1=(n,e)=>{let t=[],o=[];return n.forEach(i=>{i.selected&&t.push({id:i.id,selected:!1})}),e.forEach(i=>{i.selected&&o.push({id:i.id,selected:!1})}),{nodesToUpdate:t,edgesToUpdate:o}},a0=n=>M(null,null,function*(){let{nodes:e,edges:t}=n.flowCore.getState(),o=e.filter(r=>r.selected),i=t.filter(r=>r.selected);n.flowCore.actionStateManager.copyPaste={copiedNodes:o,copiedEdges:i}}),a1=(n,e)=>M(null,null,function*(){let t=n.flowCore.actionStateManager.copyPaste;if(!t||t.copiedNodes.length===0&&t.copiedEdges.length===0)return;let{nodes:o,edges:i}=n.flowCore.getState(),r=new Map,s=n1(t.copiedNodes,e),a=i1(n.flowCore.config,t.copiedNodes,s,r),d=r1(n.flowCore.config,t.copiedEdges,r),{nodesToUpdate:c,edgesToUpdate:l}=s1(o,i);yield n.flowCore.applyUpdate({nodesToAdd:a,edgesToAdd:d,nodesToUpdate:c,edgesToUpdate:l},"paste")}),d1=({edges:n,nodesToDeleteIds:e})=>{let t=new Set(e);return n.filter(o=>o.selected||t.has(o.source)||t.has(o.target)).map(o=>o.id)},d0=n=>M(null,null,function*(){let{nodes:e,edges:t}=n.flowCore.getState(),o=e.some(a=>a.selected),i=t.some(a=>a.selected);if(!o&&!i)return;let r=o?n.flowCore.modelLookup.getSelectedNodesWithChildren({directOnly:!1}).map(a=>a.id):[],s=d1({edges:t,nodesToDeleteIds:r});r.length===0&&s.length===0||(yield n.flowCore.applyUpdate({nodesToRemove:r,edgesToRemove:s},"deleteSelection"))}),c1=n=>M(null,null,function*(){yield a0(n),yield d0(n)}),l1=(o,i)=>M(null,[o,i],function*(n,{groupId:e,nodes:t}){let r=n.flowCore.actionStateManager.highlightGroup,s=r?.highlightedGroupId;if(s===e)return;let a=n.flowCore.modelLookup.getNodeById(e);if(!a||!t.some(c=>n.flowCore.config.grouping.canGroup(c,a)))return;let d=[{id:e,highlighted:!0}];s&&d.push({id:s,highlighted:!1}),n.flowCore.actionStateManager.highlightGroup={highlightedGroupId:e},yield n.flowCore.applyUpdate({nodesToUpdate:d},"highlightGroup")}),u1=n=>M(null,null,function*(){let e=n.flowCore.actionStateManager.highlightGroup,t=e?.highlightedGroupId;t&&(yield n.flowCore.applyUpdate({nodesToUpdate:[{id:t,highlighted:!1}]},"highlightGroupClear"),n.flowCore.actionStateManager.clearHighlightGroup())}),f1=(n,e)=>M(null,null,function*(){yield n.flowCore.applyUpdate({renderedNodeIds:e.renderedNodeIds,renderedEdgeIds:e.renderedEdgeIds},"init")}),c0=(n,e,t)=>{let o=y(g(g({},e),t),{temporary:!1});return n.linking.finalEdgeDataBuilder(y(g({},o),{id:n.computeEdgeId()}))},p1=(n,e,t)=>!!(n.type!=="source"&&(e&&n.nodeId!==e||t&&n.id!==t)),l0=(n,e,t,o,i,r)=>{let s=e?n.getNodeById(e):null,a=o?n.getNodeById(o):null,d=t?s?.measuredPorts?.find(l=>l.id===t)??null:null,c=i?a?.measuredPorts?.find(l=>l.id===i)??null:null;return!(r||!d||c)||n.config.linking.validateConnection(s,d,a,c)},es=(n,e)=>n.linking.temporaryEdgeDataBuilder(y(g({id:"TEMPORARY_EDGE",data:{},temporary:!0},e),{source:e.source||"",target:e.target||"",targetArrowhead:e.targetArrowhead||"ng-diagram-arrow"})),kC=n=>M(null,null,function*(){n.flowCore.actionStateManager.clearLinking(),yield n.flowCore.applyUpdate({},"finishLinking")}),h1=(n,e,t)=>{let o=e&&n.flowCore.getNodeById(e);if(!o)return{isValid:!1,targetNode:null,targetPosition:null};if(t&&o.measuredPorts?.find(r=>r.id===t)?.type==="source")return{isValid:!1,targetNode:o,targetPosition:null};let i=e&&t?i0(o,t):o.position;return i?{isValid:!0,targetNode:o,targetPosition:i}:{isValid:!1,targetNode:o,targetPosition:null}},g1=n=>M(null,null,function*(){let e=n.flowCore.actionStateManager.linking?.temporaryEdge;if(!e)return;let{source:t,sourcePort:o,target:i,targetPort:r}=e,s=i||void 0,a=r||void 0;if(!l0(n.flowCore,t,o,s,a,!0))return void(yield kC(n));let{isValid:d,targetPosition:c}=h1(n,s,a);d?(yield n.flowCore.applyUpdate({edgesToAdd:[c0(n.flowCore.config,e,{target:s,targetPort:a,targetPosition:c||void 0})]},"finishLinking"),n.flowCore.actionStateManager.clearLinking()):yield kC(n)}),m1=(n,e)=>M(null,null,function*(){let t=n.flowCore.actionStateManager.linking?.temporaryEdge,{position:o}=e;t&&(yield n.flowCore.applyUpdate({edgesToAdd:[c0(n.flowCore.config,t,{target:"",targetPort:"",targetPosition:o})]},"finishLinking"),n.flowCore.actionStateManager.clearLinking())}),v1=(n,e,t)=>{let o=n.flowCore.getNearestPortInRange(e,n.flowCore.config.linking.portSnapDistance),i=o&&p1(o,t.source,t.sourcePort);return{targetNodeId:i?o.nodeId:"",targetPortId:i?o.id:"",isValid:!!i}},y1=(n,e,t,o)=>{let{targetNodeId:i,targetPortId:r}=t,s=e.source||"",a=e.sourcePort||"",d=()=>es(n.flowCore.config,{source:s,sourcePort:a,target:"",targetPort:"",targetPosition:o});if(!i)return d();let c=n.flowCore.getNodeById(i);return c&&l0(n.flowCore,e.source,e.sourcePort,i,r)?r&&c.measuredPorts?.find(l=>l.id===r)?es(n.flowCore.config,{source:s,sourcePort:a,target:i,targetPort:r,targetPosition:o}):es(n.flowCore.config,{source:s,sourcePort:a,target:i,targetPort:"",targetPosition:o}):d()},b1=(n,e,t)=>e===n.target&&t===n.targetPort,_1=(n,e)=>M(null,null,function*(){let{position:t}=e,o=n.flowCore.actionStateManager.linking?.temporaryEdge;if(!n.flowCore.actionStateManager.linking||!o)return;let i=v1(n,t,o);if(i.targetNodeId&&b1(o,i.targetNodeId,i.targetPortId))return;let r=y1(n,o,i,t);n.flowCore.actionStateManager.linking=y(g({},n.flowCore.actionStateManager.linking),{temporaryEdge:r}),yield n.flowCore.applyUpdate({},"moveTemporaryEdge")}),C1=(n,e)=>M(null,null,function*(){let{source:t,sourcePort:o}=e,i=n.flowCore.getNodeById(t);if(!i||o&&i.measuredPorts?.find(a=>a.id===o)?.type==="target")return;let r=o?i0(i,o):i.position;if(!r)return;let s=es(n.flowCore.config,{source:t,sourcePort:o,sourcePosition:r,target:"",targetPosition:r});n.flowCore.actionStateManager.linking={temporaryEdge:s,sourceNodeId:t,sourcePortId:o??""},yield n.flowCore.applyUpdate({},"startLinking")}),D1=(n,e)=>M(null,null,function*(){let{position:t}=e,o=es(n.flowCore.config,{source:"",sourcePosition:t,target:"",targetPosition:t});n.flowCore.actionStateManager.linking={sourceNodeId:"",sourcePortId:"",temporaryEdge:o},yield n.flowCore.applyUpdate({},"startLinkingFromPosition")}),w1=(o,i)=>M(null,[o,i],function*(n,{delta:e,nodes:t}){let r=new Set(t.map(c=>c.id)),s=t.filter(c=>!c.groupId||!r.has(c.groupId)),a=n.flowCore.actionStateManager?.dragging?.accumulatedDeltas,d=E1(n,s,r,e,a);d.length!==0&&(yield n.flowCore.applyUpdate({nodesToUpdate:d},"moveNodesBy"))}),E1=(n,e,t,o,i)=>{let r=[],s=new Set;return e.forEach(a=>{let{snappedPosition:d,actualDelta:c}=M1(n,a,o,i);fn(a.position,d)||r.push({id:a.id,position:d}),s.add(a.id),S1(n,a.id,c,t,s,r)}),r},M1=(n,e,t,o)=>{let{snappedPosition:i,newAccumulated:r}=I1(n,e,t,o);return o&&o.set(e.id,r),{snappedPosition:i,actualDelta:{x:i.x-e.position.x,y:i.y-e.position.y}}},S1=(n,e,t,o,i,r)=>{n.flowCore.modelLookup.getAllDescendants(e).forEach(s=>{if(o.has(s.id)&&!i.has(s.id)){let a={x:s.position.x+t.x,y:s.position.y+t.y};fn(s.position,a)||r.push({id:s.id,position:a}),i.add(s.id)}})},I1=(n,e,t,o)=>{let{shouldSnapDragForNode:i,computeSnapForNodeDrag:r,defaultDragSnap:s}=n.flowCore.config.snapping,a=o?.get(e.id)??{x:0,y:0},d=a.x+t.x,c=a.y+t.y;if(!i(e))return{snappedPosition:{x:e.position.x+d,y:e.position.y+c},newAccumulated:{x:0,y:0}};let l=r(e)??s,u=Ve.snapPoint({x:e.position.x+d,y:e.position.y+c},l);return{snappedPosition:u,newAccumulated:{x:d-(u.x-e.position.x),y:c-(u.y-e.position.y)}}},x1=(o,i)=>M(null,[o,i],function*(n,{x:e,y:t}){let{metadata:r}=n.flowCore.getState();(e||t)&&(n.flowCore.actionStateManager.isPanning()?n.flowCore.applyViewportOnlyUpdate({x:r.viewport.x+e,y:r.viewport.y+t}):yield n.flowCore.applyUpdate({metadataUpdate:{viewport:y(g({},r.viewport),{x:r.viewport.x+e,y:r.viewport.y+t})}},"moveViewport"))}),T1=(n,e)=>M(null,null,function*(){let{x:t,y:o}=e,{metadata:i}=n.flowCore.getState();fn(i.viewport,{x:t,y:o})||(yield n.flowCore.applyUpdate({metadataUpdate:{viewport:y(g({},i.viewport),{x:t,y:o})}},"moveViewport"))}),N1=(o,i)=>M(null,[o,i],function*(n,{groupId:e,nodeIds:t}){let r=t.map(a=>n.flowCore.modelLookup.getNodeById(a)).filter(Boolean);if(!n.flowCore.modelLookup.getNodeById(e))return;let s=[];for(let a of r)a.groupId===e&&s.push({id:a.id,groupId:void 0});s.length>0&&(yield n.flowCore.commandHandler.emit("updateNodes",{nodes:s}))}),k1=n=>`[ngDiagram] Resize node failed: Node not found.

Node ID: ${n}

This may occur if the node was deleted before the resize command executed.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/nodes/`,u0=(n,e,t,o,i)=>{let r=Math.max(t.width,n.resize.getMinNodeSize(e).width),s=Math.max(t.height,n.resize.getMinNodeSize(e).height);if(!o)return{size:{width:r,height:s},position:o};let a=o.x,d=o.y;return r!==t.width&&o.x>i.x&&(a=o.x-(r-t.width)),s!==t.height&&o.y>i.y&&(d=o.y-(s-t.height)),{size:{width:r,height:s},position:{x:a,y:d}}},P1=(n,e,t,o)=>{let i={left:e?.x??t.x,top:e?.y??t.y,right:(e?.x??t.x)+n.width,bottom:(e?.y??t.y)+n.height},r={left:Math.min(i.left,o.left),top:Math.min(i.top,o.top),right:Math.max(i.right,o.right),bottom:Math.max(i.bottom,o.bottom)};return{size:{width:r.right-r.left,height:r.bottom-r.top},position:{x:r.left,y:r.top}}},A1=(n,e)=>M(null,null,function*(){let t=n.flowCore.getNodeById(e.id);t?t.size||!e.size?e.size&&(e0(t.size,e.size)||eo(t)&&!t.selected||(eo(t)?yield R1(n,e,t):yield f0(n,e))):yield O1(n,e):console.error(k1(e.id))}),R1=(n,e,t)=>M(null,null,function*(){let o=n.flowCore.modelLookup.getNodeChildren(e.id,{directOnly:!1});if(o.length===0)return void(yield f0(n,e));let i=XN(o,t,{useGroupRect:!1,allowResizeBelowChildrenBounds:n.flowCore.config.resize.allowResizeBelowChildrenBounds}),{size:r,position:s}=u0(n.flowCore.config,t,e.size,e.position,t.position),{size:a,position:d}=P1(r,s,t.position,i);yield p0(n,t,d,a,!0)}),f0=(n,e)=>M(null,null,function*(){let t=n.flowCore.getNodeById(e.id);if(!t)return;let{size:o,position:i}=u0(n.flowCore.config,t,e.size,e.position,t.position);yield p0(n,t,i,o,e.disableAutoSize)}),O1=(n,e)=>M(null,null,function*(){n.flowCore.getNodeById(e.id)&&(yield n.emit("updateNode",{id:e.id,nodeChanges:{size:e.size}}))}),p0=(n,e,t,o,i)=>M(null,null,function*(){if(!n.flowCore.config.snapping.shouldSnapResizeForNode(e)){let r=g({id:e.id,size:o},i!==void 0&&{autoSize:!i});return t&&(r.position=t),yield n.flowCore.applyUpdate({nodesToUpdate:[r]},"resizeNode")}return yield L1(n,e,t,o,i)}),F1=(n,e,t,o,i)=>{let r=n.size?.width??0,s=n.size?.height??0,a=t?.width??r,d=t?.height??s,c=e&&n.position.y!==e.y,l=a,u=d;return r!==a&&(l=o&&e&&n.position.x!==e.x?Math.round(n.position.x+r)-o.x:Ve.snapNumber(a,i.width)),s!==d&&(u=o&&c?Math.max(Math.round(n.position.y+s)-o.y,0):Ve.snapNumber(d,i.height)),{width:l,height:u}},L1=(n,e,t,o,i)=>M(null,null,function*(){let{computeSnapForNodeSize:r,defaultResizeSnap:s}=n.flowCore.config.snapping,a=r(e)??s,d=t&&Ve.snapPoint(t,a),{width:c,height:l}=F1(e,t,o,d,a),u=g({id:e.id,size:{width:c,height:l}},i!==void 0&&{autoSize:!i});d&&(u.position=d),yield n.flowCore.applyUpdate({nodesToUpdate:[u]},"resizeNode")}),B1=[0,90,180,270];var V1=n=>{let e=Ve.normalizeAngle(n);for(let t of B1){let o=Math.abs(e-t);if(Math.min(o,360-o)<=2)return t}return e},j1=(o,i)=>M(null,[o,i],function*(n,{nodeId:e,angle:t}){let r=n.flowCore.getNodeById(e);if(!r)return;let s=r.angle??0;if(s===t)return;let{shouldSnapForNode:a,computeSnapAngleForNode:d,defaultSnapAngle:c}=n.flowCore.config.nodeRotation,l=Ve.normalizeAngle(t),u=l;if(a(r)){let h=d(r)??c;if(u=Ve.snapAngle(l,h),u===s)return}else if(u=V1(u),u===s)return;yield n.flowCore.applyUpdate({nodesToUpdate:[{id:e,angle:u}]},"rotateNodeTo")}),uc=(n,e,t,o=!1)=>{let i=[],r=[],s=new Set(e),a=new Set(t);for(let d of n.nodesMap.values()){let c=s.has(d.id);!!d.selected===c||o&&d.selected||i.push({id:d.id,selected:c})}for(let d of n.edgesMap.values()){let c=a.has(d.id);!!d.selected===c||o&&d.selected||r.push({id:d.id,selected:c})}return{nodesToUpdate:i,edgesToUpdate:r}},H1=(i,r)=>M(null,[i,r],function*(n,{nodeIds:e,edgeIds:t,multiSelection:o=!1}){let{modelLookup:s}=n.flowCore,{nodesToUpdate:a,edgesToUpdate:d}=uc(s,e??[],t??[],o);a?.length===0&&d?.length===0||(yield n.flowCore.applyUpdate({nodesToUpdate:a,edgesToUpdate:d},"changeSelection"))}),z1=(o,i)=>M(null,[o,i],function*(n,{nodeIds:e,edgeIds:t}){let{modelLookup:r}=n.flowCore,s=new Set(e),a=new Set(t),d=[];for(let h of r.nodesMap.values())!s.has(h.id)&&h.selected&&d.push(h.id);let c=[];for(let h of r.edgesMap.values())!a.has(h.id)&&h.selected&&c.push(h.id);let{nodesToUpdate:l,edgesToUpdate:u}=uc(r,d,c);l?.length===0&&u?.length===0||(yield n.flowCore.applyUpdate({nodesToUpdate:l,edgesToUpdate:u},"changeSelection"))}),U1=n=>M(null,null,function*(){let{modelLookup:e}=n.flowCore,{nodesToUpdate:t,edgesToUpdate:o}=uc(e,[],[]);t?.length===0&&o?.length===0||(yield n.flowCore.applyUpdate({nodesToUpdate:t,edgesToUpdate:o},"changeSelection"))}),$1=n=>M(null,null,function*(){let{modelLookup:e}=n.flowCore,t=Array.from(e.nodesMap.keys()),o=Array.from(e.edgesMap.keys()),{nodesToUpdate:i,edgesToUpdate:r}=uc(e,t,o);i?.length===0&&r?.length===0||(yield n.flowCore.applyUpdate({nodesToUpdate:i,edgesToUpdate:r},"changeSelection"))});function G1(n,e,t){return t.name==="bringToFront"?Math.max(...n.map(o=>o.zOrder??0),...e.map(o=>o.zOrder??0))+1:Math.min(...n.map(o=>o.zOrder??0),...e.map(o=>o.zOrder??0))-1}function W1(n,e){if(e.nodeIds||e.edgeIds)return{nodeIds:e.nodeIds??[],edgeIds:e.edgeIds??[]};let{nodes:t,edges:o}=n.flowCore.getState();return{nodeIds:t.filter(i=>i.selected).map(i=>i.id),edgeIds:o.filter(i=>i.selected).map(i=>i.id)}}var h0=(n,e)=>M(null,null,function*(){let{nodes:t,edges:o}=n.flowCore.getState(),{nodeIds:i,edgeIds:r}=W1(n,e);if(i.length===0&&r.length===0)return;let s=G1(t,o,e);yield n.flowCore.applyUpdate({nodesToUpdate:i.map(a=>({id:a,zOrder:s})),edgesToUpdate:r.map(a=>({id:a,zOrder:s}))},"changeZOrder")}),q1=(n,e)=>M(null,null,function*(){yield h0(n,e)}),Z1=(n,e)=>M(null,null,function*(){yield h0(n,e)}),Y1=n=>`[ngDiagram] Invalid zoom scale: ${n}

Scale must be a positive finite number.

Documentation: https://www.ngdiagram.dev/docs/intro/coordinate-system/#viewport-and-scaling`,X1=(i,r)=>M(null,[i,r],function*(n,{x:e,y:t,scale:o}){let{metadata:s}=n.flowCore.getState();if(o<=0||!isFinite(o)||isNaN(o))return void console.error(Y1(o));let{min:a,max:d}=n.flowCore.config.zoom;o<a||o>d?console.warn(`Zoom scale ${o} is out of bounds [${a}, ${d}]`):e===s.viewport.x&&t===s.viewport.y&&o===s.viewport.scale||(yield n.flowCore.applyUpdate({metadataUpdate:{viewport:y(g({},s.viewport),{x:e,y:t,scale:o})}},"zoom"))}),Q1=n=>`[ngDiagram] Invalid scale calculated in zoom-to-fit: ${n}

Scale must be a positive finite number.

Documentation: https://www.ngdiagram.dev/docs/intro/coordinate-system/#viewport-and-scaling`,K1=`[ngDiagram] zoomToFit is disabled when virtualization is enabled.

When virtualization is active, only visible nodes and edges are rendered for performance reasons.
Zoom to fit requires all elements to be available for calculating bounds, which conflicts with virtualization.

To use zoomToFit, disable virtualization in your config:
  virtualization: { enabled: false }`,J1=(n,e)=>{if(typeof n=="number")return{top:n,right:n,bottom:n,left:n};switch(n.length){case 2:return{top:n[0],right:n[1],bottom:n[0],left:n[1]};case 3:return{top:n[0],right:n[1],bottom:n[2],left:n[1]};case 4:return{top:n[0],right:n[1],bottom:n[2],left:n[3]};default:return{top:e,right:e,bottom:e,left:e}}},ek=(n,e,t,o)=>({targetNodes:t?.length?n.filter(i=>t.includes(i.id)):n,targetEdges:o?.length?e.filter(i=>o.includes(i.id)):e}),tk=(n,e,t,o,i,r)=>{let s=Math.min(t/n,o/e);return Math.max(i,Math.min(r,s))},nk=(n,e,t,o)=>({x:e.width/2-(n.x+n.width/2)*o+(t.left-t.right)/2,y:e.height/2-(n.y+n.height/2)*o+(t.top-t.bottom)/2}),ok=n=>!!n.width&&!!n.height&&n.width>0&&n.height>0,ik=(i,r)=>M(null,[i,r],function*(n,{nodeIds:e,edgeIds:t,padding:o}){if(n.flowCore.isVirtualizationActive)return void console.warn(K1);let{nodes:s,edges:a,metadata:d}=n.flowCore.getState(),{viewport:c}=d;if(!ok(c))return;let l=c.width,u=c.height,h=n.flowCore.config.zoom.zoomToFit.padding,p=o??h,{targetNodes:v,targetEdges:E}=ek(s,a,e,t),k=Hg(v,E);if(!k)return;let P=Array.isArray(h)?h[0]:h,Ie=J1(p,P),be=l-Ie.left-Ie.right,Ft=u-Ie.top-Ie.bottom;if(be<=0||Ft<=0)return;let{min:Yt,max:Fn}=n.flowCore.config.zoom,wt=tk(k.width,k.height,be,Ft,Yt,Fn);if(wt<=0||!isFinite(wt)||isNaN(wt))return void console.error(Q1(wt));let{x:mn,y:Wo}=nk(k,{width:l,height:u},Ie,wt);c.x===mn&&c.y===Wo&&c.scale===wt||(yield n.flowCore.applyUpdate({metadataUpdate:{viewport:y(g({},c),{x:mn,y:Wo,scale:wt})}},"zoomToFit"))}),rk={init:f1,select:H1,selectAll:$1,deselect:z1,deselectAll:U1,moveNodesBy:w1,deleteSelection:d0,addNodes:wN,updateNode:MN,updateNodes:SN,deleteNodes:IN,clearModel:xN,addEdges:TN,updateEdge:NN,updateEdges:kN,deleteEdges:PN,copy:a0,cut:c1,paste:a1,moveViewport:T1,moveViewportBy:x1,startLinking:C1,moveTemporaryEdge:_1,finishLinking:g1,finishLinkingToPosition:m1,startLinkingFromPosition:D1,resizeNode:A1,zoom:X1,addPorts:AN,addPortsBulk:RN,updatePorts:ON,updatePortsBulk:FN,deletePorts:LN,deletePortsBulk:BN,bringToFront:q1,sendToBack:Z1,addEdgeLabels:VN,updateEdgeLabels:jN,deleteEdgeLabels:HN,rotateNodeTo:j1,highlightGroup:l1,highlightGroupClear:u1,addToGroup:DN,removeFromGroup:N1,paletteDropNode:EN,centerOnNode:e1,centerOnRect:JN,zoomToFit:ik},$p=class{callbacks={};flowCore;constructor(e){this.flowCore=e,Object.entries(rk).forEach(([t,o])=>{this.register(t,i=>{o(this,i)})})}emit(e,...t){return M(this,null,function*(){return yield this.emitInternal(e,!1,...t)})}emitInternal(e,t,...o){return M(this,null,function*(){if(!t&&this.flowCore.transactionManager.isActive()){let r=this.flowCore.transactionManager.getCurrentTransaction();if(r&&!r.isAborted())return r.context.emit(e,...o)}let i=this.callbacks[e];if(i){let r=g({name:e},o[0]);yield Promise.all(i.map(s=>s(r)))}})}register(e,t){return this.getCommandCallbacks(e).push(t),()=>{let o=this.getCommandCallbacks(e).filter(i=>i!==t);this.callbacks[e]=o}}getCommandCallbacks(e){return this.callbacks[e]||=[]}},sk=[{actionName:"copy",bindings:[{key:"c",modifiers:{primary:!0}}]},{actionName:"cut",bindings:[{key:"x",modifiers:{primary:!0}}]},{actionName:"paste",bindings:[{key:"v",modifiers:{primary:!0}}]},{actionName:"deleteSelection",bindings:[{key:"Delete"},{key:"Backspace"}]},{actionName:"keyboardMoveSelectionUp",bindings:[{key:"ArrowUp"}]},{actionName:"keyboardMoveSelectionDown",bindings:[{key:"ArrowDown"}]},{actionName:"keyboardMoveSelectionLeft",bindings:[{key:"ArrowLeft"}]},{actionName:"keyboardMoveSelectionRight",bindings:[{key:"ArrowRight"}]},{actionName:"keyboardPanUp",bindings:[{key:"ArrowUp"}]},{actionName:"keyboardPanDown",bindings:[{key:"ArrowDown"}]},{actionName:"keyboardPanLeft",bindings:[{key:"ArrowLeft"}]},{actionName:"keyboardPanRight",bindings:[{key:"ArrowRight"}]},{actionName:"boxSelection",bindings:[{modifiers:{shift:!0}}]},{actionName:"multiSelection",bindings:[{modifiers:{primary:!0}}]},{actionName:"selectAll",bindings:[{key:"a",modifiers:{primary:!0}}]},{actionName:"undo",bindings:[{key:"z",modifiers:{primary:!0}}]},{actionName:"redo",bindings:[{key:"y",modifiers:{primary:!0}}]}];var Gp=class{flowCore;constructor(e){this.flowCore=e}match(e){let{shortcuts:t}=this.flowCore.config,o=[];for(let i of t)for(let r of i.bindings)if(this.matchBinding(e,r)){o.push(i);break}return o}matchesAction(e,t){let{shortcuts:o}=this.flowCore.config,i=o.find(r=>r.actionName===e);return!!i&&i.bindings.some(r=>this.matchBinding(t,r))}matchBinding(e,t){return!(t.key!==void 0&&!this.keysMatch(e.key,t.key))&&(t.key!==void 0||e.key===void 0)&&this.matchModifiers(e.modifiers,t)}matchModifiers(e,t){return e.primary===(t.modifiers?.primary??!1)&&e.shift===(t.modifiers?.shift??!1)&&e.secondary===(t.modifiers?.secondary??!1)&&(t.modifiers?.meta===void 0||e.meta===t.modifiers.meta)}keysMatch(e,t){return e!==void 0&&(e.length===1&&t.length===1?e.toLowerCase()===t.toLowerCase():e===t)}},Wp={width:20,height:20},ak={getMinNodeSize:()=>g({},Wp),allowResizeBelowChildrenBounds:!0,defaultResizable:!0},dk={portSnapDistance:10,edgePanningEnabled:!0,edgePanningForce:10,edgePanningThreshold:30,validateConnection:()=>!0,temporaryEdgeDataBuilder:n=>g({},n),finalEdgeDataBuilder:n=>g({},n)},ck={canGroup:()=>!0},lk={padding:50,onInit:!1},uk={min:.01,max:10,step:.03,zoomToFit:lk},fk={dotSpacing:30,cellSize:{width:10,height:10},majorLinesFrequency:{x:5,y:5}},pk={shouldSnapForNode:()=>!1,computeSnapAngleForNode:()=>null,defaultSnapAngle:30,defaultRotatable:!0},hk={shouldSnapDragForNode:()=>!1,shouldSnapResizeForNode:()=>!1,computeSnapForNodeDrag:()=>null,computeSnapForNodeSize:()=>null,defaultDragSnap:{width:10,height:10},defaultResizeSnap:{width:10,height:10}},gk={edgePanningForce:10,edgePanningThreshold:30,edgePanningEnabled:!0},mk={enabled:!0,selectedZIndex:1e3,temporaryEdgeZIndex:1e3,edgesAboveConnectedNodes:!1,elevateOnSelection:!0},vk={defaultRouting:"orthogonal",bezier:{bezierControlOffset:100},orthogonal:{maxCornerRadius:15,firstLastSegmentLength:20}},yk={partialInclusion:!0,realtime:!0},bk={enabled:!1,padding:.5,idleDelay:100},_k=(n,e)=>Vg({computeNodeId:()=>e.environment.generateId(),computeEdgeId:()=>e.environment.generateId(),resize:ak,linking:dk,grouping:ck,zoom:uk,background:fk,nodeRotation:pk,snapping:hk,selectionMoving:gk,edgeRouting:vk,zIndex:mk,boxSelection:yk,virtualization:bk,shortcuts:sk,debugMode:!1,viewportPanningEnabled:!0,nodeDraggingEnabled:!0},n),qp=class{pendingLabelAdditions=new Map;scheduledAdditionFlushes=new Set;pendingLabelUpdates=new Map;scheduledUpdateFlushes=new Set;processAdd(e,t,o){this.pendingLabelAdditions.has(e)||this.pendingLabelAdditions.set(e,[]),this.pendingLabelAdditions.get(e).push(t),this.scheduledAdditionFlushes.has(e)||(this.scheduledAdditionFlushes.add(e),queueMicrotask(()=>{this.flushLabelAdditions(e,o)}))}processUpdate(e,t,o){this.pendingLabelUpdates.has(e)||this.pendingLabelUpdates.set(e,[]),this.pendingLabelUpdates.get(e).push(t),this.scheduledUpdateFlushes.has(e)||(this.scheduledUpdateFlushes.add(e),queueMicrotask(()=>{this.flushLabelUpdates(e,o)}))}flushLabelAdditions(e,t){let o=this.pendingLabelAdditions.get(e);o&&o.length!==0&&(t(e,o),this.pendingLabelAdditions.delete(e),this.scheduledAdditionFlushes.delete(e))}flushLabelUpdates(e,t){let o=this.pendingLabelUpdates.get(e);o&&o.length!==0&&(t(e,o),this.pendingLabelUpdates.delete(e),this.scheduledUpdateFlushes.delete(e))}};var Zp=class{trackedIds=new Set;initialTimeoutId=null;debounceTimeoutId=null;hasReceivedActivity=!1;waitingPromise=null;waitingResolve=null;debounceMs=50;initialTimeoutMs=2e3;trackStateUpdate(e,t,o){if(this.debounceMs=t??50,this.initialTimeoutMs=o??2e3,e.nodesToAdd)for(let i of e.nodesToAdd)this.trackedIds.add(`node:${i.id}`);if(e.nodesToUpdate)for(let i of e.nodesToUpdate)this.trackedIds.add(`node:${i.id}`);if(e.edgesToAdd)for(let i of e.edgesToAdd)this.trackedIds.add(`edge:${i.id}`);if(e.edgesToUpdate)for(let i of e.edgesToUpdate)this.trackedIds.add(`edge:${i.id}`);this.initialTimeoutId||this.hasReceivedActivity||(this.initialTimeoutId=setTimeout(()=>{this.onInitialTimeout()},this.initialTimeoutMs))}signalNodeMeasurement(e){this.signalActivity(`node:${e}`)}signalEdgeMeasurement(e){this.signalActivity(`edge:${e}`)}waitForMeasurements(){return this.hasPendingMeasurements()?(this.waitingPromise||(this.waitingPromise=new Promise(e=>{this.waitingResolve=e})),this.waitingPromise):Promise.resolve()}hasPendingMeasurements(){return this.trackedIds.size>0}onInitialTimeout(){let e=[...this.trackedIds];console.warn("[MeasurementTracker] Initial timeout reached. No measurement activity received.",{pendingEntities:e,timeoutMs:this.initialTimeoutMs}),this.clear()}signalActivity(e){this.trackedIds.has(e)&&(this.hasReceivedActivity||(this.hasReceivedActivity=!0,this.initialTimeoutId&&(clearTimeout(this.initialTimeoutId),this.initialTimeoutId=null)),this.debounceTimeoutId&&clearTimeout(this.debounceTimeoutId),this.debounceTimeoutId=setTimeout(()=>{this.clear()},this.debounceMs))}clear(){this.initialTimeoutId&&(clearTimeout(this.initialTimeoutId),this.initialTimeoutId=null),this.debounceTimeoutId&&(clearTimeout(this.debounceTimeoutId),this.debounceTimeoutId=null),this.trackedIds.clear(),this.hasReceivedActivity=!1,this.waitingResolve&&(this.waitingResolve(),this.waitingResolve=null,this.waitingPromise=null)}},Yp=class{flowCore;middlewareChain;history=[];initialState;initialStateUpdate;modelActionTypes;metadata;edgesMap=new Map;nodesMap=new Map;initialNodesMap=new Map;initialEdgesMap=new Map;addedNodesIds=new Set;removedNodesIds=new Set;addedEdgesIds=new Set;removedEdgesIds=new Set;updatedPropsToNodeIds=new Map;updatedPropsToEdgeIds=new Map;updatedNodeIdsToProps=new Map;updatedEdgeIdsToProps=new Map;constructor(e,t){this.flowCore=e,this.middlewareChain=t}run(e,t,o){return M(this,null,function*(){return this.initialState=e,this.modelActionTypes=o,this.metadata=e.metadata,this.isMetadataOnlyUpdate(t)?(this.nodesMap=this.flowCore.modelLookup.nodesMap,this.edgesMap=this.flowCore.modelLookup.edgesMap,this.initialNodesMap=this.nodesMap,this.initialEdgesMap=this.edgesMap):(this.nodesMap=new Map(this.flowCore.modelLookup.nodesMap),this.edgesMap=new Map(this.flowCore.modelLookup.edgesMap),this.initialNodesMap=new Map(this.flowCore.modelLookup.nodesMap),this.initialEdgesMap=new Map(this.flowCore.modelLookup.edgesMap)),this.initialStateUpdate=t,this.applyStateUpdate(t),yield this.resolveMiddlewares()})}isMetadataOnlyUpdate(e){return!(e.nodesToAdd?.length||e.nodesToUpdate?.length||e.nodesToRemove?.length||e.edgesToAdd?.length||e.edgesToUpdate?.length||e.edgesToRemove?.length||!e.metadataUpdate)}helpers=()=>({checkIfNodeChanged:e=>this.updatedNodeIdsToProps.has(e),checkIfEdgeChanged:e=>this.updatedEdgeIdsToProps.has(e),checkIfNodeAdded:e=>this.addedNodesIds.has(e),checkIfNodeRemoved:e=>this.removedNodesIds.has(e),checkIfEdgeAdded:e=>this.addedEdgesIds.has(e),checkIfEdgeRemoved:e=>this.removedEdgesIds.has(e),checkIfAnyNodePropsChanged:e=>e.some(t=>this.updatedPropsToNodeIds.has(t)),checkIfAnyEdgePropsChanged:e=>e.some(t=>this.updatedPropsToEdgeIds.has(t)),anyNodesAdded:()=>this.addedNodesIds.size>0,anyEdgesAdded:()=>this.addedEdgesIds.size>0,anyNodesRemoved:()=>this.removedNodesIds.size>0,anyEdgesRemoved:()=>this.removedEdgesIds.size>0,getAffectedNodeIds:e=>e.flatMap(t=>[...this.updatedPropsToNodeIds.get(t)??[]]),getAffectedEdgeIds:e=>e.flatMap(t=>[...this.updatedPropsToEdgeIds.get(t)??[]]),getAddedNodes:()=>Array.from(this.addedNodesIds).map(e=>this.nodesMap.get(e)).filter(e=>e!==void 0),getAddedEdges:()=>Array.from(this.addedEdgesIds).map(e=>this.edgesMap.get(e)).filter(e=>e!==void 0),getRemovedNodes:()=>Array.from(this.removedNodesIds).map(e=>this.initialNodesMap.get(e)).filter(e=>e!==void 0),getRemovedEdges:()=>Array.from(this.removedEdgesIds).map(e=>this.initialEdgesMap.get(e)).filter(e=>e!==void 0)});getState=()=>({nodes:Array.from(this.nodesMap.values()),edges:Array.from(this.edgesMap.values()),metadata:this.metadata});getContext=()=>({state:this.getState(),nodesMap:this.nodesMap,edgesMap:this.edgesMap,initialNodesMap:this.initialNodesMap,initialEdgesMap:this.initialEdgesMap,initialState:this.initialState,modelActionType:this.modelActionTypes[0],modelActionTypes:this.modelActionTypes,actionStateManager:this.flowCore.actionStateManager,edgeRoutingManager:this.flowCore.edgeRoutingManager,helpers:this.helpers(),history:this.history,initialUpdate:this.initialStateUpdate,config:this.flowCore.config,environment:this.flowCore.environment});resolveMiddlewares=()=>new Promise(e=>{let t=[],o=new Set,i=r=>new Promise(s=>{let a=this.middlewareChain[r];if(!a){let l=this.getState();for(e(l);t.length>0;)t.pop()?.(l);return}let d=a.name;if(o.has(r))throw new Error(`Middleware ${d} executed next() multiple times`);o.add(r),t.push(s);let c=this.getContext();a.execute(c,l=>M(this,null,function*(){return l&&Object.keys(l).length>0&&this.applyStateUpdate(l,d),yield i(r+1)}),()=>{for(;t.length>0;)t.pop()?.(this.initialState);e(void 0)})});i(0)});applyStateUpdate=(e,t)=>{t&&this.history.push({name:t,stateUpdate:e}),e.nodesToAdd?.forEach(o=>this.addNode(o)),e.edgesToAdd?.forEach(o=>this.addEdge(o)),e.edgesToRemove?.forEach(o=>this.removeEdge(o)),e.nodesToRemove?.forEach(o=>this.removeNode(o)),e.nodesToUpdate?.forEach(o=>this.updateNode(o)),e.edgesToUpdate?.forEach(o=>this.updateEdge(o)),e.metadataUpdate&&(this.metadata=g(g({},this.metadata),e.metadataUpdate))};removeNode=e=>{this.nodesMap.delete(e),this.removedNodesIds.add(e),this.addedNodesIds.delete(e)};removeEdge=e=>{this.edgesMap.delete(e),this.removedEdgesIds.add(e),this.addedEdgesIds.delete(e)};addEdge=e=>{this.edgesMap.set(e.id,e),this.addedEdgesIds.add(e.id),this.removedEdgesIds.delete(e.id)};addNode=e=>{this.nodesMap.set(e.id,e),this.addedNodesIds.add(e.id),this.removedNodesIds.delete(e.id)};updateNode=o=>{var i=o,{id:e}=i,t=qo(i,["id"]);let r={},s=this.nodesMap.get(e);s&&(Object.entries(t).forEach(([a,d])=>{a==="position"?fn(s.position,d)||(r.position=d,this.updateNodeProp(e,"position")):a==="size"?e0(s.size,d)||(r.size=d,this.updateNodeProp(e,"size")):s[a]!==d&&(r[a]=d,this.updateNodeProp(e,a))}),Object.keys(r).length>0&&this.nodesMap.set(e,g(g({},s),r)))};updateNodeProp=(e,t)=>{this.updatedPropsToNodeIds.has(t)||this.updatedPropsToNodeIds.set(t,new Set([])),this.updatedPropsToNodeIds.get(t).add(e),this.updatedNodeIdsToProps.has(e)||this.updatedNodeIdsToProps.set(e,new Set([])),this.updatedNodeIdsToProps.get(e).add(t)};updateEdge=o=>{var i=o,{id:e}=i,t=qo(i,["id"]);let r={},s=this.edgesMap.get(e);s&&(Object.entries(t).forEach(([a,d])=>{a==="targetPosition"?fn(s.targetPosition,d)||(r.targetPosition=d,this.updateEdgeProp(e,"targetPosition")):a==="sourcePosition"?fn(s.sourcePosition,d)||(r.sourcePosition=d,this.updateEdgeProp(e,"sourcePosition")):s[a]!==d&&(r[a]=d,this.updateEdgeProp(e,a))}),Object.keys(r).length>0&&this.edgesMap.set(e,g(g({},s),r)))};updateEdgeProp=(e,t)=>{this.updatedPropsToEdgeIds.has(t)||this.updatedPropsToEdgeIds.set(t,new Set([])),this.updatedPropsToEdgeIds.get(t).add(e),this.updatedEdgeIdsToProps.has(e)||this.updatedEdgeIdsToProps.set(e,new Set([])),this.updatedEdgeIdsToProps.get(e).add(t)}};function PC(n,e,t,o=!1){let i=new Map(e.map(r=>[r.id,r.computedZIndex??0]));return n.map(r=>g0(r,i,t,o))}function g0(n,e,t,o=!1){let i=e.get(n.source)??t.get(n.source)?.computedZIndex??0,r=e.get(n.target)??t.get(n.target)?.computedZIndex??0,s=Math.max(i,r),a=n?.zOrder??(o?s+1:s);return y(g({},n),{computedZIndex:a})}function AC(n,e,t,o){let i=Ck(e),r=[];return(function s(a,d,c){let l=y(g({},a),{computedZIndex:c?a?.zOrder??d:d});r.push(l);let u=d;if(eo(l)){let h=i.get(l.id)||[];for(let p of h)u+=1,u=s(p,u,c)}return u})(n,t,o),r}function Ck(n){let e=new Map;for(let t of n.values())t.groupId&&(e.has(t.groupId)||e.set(t.groupId,[]),e.get(t.groupId).push(t));return e}function RC(n){let e=Array.from(n.values()).filter(o=>!o.groupId),t=[];for(let o of e)m0(o,n,t,0);return t}function m0(n,e,t,o){let i=n?.zOrder??o;if(t.push(y(g({},n),{computedZIndex:i})),!eo(n))return;let r=Array.from(e.values()).filter(s=>s.groupId===n.id);for(let s of r)m0(s,e,t,o+1)}var Dk=n=>n.includes("init"),wk=n=>n.includes("finishLinking")||n.includes("addEdges"),Ek={name:"z-index",execute:(n,e)=>{let{state:{edges:t},nodesMap:o,edgesMap:i,helpers:r,modelActionTypes:s,config:a}=n,d=a.zIndex,c=d.enabled,l=Dk(s),u=r.checkIfAnyNodePropsChanged(["selected"]),h=r.checkIfAnyNodePropsChanged(["groupId"]),p=r.checkIfAnyNodePropsChanged(["zOrder"]),v=r.checkIfAnyEdgePropsChanged(["selected"]),E=wk(s),k=r.anyNodesAdded();if(!c||!(l||h||u||E||v||p||k))return void e();let P=[],Ie=[],be=[],Ft=new Map,Yt=new Set,Fn=[];if(l&&(be=RC(o),be.forEach(oe=>{Yt.add(oe.id),Ft.set(oe.id,oe)})),k){let oe=RC(r.getAddedNodes().reduce(($,Fe)=>$.set(Fe.id,Fe),new Map));be=[...be,...oe],oe.forEach($=>Ft.set($.id,$))}let wt=d.selectedZIndex,mn=oe=>oe.groupId?(Ft.get(oe.groupId)??o.get(oe.groupId))?.computedZIndex??-1:-1,Wo=(oe,$)=>{let Fe=o.get(oe),Xt=o.get($);return Fe&&Xt?Fe.groupId&&Fe.groupId===Xt.id?1:Xt.groupId&&Xt.groupId===Fe.id?-1:0:0};if(u)for(let oe of r.getAffectedNodeIds(["selected"]).sort(Wo)){if(Yt.has(oe))continue;let $=o.get(oe);if(!$)continue;let Fe=$.selected&&d.elevateOnSelection?$.groupId?mn($)+1:wt:$.zOrder!==void 0?$.zOrder:$.groupId?mn($)+1:0,Xt=AC($,o,Fe,$.selected&&d.elevateOnSelection);be.push(...Xt),Xt.forEach(no=>{Yt.add(no.id),Ft.set(no.id,no)})}else if(h)for(let oe of r.getAffectedNodeIds(["groupId"]).sort(Wo)){if(Yt.has(oe))continue;let $=o.get(oe);if(!$||$?.selected)continue;let Fe=$.groupId?mn($)+1:0,Xt=AC($,o,Fe,$.selected);be.push(...Xt),Xt.forEach(no=>{Yt.add(no.id),Ft.set(no.id,no)})}if(p)for(let oe of r.getAffectedNodeIds(["zOrder"]).sort(Wo)){let $=o.get(oe);if(!$)continue;let Fe=y(g({},$),{computedZIndex:$.zOrder});be.push(Fe),Ft.set($.id,Fe),Yt.add($.id)}for(let oe of be){let $=o.get(oe.id);$&&oe.computedZIndex!==$.computedZIndex&&P.push({id:oe.id,computedZIndex:oe.computedZIndex})}let tm=t.at(-1);if(E&&tm&&(Fn=PC([tm],be,o,d.edgesAboveConnectedNodes)),v){let oe=new Map(be.map($=>[$.id,$.computedZIndex??0]));for(let $ of r.getAffectedEdgeIds(["selected"])){let Fe=i.get($);Fe&&Fn.push(Fe.selected&&d.elevateOnSelection?y(g({},Fe),{computedZIndex:wt}):g0(Fe,oe,o,d.edgesAboveConnectedNodes))}}else Fn=PC(t,be,o,d.edgesAboveConnectedNodes);for(let oe of Fn){let $=i.get(oe.id);$&&oe.computedZIndex!==$.computedZIndex&&Ie.push({id:oe.id,computedZIndex:oe.computedZIndex})}e(g(g({},P.length>0?{nodesToUpdate:P}:{}),Ie.length>0?{edgesToUpdate:Ie}:{}))}};var Mk=(n,e)=>{if(!n.target&&n.targetPosition){let t=e.get(n.source);return{targetSide:xC(t,n.sourcePort,n.targetPosition)}}if(!n.source&&n.sourcePosition&&n.targetPosition){let t=e.get(n.target);return{sourceSide:xC(t,n.targetPort,n.sourcePosition)}}return{}},Sk=(n,e)=>{let t=n.temporary?Mk(n,e):{},o=t.sourceSide??"right",i=t.targetSide??"left",r=e.get(n.source),s=e.get(n.target),a=FC(r,n.sourcePort,n.sourcePosition),d=FC(s,n.targetPort,n.targetPosition),c=LC(e,n.source,o,n.sourcePort,n.sourcePosition,d),l=LC(e,n.target,i,n.targetPort,n.targetPosition,a);return{source:OC(c)?c:void 0,target:OC(l)?l:void 0}},OC=n=>!!n&&n.x!==void 0&&n.y!==void 0&&!!n.side,FC=(n,e,t)=>{if(!n)return t||{x:0,y:0};if(e){let o=r0(n,e);if(o)return{x:o.x,y:o.y}}return{x:n.position.x+(n.size?.width||0)/2,y:n.position.y+(n.size?.height||0)/2}},Ik=(n,e,t,o,i)=>n?t?r0(n,t)||y(g({},o),{side:e}):WN(n,i||o||{x:0,y:0}):y(g({},o),{side:e}),LC=(n,e,t,o,i,r)=>{let s=n.get(e);return s?Ik(s,t,o,i,r):y(g({},i),{side:t})},xk=(n,e,t,o,i)=>`[ngDiagram] Invalid edge coordinates detected for edge '${n}'.

Edge details:
  \u2022 source: ${e} (port: ${t||"not specified"})
  \u2022 target: ${o} (port: ${i||"not specified"})

Documentation: https://www.ngdiagram.dev/docs/guides/edges/edges/
`,Tk=n=>`[ngDiagram] Edge routing '${n}' is not registered. Falling back to default routing.

Documentation: https://www.ngdiagram.dev/docs/guides/edges/routing/
`,Nk=(n,e,t)=>{if(n.sourcePort){let o=e?.measuredPorts;if(!o)return!1;let i=o.find(r=>r.id===n.sourcePort);if(!i||!i.position||!i.size)return!1}if(n.targetPort){let o=t?.measuredPorts;if(!o)return!1;let i=o.find(r=>r.id===n.targetPort);if(!i||!i.position||!i.size)return!1}return!0},kk=n=>n.routingMode==="manual"&&!!n.points&&n.points.length>0,Gd=n=>n?.x!==void 0&&n?.y!==void 0?{x:n.x,y:n.y}:void 0,BC=(n,e)=>n&&e?n.measuredPorts?.find(t=>t.id===e):void 0,Pk=(n,e,t,o,i,r)=>{let s={sourcePoint:e,targetPoint:t,edge:n,sourceNode:o,targetNode:i,sourcePort:BC(o,n.sourcePort),targetPort:BC(i,n.targetPort)};if(n.routing&&r.hasRouting(n.routing))return r.computePoints(n.routing,s);n.routing&&!r.hasRouting(n.routing)&&console.warn(Tk(n.routing));let a=r.getDefaultRouting();return r.hasRouting(a)?r.computePoints(a,s):[Gd(e),Gd(t)].filter(d=>!!d)},v0=(n,e,t)=>{let o=e.get(n.source),i=e.get(n.target);if(!kk(n)&&!Nk(n,o,i))return{sourcePoint:void 0,targetPoint:void 0,points:[]};let{source:r,target:s}=Sk(n,e),a=Gd(r),d=Gd(s);return r&&s&&qt(a)&&qt(d)?{sourcePoint:a,targetPoint:d,points:n.routingMode==="manual"&&n.points&&n.points.length>0?n.points:Pk(n,r,s,o,i,t)}:(console.error(xk(n.id,n.source,n.sourcePort,n.target,n.targetPort)),{sourcePoint:void 0,targetPoint:void 0,points:[]})},Ak=({helpers:n,modelActionTypes:e,actionStateManager:t})=>!e.includes("zoom")&&(!e.includes("resizeNode")||!t.isResizing())&&(e.includes("init")||n.anyEdgesAdded()||n.checkIfAnyNodePropsChanged(["position","size","angle","measuredPorts"])||n.checkIfAnyEdgePropsChanged(["targetPosition","sourcePosition","points","sourcePort","targetPort","source","target","routing","routingMode"])),Rk=(n,e,t)=>e.checkIfEdgeAdded(n.id)||e.checkIfEdgeChanged(n.id)||e.checkIfNodeChanged(n.source)||e.checkIfNodeChanged(n.target)||t.includes("init"),Ok=(n,e)=>!n||n.length!==e.length||!n.every((t,o)=>fn(t,e[o])),y0=(n,e,t)=>n.measuredLabels?.map(o=>y(g({},o),{position:t.computePointOnPath(n.routing,e,o.positionOnEdge)})),Fk=(n,e,t,o,i)=>{let r=y0(n,o,i);return r?.length||e||t?{id:n.id,sourcePosition:e,targetPosition:t,measuredLabels:r}:null},Lk=(n,e,t,o,i)=>{if(!Ok(n.points,o))return null;let r=y0(n,o,i);return{id:n.id,points:o,sourcePosition:e,targetPosition:t,measuredLabels:r}},Bk=(n,e,t,o,i)=>{let r=[];return n.forEach(s=>{if(!Rk(s,o,i))return;let{sourcePoint:a,targetPoint:d,points:c}=v0(s,e,t);if(!c||c.length===0)return;let l=s.routingMode==="manual"?Fk(s,a,d,c,t):Lk(s,a,d,c,t);l&&r.push(l)}),r},Vk=(n,e,t,o)=>{let{sourcePoint:i,targetPoint:r,points:s}=v0(n,e,t);return y(g({},n),{points:s,sourcePosition:i,targetPosition:r,computedZIndex:o})},jk={name:"edges-routing",execute:(n,e)=>{let{state:{edges:t},nodesMap:o,edgeRoutingManager:i,actionStateManager:r,helpers:s,modelActionTypes:a,config:{zIndex:d}}=n,c=d.temporaryEdgeZIndex||1e3,l=Ak(n),u=r.linking?.temporaryEdge;if(!l&&!u)return void e();let h=l?Bk(t,o,i,s,a):[],p=u?Vk(u,o,i,c):void 0;p&&r.linking&&(r.linking=y(g({},r.linking),{temporaryEdge:p})),e(g({},h.length>0?{edgesToUpdate:h}:{}))}},Xp=class{name="ClipboardPastedEmitter";emit(e,t){if(!e.modelActionTypes.includes("paste")||!e.actionStateManager.getState().copyPaste)return;let{initialNodesMap:o,initialEdgesMap:i,nodesMap:r,edgesMap:s}=e,a=[];for(let[c,l]of r)o.has(c)||a.push(l);let d=[];for(let[c,l]of s)i.has(c)||d.push(l);(a.length>0||d.length>0)&&t.deferredEmit("clipboardPasted",{nodes:a,edges:d})}},Qp=class{name="DiagramInitEmitter";unmeasuredNodes=new Set;unmeasuredNodePorts=new Set;unmeasuredEdgeLabels=new Set;initialized=!1;initEventEmitted=!1;safetyHatchTimeoutId=null;SAFETY_HATCH_TIMEOUT_MS=2e3;emit(e,t){let{modelActionTypes:o}=e;o.includes("init")?this.handleInit(e,t):(o.includes("updateNode")||o.includes("updateEdge"))&&this.handleUpdate(e,t)}handleInit(e,t){this.initialized=!0;let{nodesMap:o,edgesMap:i,initialUpdate:r}=e;this.collectUnmeasuredItems(o,i,r.renderedNodeIds??Array.from(o.keys()),r.renderedEdgeIds??Array.from(i.keys())),this.areAllMeasured()?this.emitInitEvent(e,t):this.restartSafetyHatchTimeout(e,t)}handleUpdate(e,t){if(!this.initialized||this.initEventEmitted)return;let{modelActionTypes:o,initialUpdate:i,nodesMap:r,edgesMap:s}=e,a=this.countUnmeasuredItems();o.includes("updateNode")&&this.processNodeUpdates(i,r),o.includes("updateEdge")&&this.processEdgeUpdates(i,s),this.countUnmeasuredItems()<a&&this.restartSafetyHatchTimeout(e,t),this.areAllMeasured()&&this.emitInitEvent(e,t)}collectUnmeasuredItems(e,t,o,i){this.unmeasuredNodes.clear(),this.unmeasuredNodePorts.clear(),this.unmeasuredEdgeLabels.clear();for(let r of o){let s=e.get(r);if(s){vt(s.size)||this.unmeasuredNodes.add(r);for(let a of s.measuredPorts??[])vt(a.size)&&qt(a.position)||this.unmeasuredNodePorts.add(`${r}:${a.id}`)}}for(let r of i){let s=t.get(r);if(s)for(let a of s.measuredLabels??[])vt(a.size)&&qt(a.position)||this.unmeasuredEdgeLabels.add(`${r}:${a.id}`)}}processNodeUpdates(e,t){if(e?.nodesToUpdate?.length){for(let o of e.nodesToUpdate)if(t.has(o.id)&&(this.unmeasuredNodes.has(o.id)&&vt(o.size)&&this.unmeasuredNodes.delete(o.id),o.measuredPorts))for(let i of o.measuredPorts){let r=`${o.id}:${i.id}`;this.unmeasuredNodePorts.has(r)&&vt(i.size)&&qt(i.position)&&this.unmeasuredNodePorts.delete(r)}}}processEdgeUpdates(e,t){if(e?.edgesToUpdate?.length){for(let o of e.edgesToUpdate)if(t.has(o.id)&&o.measuredLabels)for(let i of o.measuredLabels){let r=`${o.id}:${i.id}`;this.unmeasuredEdgeLabels.has(r)&&vt(i.size)&&qt(i.position)&&this.unmeasuredEdgeLabels.delete(r)}}}areAllMeasured(){return this.unmeasuredNodes.size===0&&this.unmeasuredNodePorts.size===0&&this.unmeasuredEdgeLabels.size===0}emitInitEvent(e,t,o=!0){this.clearSafetyHatchTimeout();let{nodesMap:i,edgesMap:r,initialUpdate:s}=e,a=new Set(s.renderedNodeIds??i.keys()),d=new Set(s.renderedEdgeIds??r.keys()),c={nodes:Array.from(i.values()).filter(l=>a.has(l.id)),edges:Array.from(r.values()).filter(l=>d.has(l.id)),viewport:e.state.metadata.viewport};o?t.deferredEmit("diagramInit",c):t.emit("diagramInit",c),this.initEventEmitted=!0}restartSafetyHatchTimeout(e,t){this.clearSafetyHatchTimeout(),this.safetyHatchTimeoutId=setTimeout(()=>{this.initEventEmitted||this.emitInitEventWithWarning(e,t)},this.SAFETY_HATCH_TIMEOUT_MS)}clearSafetyHatchTimeout(){this.safetyHatchTimeoutId!==null&&(clearTimeout(this.safetyHatchTimeoutId),this.safetyHatchTimeoutId=null)}emitInitEventWithWarning(e,t){let o={nodes:Array.from(this.unmeasuredNodes),nodePorts:Array.from(this.unmeasuredNodePorts),edgeLabels:Array.from(this.unmeasuredEdgeLabels)},i=this.countUnmeasuredItems();console.warn("[DiagramInitEmitter] Measurement timeout reached from last measurement. Emitting diagramInit event anyway."),console.warn(`Total unmeasured elements: ${i}`),o.nodes.length>0&&console.warn(`Unmeasured nodes (${o.nodes.length}):`,o.nodes),o.nodePorts.length>0&&console.warn(`Unmeasured node ports (${o.nodePorts.length}):`,o.nodePorts),o.edgeLabels.length>0&&console.warn(`Unmeasured edge labels (${o.edgeLabels.length}):`,o.edgeLabels),this.emitInitEvent(e,t,!1)}countUnmeasuredItems(){return this.unmeasuredNodes.size+this.unmeasuredEdgeLabels.size+this.unmeasuredNodePorts.size}},Kp=class{name="EdgeDrawnEmitter";emit(e,t){if(!e.modelActionTypes.includes("finishLinking")||!e.helpers.anyEdgesAdded())return;let{initialEdgesMap:o,edgesMap:i,nodesMap:r}=e;this.emitNewEdges(o,i,r,t)}emitNewEdges(e,t,o,i){for(let[r,s]of t)if(!e.has(r)){let a=o.get(s.source),d=o.get(s.target);a&&d&&i.deferredEmit("edgeDrawn",{edge:s,source:a,target:d,sourcePort:s.sourcePort,targetPort:s.targetPort})}}},Jp=class{name="PaletteItemDroppedEmitter";emit(e,t){if(!e.modelActionTypes.includes("paletteDropNode"))return;let o=e.initialUpdate.nodesToAdd?.[0];if(!o)return;let i=o.id,r=e.initialNodesMap.get(i),s=e.nodesMap.get(i);!r&&s&&t.deferredEmit("paletteItemDropped",{node:s,dropPosition:s.position})}},eh=class{name="SelectionChangedEmitter";emit(e,t){if(!e.modelActionTypes.includes("changeSelection"))return;let{initialNodesMap:o,initialEdgesMap:i,nodesMap:r,edgesMap:s}=e,a=this.collectSelectedNodes(o),d=this.collectSelectedNodes(r),c=this.collectSelectedEdges(i),l=this.collectSelectedEdges(s),u=!this.areSelectionsEqual(a.map(p=>p.id),d.map(p=>p.id)),h=!this.areSelectionsEqual(c.map(p=>p.id),l.map(p=>p.id));(u||h)&&t.deferredEmit("selectionChanged",{selectedNodes:d,selectedEdges:l,previousNodes:a,previousEdges:c})}collectSelectedNodes(e){let t=[];for(let[,o]of e)o.selected&&t.push(o);return t}collectSelectedEdges(e){let t=[];for(let[,o]of e)o.selected&&t.push(o);return t}areSelectionsEqual(e,t){if(e.length!==t.length)return!1;let o=new Set(e),i=new Set(t);return o.size===i.size&&[...o].every(r=>i.has(r))}},th=class{name="GroupMembershipChangedEmitter";emit(e,t){if(!e.modelActionTypes.includes("updateNodes")||!e.helpers.checkIfAnyNodePropsChanged(["groupId"]))return;let{initialNodesMap:o,nodesMap:i}=e,r=e.helpers.getAffectedNodeIds(["groupId"]),s=new Map,a=[];for(let c of r){let l=o.get(c),u=i.get(c);if(!l||!u)continue;let h=l.groupId,p=u.groupId;p!=null?(s.has(p)||s.set(p,[]),s.get(p).push(u)):h!=null&&a.push(u)}let d=[];for(let[c,l]of s){let u=i.get(c);u&&u.isGroup&&d.push({nodes:l,targetGroup:u})}(d.length>0||a.length>0)&&t.deferredEmit("groupMembershipChanged",{grouped:d,ungrouped:a})}},nh=class{name="SelectionMovedEmitter";moveActions=["moveNodes","moveNodesBy"];emit(e,t){if(!this.moveActions.some(c=>e.modelActionTypes.includes(c)))return;let{initialNodesMap:o,nodesMap:i,initialUpdate:r,history:s}=e,a=this.collectUpdatedNodeIds(r,s);if(a.size===0)return;let d=this.getMovedNodes(a,o,i);d&&d.length!==0&&t.deferredEmit("selectionMoved",{nodes:d})}collectUpdatedNodeIds(e,t){let o=new Set;if(e?.nodesToUpdate)for(let i of e.nodesToUpdate)o.add(i.id);for(let i of t)if(i.stateUpdate?.nodesToUpdate)for(let r of i.stateUpdate.nodesToUpdate)o.add(r.id);return o}getMovedNodes(e,t,o){let i=[];for(let r of e){let s=o.get(r);if(!s)continue;let a=t.get(r);s.position&&a?.position&&(s.position.x===a.position.x&&s.position.y===a.position.y||i.push(s))}return i.length>0?i:null}},oh=class{name="SelectionRemovedEmitter";emit(e,t){if(!e.modelActionTypes.includes("deleteSelection"))return;let{initialNodesMap:o,initialEdgesMap:i,nodesMap:r,edgesMap:s}=e,a=[];for(let[c,l]of o)r.has(c)||a.push(l);let d=[];for(let[c,l]of i)s.has(c)||d.push(l);(a.length>0||d.length>0)&&t.deferredEmit("selectionRemoved",{deletedNodes:a,deletedEdges:d})}},ih=class{name="SelectionRotatedEmitter";emit(e,t){if(!e.modelActionTypes.includes("rotateNodeTo"))return;let{initialNodesMap:o,nodesMap:i}=e,r=e.initialUpdate.nodesToUpdate?.[0];if(!r)return;let s=r.id,a=o.get(s),d=i.get(s);if(!a||!d)return;let c=a.angle??0,l=d.angle??0;c!==l&&t.deferredEmit("selectionRotated",{node:d,angle:l,previousAngle:c})}},rh=class{name="NodeResizedEmitter";emit(e,t){if(!e.modelActionTypes.includes("resizeNode"))return;let o=e.initialUpdate.nodesToUpdate?.[0];if(!o)return;let i=o.id,r=e.initialNodesMap.get(i),s=e.nodesMap.get(i);if(!r||!s)return;let a=r.size,d=s.size;a&&d&&(d.width!==a.width||d.height!==a.height)&&t.deferredEmit("nodeResized",{node:s,previousSize:{width:a.width,height:a.height}})}},sh=class{name="ViewportChangedEmitter";emit({initialState:e,state:t},o){let i=e.metadata.viewport,r=t.metadata.viewport;i.x===r.x&&i.y===r.y&&i.scale===r.scale&&i.width===r.width&&i.height===r.height||o.deferredEmit("viewportChanged",{viewport:r,previousViewport:i})}},Hk=(n,e,t)=>`[ngDiagram] Event emitter error: ${n} failed.

Action types: ${e.join(", ")}
Error: ${t instanceof Error?t.message:String(t)}

This may indicate an issue with event handling logic.
The diagram will continue to function, but some events may not be emitted.
`,zk=n=>{let e=[new Qp,new eh,new nh,new oh,new th,new ih,new sh,new Kp,new Xp,new rh,new Jp];return{name:"__internal_event_emitter",execute:(t,o)=>{if(o(),n.isEnabled())for(let i of e)try{i.emit(t,n)}catch(r){console.error(Hk(i.name,t.modelActionTypes,r))}}}};function b0(n,e){return y(g({},n),{_internalId:`${n.id}-${e()}`})}var Uk={name:"internal-id-assignment",execute:(n,e)=>M(null,null,function*(){let{helpers:t,initialUpdate:o,environment:i}=n;if(!t.anyNodesAdded())return void e();let r=o.nodesToAdd?.map(s=>b0(s,()=>i.generateId()));e(g(g({},o),r?{nodesToAdd:r}:{}))})},Ud={name:"logger",execute:(n,e)=>{n.config.debugMode&&console.log(`[ngDiagram] ${n.modelActionTypes.join(", ")}`,{initialState:n.initialState,finalState:n.state,history:n.history,initialUpdate:n.initialUpdate}),e()}},Ap=n=>{if(!vt(n.size)||!qt(n.position))return!1;if(n.measuredPorts){for(let e of n.measuredPorts)if(!vt(e.size)||!qt(e.position))return!1}return!0},$k={name:"measured-bounds",execute:(n,e)=>{let{nodesMap:t,modelActionTypes:o,helpers:i}=n;if(o.includes("init")){let a=[];return t.forEach(d=>{Ap(d)&&a.push({id:d.id,measuredBounds:jo(d)})}),void e(g({},a.length?{nodesToUpdate:a}:{}))}if(!i.anyNodesAdded()&&!i.checkIfAnyNodePropsChanged(["position","size","angle","measuredPorts"]))return void e();let r=[],s=[];if(i.anyNodesAdded()){let a=i.getAddedNodes();for(let d of a)Ap(d)&&r.push(y(g({},d),{measuredBounds:jo(d)}))}if(i.checkIfAnyNodePropsChanged(["position","size","angle","measuredPorts"])){let a=i.getAffectedNodeIds(["position","size","angle","measuredPorts"]);for(let d of a){let c=t.get(d);c&&Ap(c)&&s.push({id:c.id,measuredBounds:jo(c)})}}e(g(g({},r.length?{nodesToAdd:r}:{}),s.length?{nodesToUpdate:s}:{}))}},Gk=n=>({name:"measurement-tracking",execute:(e,t)=>{if(!n.hasPendingMeasurements())return void t();let{helpers:o}=e;if(o.anyNodesAdded()){let i=o.getAddedNodes();for(let r of i)n.signalNodeMeasurement(r.id)}if(o.anyEdgesAdded()){let i=o.getAddedEdges();for(let r of i)n.signalEdgeMeasurement(r.id)}if(o.checkIfAnyNodePropsChanged(["size","position","measuredPorts"])){let i=o.getAffectedNodeIds(["size","position","measuredPorts"]);for(let r of i)n.signalNodeMeasurement(r)}if(o.checkIfAnyEdgePropsChanged(["points","measuredLabels"])){let i=o.getAffectedEdgeIds(["points","measuredLabels"]);for(let r of i)n.signalEdgeMeasurement(r)}t()}}),ah=class{middlewareChain=[];eventEmitterMiddleware=null;measurementTrackingMiddleware=null;flowCore;constructor(e,t){this.flowCore=e,t&&t.forEach(o=>this.register(o))}isRegistered(e){return!!this.middlewareChain.find(t=>t.name===e)}register(e){if(this.isRegistered(e.name))throw new Error(`Middleware ${e.name} already registered`);return this.middlewareChain.push(e),()=>this.unregister(e.name)}unregister(e){let t=this.middlewareChain.findIndex(o=>o.name===e);t!==-1&&this.middlewareChain.splice(t,1)}execute(e,t,o){return M(this,null,function*(){!this.eventEmitterMiddleware&&this.flowCore.eventManager&&(this.eventEmitterMiddleware=zk(this.flowCore.eventManager)),!this.measurementTrackingMiddleware&&this.flowCore.measurementTracker&&(this.measurementTrackingMiddleware=Gk(this.flowCore.measurementTracker));let i=[...this.middlewareChain,$k,Ud,...this.measurementTrackingMiddleware?[this.measurementTrackingMiddleware]:[],...this.eventEmitterMiddleware?[this.eventEmitterMiddleware]:[]];return yield new Yp(this.flowCore,i).run(e,t,o)})}},Wk=(n,e)=>`[ngDiagram] Model integrity error: Node references non-existent parent.

Node ID: ${n}
Parent ID: ${e}

This indicates corrupted model data. The group hierarchy will be incomplete.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/groups/`,qk=(n,e,t)=>`[ngDiagram] Model integrity error: Node's parent is not a group.

Node ID: ${n}
Parent ID: ${e}
Parent type: ${t}

This indicates incorrect model structure. The group hierarchy will be incomplete.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/groups/`,dh=class{flowCore;_nodesMap={map:new Map,synchronized:!1};_edgesMap={map:new Map,synchronized:!1};_directChildrenMap={map:new Map,synchronized:!1};_descendantsCache={map:new Map,synchronized:!1};_connectedEdgesMap={map:new Map,synchronized:!1};constructor(e){this.flowCore=e}desynchronize(){this._nodesMap.synchronized=!1,this._edgesMap.synchronized=!1,this._directChildrenMap.synchronized=!1,this._descendantsCache.synchronized=!1,this._connectedEdgesMap.synchronized=!1}get nodesMap(){return this._nodesMap.synchronized||(this._nodesMap={map:new Map(this.flowCore.getState().nodes.map(e=>[e.id,e])),synchronized:!0}),this._nodesMap.map}get edgesMap(){return this._edgesMap.synchronized||(this._edgesMap={map:new Map(this.flowCore.getState().edges.map(e=>[e.id,e])),synchronized:!0}),this._edgesMap.map}get directChildrenMap(){return this._directChildrenMap.synchronized||(this._directChildrenMap={map:this.buildDirectChildrenMap(this.flowCore.getState().nodes),synchronized:!0}),this._directChildrenMap.map}get connectedEdgesMap(){return this._connectedEdgesMap.synchronized||(this._connectedEdgesMap={map:this.buildConnectedEdgesMap(this.flowCore.getState().edges),synchronized:!0}),this._connectedEdgesMap.map}get descendantsCache(){return this._descendantsCache.synchronized||(this._descendantsCache={map:new Map,synchronized:!0}),this._descendantsCache.map}buildDirectChildrenMap(e){let t=new Map;for(let o of e)if(o.groupId){let i=t.get(o.groupId)||[];i.push(o.id),t.set(o.groupId,i)}return t}buildConnectedEdgesMap(e){let t=new Map;for(let o of e){let i=t.get(o.source)||[];i.push(o.id),t.set(o.source,i);let r=t.get(o.target)||[];r.push(o.id),t.set(o.target,r)}return t}getNodeById(e){return this.nodesMap.get(e)??null}getEdgeById(e){return this.edgesMap.get(e)??null}getConnectedEdges(e){return(this.connectedEdgesMap.get(e)??[]).map(t=>this.getEdgeById(t)).filter(t=>t!==null)}getConnectedNodes(e){let t=this.connectedEdgesMap.get(e)??[],o=new Set;for(let i of t){let r=this.getEdgeById(i);r&&o.add(r.source===e?r.target:r.source)}return Array.from(o).map(i=>this.getNodeById(i)).filter(i=>i!==null)}getNodeEnds(e){let t=this.getEdgeById(e);if(!t)return null;let o=this.getNodeById(t.source),i=this.getNodeById(t.target);return o&&i?{source:o,target:i}:null}getChildrenIds(e){return this.directChildrenMap.get(e)??[]}getChildren(e){let t=this.getChildrenIds(e);return t?t.map(o=>this.getNodeById(o)).filter(o=>o!==null):[]}getAllDescendantIds(e){if(this.descendantsCache.has(e))return this.descendantsCache.get(e);let t=this.computeAllDescendants(e);return this.descendantsCache.set(e,t),t}computeAllDescendants(e){let t=this.getChildrenIds(e);if(!t||t.length===0)return[];let o=[...t];for(let i of t){let r=this.computeAllDescendants(i);o.push(...r)}return o}getAllDescendants(e){return this.getAllDescendantIds(e).map(t=>this.getNodeById(t)).filter(t=>t!==null)}hasChildren(e){return this.directChildrenMap.has(e)&&this.directChildrenMap.get(e).length>0}hasDescendants(e){return this.getAllDescendantIds(e).length>0}getChildrenMap(){return this.directChildrenMap}getSelectedNodes(){return this.flowCore.getState().nodes.filter(e=>e.selected)}getNodeChildren(e,{directOnly:t=!0}={}){return t?this.getChildren(e):this.getAllDescendants(e)}getNodeChildrenIds(e,{directOnly:t=!0}={}){return t?this.getChildrenIds(e):this.getAllDescendantIds(e)}getSelectedNodesWithChildren({directOnly:e=!0}={}){let t=this.getSelectedNodes(),o=new Set,i=[];for(let r of t){if(o.has(r.id))continue;o.add(r.id),i.push(r);let s=this.getNodeChildren(r.id,{directOnly:e});for(let a of s)o.has(a.id)||(o.add(a.id),i.push(a))}return i}getSelectedEdges(){return this.flowCore.getState().edges.filter(e=>e.selected)}isNodeDescendantOfGroup(e,t){return this.getAllDescendantIds(t).includes(e)}wouldCreateCircularDependency(e,t){return e===t||this.isNodeDescendantOfGroup(t,e)}getParentChain(e){let t=[],o=this.getNodeById(e);for(;o&&o.groupId;){let i=this.getNodeById(o.groupId);if(!i)return console.error(Wk(o.id,o.groupId)),t;if(!eo(i))return console.error(qk(o.id,i.id,i.type||"unknown")),t;t.push(i),o=i}return t}},ts=class{pending=new Map;scheduledPerNode=new Set;globalFlushScheduled=!1;addPerNode(e,t,o){this.getOrCreateArray(e).push(t),this.scheduledPerNode.has(e)||(this.scheduledPerNode.add(e),queueMicrotask(()=>this.flushPerNode(e,o)))}addGlobal(e,t,o){this.getOrCreateArray(e).push(t),this.globalFlushScheduled||(this.globalFlushScheduled=!0,queueMicrotask(()=>this.flushGlobal(o)))}getOrCreateArray(e){return this.pending.has(e)||this.pending.set(e,[]),this.pending.get(e)}flushPerNode(e,t){let o=this.pending.get(e);o&&o.length!==0&&(t(e,o),this.pending.delete(e),this.scheduledPerNode.delete(e))}flushGlobal(e){if(this.pending.size===0)return void(this.globalFlushScheduled=!1);let t=new Map(this.pending);this.pending.clear(),this.scheduledPerNode.clear(),this.globalFlushScheduled=!1,e(t)}},ch=class{additionBatcher=new ts;updateBatcher=new ts;deletionBatcher=new ts;processAdd(e,t,o){this.additionBatcher.addPerNode(e,t,o)}processUpdate(e,t,o){this.updateBatcher.addPerNode(e,t,o)}processDelete(e,t,o){this.deletionBatcher.addPerNode(e,t,o)}processAddBatched(e,t,o){this.additionBatcher.addGlobal(e,t,o)}processUpdateBatched(e,t,o){this.updateBatcher.addGlobal(e,t,o)}processDeleteBatched(e,t,o){this.deletionBatcher.addGlobal(e,t,o)}},lh=class{lastVisibleNodeIds=null;withPerformanceLogging(e,t,o){if(!o)return void e();let{added:i,removed:r,total:s}=this.calculateNodeDiff(t),a=i>0||r>0,d=performance.now();e(),a&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{console.log(`[ngDiagram] Render: +${i} -${r} nodes (total: ${s}): ${(performance.now()-d).toFixed(2)}ms`)})})}calculateNodeDiff(e){let t=new Set(e.map(s=>s.id)),o=this.lastVisibleNodeIds??new Set,i=0,r=0;for(let s of t)o.has(s)||i++;for(let s of o)t.has(s)||r++;return this.lastVisibleNodeIds=t,{added:i,removed:r,total:t.size}}},Wd=class{flowCore;performanceLogger;constructor(e){this.flowCore=e,this.performanceLogger=new lh}render(){let{nodes:e,edges:t,metadata:o}=this.flowCore.getState(),i=this.flowCore.actionStateManager.linking?.temporaryEdge,{nodes:r,edges:s}=this.process(e,t,o.viewport),a=i?.temporary?[...s,i]:s;this.performanceLogger.withPerformanceLogging(()=>this.flowCore.renderer.draw(r,a,o.viewport),r,this.flowCore.config.debugMode)}},VC=new Set,uh=class extends Wd{constructor(e){super(e)}init(){this.render(),this.flowCore.model.onChange(o=>{this.flowCore.spatialHash.process(o.nodes),this.flowCore.modelLookup.desynchronize(),this.render()});let e=this.flowCore.model.getNodes(),t=this.flowCore.model.getEdges();this.flowCore.initUpdater.start(e,t,()=>M(this,null,function*(){yield this.flowCore.commandHandler.emit("init",{renderedNodeIds:e.map(o=>o.id),renderedEdgeIds:t.map(o=>o.id)})}))}process(e,t){return{nodes:e,edges:t,nodeIds:VC,edgeIds:VC}}isNodeRendered(e){return!0}},fh=class{flowCore;onIdle;wasPanning=!1;idleTimeout=null;unsubscribeActionState=null;constructor(e,t){this.flowCore=e,this.onIdle=t}init(){this.unsubscribeActionState=this.flowCore.eventManager.on("actionStateChanged",({actionState:e})=>{let t=!!e.panning?.active;this.wasPanning&&!t?this.scheduleIdleRender():t&&this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.wasPanning=t})}scheduleIdleRender(){this.idleTimeout&&clearTimeout(this.idleTimeout),this.idleTimeout=setTimeout(()=>{this.onIdle(),this.idleTimeout=null},this.flowCore.config.virtualization.idleDelay??100)}destroy(){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.unsubscribeActionState&&(this.unsubscribeActionState(),this.unsubscribeActionState=null)}};function jC(n){return!!n}function Zk(n,e){let{x:t,y:o,scale:i,width:r,height:s}=n,a=r||1920,d=s||1080,c=-t/i,l=-o/i,u=a/i,h=d/i,p=e*Math.min(1,i),v=Math.max(a,d)*p/i;return{x:c-v,y:l-v,width:u+2*v,height:h+2*v}}function Yk(n,e){let t=.25*n.width,o=.25*n.height,i=.1*n.width,r=.1*n.height;return Math.abs(n.x-e.x)<t&&Math.abs(n.y-e.y)<o&&Math.abs(n.width-e.width)<i&&Math.abs(n.height-e.height)<r}function Xk(n,e){let t=.4*e.width,o=.4*e.height;return Math.abs(n.x-e.x)>t||Math.abs(n.y-e.y)>o}var ph=class{cachedResult=null;lastViewportRect=null;lastNodesLength=0;lastEdgesLength=0;hasCache(){return this.cachedResult!==null}isNodeInCache(e){return this.cachedResult?.nodeIds.has(e)??!1}get(e,t){let o=this.cachedResult;return{nodes:e.filter(i=>o.nodeIds.has(i.id)),edges:t.filter(i=>o.edgeIds.has(i.id)),nodeIds:o.nodeIds,edgeIds:o.edgeIds}}set(e,t,o,i){this.cachedResult=e,this.lastViewportRect=i,this.lastNodesLength=t.length,this.lastEdgesLength=o.length}canUse(e,t,o){return!(!this.cachedResult||!this.lastViewportRect)&&e===this.lastNodesLength&&t===this.lastEdgesLength&&Yk(this.lastViewportRect,o)}hasMovedTooFar(e){return!this.lastViewportRect||Xk(e,this.lastViewportRect)}invalidateViewport(){this.lastViewportRect=null}invalidate(){this.cachedResult=null,this.lastViewportRect=null,this.lastNodesLength=0,this.lastEdgesLength=0}},hh=class{flowCore;constructor(e){this.flowCore=e}resolve(e){let t=this.getPrimaryVisibleIds(e),{edges:o,edgeIds:i,externalNodeIds:r}=this.collectVisibleEdges(t),{nodes:s,nodeIds:a}=this.buildNodeList(t,r);return{nodes:s,edges:o,nodeIds:a,edgeIds:i}}getPrimaryVisibleIds(e){let t=new Set(this.flowCore.spatialHash.queryIds(e));return this.addGroupDescendants(t),t}addGroupDescendants(e){let t=this.flowCore.modelLookup.nodesMap,o=Array.from(e);for(let i of o){let r=t.get(i);if(r&&eo(r))for(let s of this.flowCore.modelLookup.getAllDescendantIds(i))e.add(s)}}collectVisibleEdges(e){let t=[],o=new Set,i=new Set;for(let r of e)for(let s of this.flowCore.modelLookup.getConnectedEdges(r))o.has(s.id)||(t.push(s),o.add(s.id),e.has(s.source)||i.add(s.source),e.has(s.target)||i.add(s.target));return{edges:t,edgeIds:o,externalNodeIds:i}}buildNodeList(e,t){let o=this.flowCore.modelLookup.nodesMap,i=new Set(e);for(let s of t)i.add(s);let r=[];for(let s of i){let a=o.get(s);a&&r.push(a)}return{nodes:r,nodeIds:i}}};var gh=class{onZoomEnd;lastScale=null;isZooming=!1;zoomIdleTimeout=null;constructor(e){this.onZoomEnd=e}handleScaleChange(e){this.lastScale!==null&&this.lastScale!==e&&(this.isZooming=!0,this.scheduleZoomIdle()),this.lastScale=e}getIsZooming(){return this.isZooming}destroy(){this.zoomIdleTimeout&&(clearTimeout(this.zoomIdleTimeout),this.zoomIdleTimeout=null)}scheduleZoomIdle(){this.zoomIdleTimeout&&clearTimeout(this.zoomIdleTimeout),this.zoomIdleTimeout=setTimeout(()=>{this.isZooming=!1,this.zoomIdleTimeout=null,this.onZoomEnd()},300)}},HC=new Set,mh=class extends Wd{cache=new ph;visibleElementsResolver;zoomTracker;idleRenderScheduler;lastNodesRef=null;constructor(e){super(e),this.visibleElementsResolver=new hh(e),this.zoomTracker=new gh(()=>this.invalidateAndRender()),this.idleRenderScheduler=new fh(e,()=>this.invalidateAndRender())}init(){this.flowCore.spatialHash.process(this.flowCore.model.getNodes()),this.flowCore.model.onChange(r=>{r.nodes!==this.lastNodesRef&&(this.flowCore.spatialHash.process(r.nodes),this.flowCore.modelLookup.desynchronize(),this.lastNodesRef=r.nodes),this.render()}),this.idleRenderScheduler.init(),this.render();let{nodes:e,edges:t,metadata:o}=this.flowCore.getState(),i=this.process(e,t,o.viewport);this.flowCore.initUpdater.start(i.nodes,i.edges,()=>M(this,null,function*(){yield this.flowCore.commandHandler.emit("init",{renderedNodeIds:i.nodes.map(r=>r.id),renderedEdgeIds:i.edges.map(r=>r.id)})}))}process(e,t,o){let i=this.flowCore.config.virtualization;if(!jC(o))return{nodes:e,edges:t,nodeIds:HC,edgeIds:HC};this.zoomTracker.handleScaleChange(o.scale);let r=Zk(o,i.padding),s=this.cache.hasCache();if(this.zoomTracker.getIsZooming()&&s)return this.cache.get(e,t);if(this.flowCore.actionStateManager.isPanning()&&s)return this.cache.get(e,t);if(this.cache.canUse(e.length,t.length,r))return this.cache.get(e,t);let a=this.visibleElementsResolver.resolve(r);return this.cache.set(a,e,t,r),a}destroy(){this.zoomTracker.destroy(),this.idleRenderScheduler.destroy()}isNodeRendered(e){return!jC(this.flowCore.model.getMetadata().viewport)||this.cache.isNodeInCache(e)}invalidateAndRender(){this.cache.invalidateViewport(),this.render()}},Qk=(n,e)=>`[ngDiagram] Spatial hash error: Attempted to remove from non-existent cell "${n}".

Node ID: ${e}

This may indicate a state synchronization issue.`,Kk=(n,e)=>`[ngDiagram] Spatial hash error: Attempted to update non-existent cell "${n}".

Node ID: ${e}

This may indicate a state synchronization issue.`,vh=class{cellSize=100;grid=new Map;idToCells=new Map;idToRect=new Map;process(e){let t=new Set(this.idToRect.keys()),o=new Set;for(let i of e){o.add(i.id);let r=this.idToRect.get(i.id);if(r){let s=this.nodeToRect(i);zd(r,s)||this.updateInGrid(s)}else this.addToGrid(this.nodeToRect(i))}for(let i of t.difference(o))this.removeFromGrid(i)}query(e){let t=[];return this._query(e,o=>t.push(o)),t}queryIds(e){let t=[];return this._query(e,o=>t.push(o.id)),t}_query(e,t){let o=this.getCells(e),i=new Set;for(let r of o){let s=this.grid.get(r);if(s)for(let a of s)i.has(a.id)||(i.add(a.id),JC(a,e)&&t(a))}}nodeToRect(e){let t=e.measuredBounds??jo(e);return g({id:e.id},t)}addToCell(e,t){this.grid.has(e)||this.grid.set(e,[]),this.grid.get(e).push(t)}removeFromCell(e,t){let o=this.grid.get(e);if(!o)return void console.error(Qk(e,t));let i=o.filter(r=>r.id!==t);this.grid.set(e,i)}updateInCell(e,t){let o=this.grid.get(e);if(!o)return void console.error(Kk(e,t.id));let i=o.filter(({id:r})=>r!==t.id);this.grid.set(e,[...i,t])}addToGrid(e){let t=this.getCells(e);for(let o of t)this.addToCell(o,e);this.idToCells.set(e.id,t),this.idToRect.set(e.id,e)}updateInGrid(e){let t=this.getCells(e),o=new Set(t),i=new Set(this.idToCells.get(e.id)||[]),r=i.difference(o),s=o.difference(i),a=o.intersection(i);for(let d of r)this.removeFromCell(d,e.id);for(let d of s)this.addToCell(d,e);for(let d of a)this.updateInCell(d,e);this.idToRect.set(e.id,e),this.idToCells.set(e.id,t)}removeFromGrid(e){let t=this.idToCells.get(e);if(t){for(let o of t){this.removeFromCell(o,e);let i=this.grid.get(o);i&&i.length===0&&this.grid.delete(o)}this.idToCells.delete(e),this.idToRect.delete(e)}}getCellsRange(e,t){return[Math.floor(e/this.cellSize),Math.floor((e+t)/this.cellSize)]}getCells(e){let[t,o]=this.getCellsRange(e.x,e.width),[i,r]=this.getCellsRange(e.y,e.height),s=[];for(let a=t;a<=o;a++)for(let d=i;d<=r;d++)s.push(`${a}-${d}`);return s}},zg=(n,e)=>{if(yh(n)&&!n.size||yh(e)&&!e.size)return!1;let t=zC(n),o=zC(e);if(t.length===0||o.length===0)return!1;let i=[...$C(t),...$C(o)];for(let r of i){let s=UC(t,r),a=UC(o,r);if(!Jk(s,a))return!1}return!0},yh=n=>"position"in n,zC=n=>yh(n)?n.size?zp(We(n),n.angle??0):[]:zp(n,n.angle??0),UC=(n,e)=>{let t=n[0].x*e.x+n[0].y*e.y,o=t;for(let i=1;i<n.length;i++){let r=n[i].x*e.x+n[i].y*e.y;r<t&&(t=r),r>o&&(o=r)}return{min:t,max:o}},Jk=(n,e)=>!(n.max<e.min||e.max<n.min),$C=n=>{let e=[];for(let t=0;t<n.length;t++){let o=n[t],i=n[(t+1)%n.length],r={x:i.x-o.x,y:i.y-o.y},s=Math.sqrt(r.x*r.x+r.y*r.y);s>0&&e.push({x:-r.y/s,y:r.x/s})}return e},Ug=(n,e,t)=>{let o=$d(e,t),i=n.spatialHash.queryIds(o),r=[];for(let s of i){let a=n.modelLookup.getNodeById(s);a&&zg(o,a)&&r.push(a)}return r},eP=(n,e,t)=>Ug(n,e,t).sort((o,i)=>Hp(We(o),$d(e,1))-Hp(We(i),$d(e,1)))[0]||null,tP=(n,e,t)=>{let o=new Map;Ug(n,e,t).forEach(s=>{o.set(s,s.measuredPorts||[])});let i=1/0,r=null;for(let[s,a]of o.entries())for(let d of a){let{x:c,y:l}=We(d),u=Hp(We({size:d.size,position:{x:c+s.position.x,y:l+s.position.y}}),$d(e,1));u<=t&&u<i&&(i=u,r=d)}return r},nP=(n,e,t=!0)=>{let o=n.spatialHash.queryIds(e),i=[];for(let r of o){let s=n.modelLookup.getNodeById(r);s&&zg(e,s)&&i.push(s)}return t?i:i.filter(r=>{let s=We(r);return zN(e,s)})};function oP(n,e){let t=typeof e=="string",o=t?n.modelLookup.getNodeById(e):e;if(!o)return[];let i=t?o.measuredBounds??jo(o):jo(o),r=n.spatialHash.queryIds(i),s=[];for(let a of r){if(a===o.id)continue;let d=n.modelLookup.getNodeById(a);d&&zg(o,d)&&s.push(d)}return s}function iP(n,e){return{emit:(t,...o)=>M(null,null,function*(){if(n.isAborted())throw new Error("Cannot emit on rolled back transaction");yield e.commandHandler.emitInternal(t,!0,...o)}),abort:()=>{n.abort()},savepoint:t=>{if(n.isAborted())throw new Error("Cannot create savepoint on rolled back transaction");n.addSavepoint(t)},rollbackTo:t=>{if(n.isAborted())throw new Error("Cannot rollback to savepoint on already rolled back transaction");n.rollback(t)},transaction:(t,o)=>e.transactionManager.transaction(t,o),hasChanges:()=>n.hasChanges(),isDirty:()=>!n.isAborted()&&n.hasChanges(),getQueuedUpdates:()=>n.getQueue()}}var bh=class{name;parent;flowCore;queue=[];savepoints=new Map;_isAborted=!1;children=[];_context=null;constructor(e,t,o){this.name=e,this.parent=t,this.flowCore=o,t&&t.children.push(this)}get context(){return this._context||(this._context=iP(this,this.flowCore)),this._context}isAborted(){return this._isAborted}abort(){this._isAborted||(this._isAborted=!0,this.queue=[],this.savepoints.clear(),this.children.forEach(e=>e.abort()))}addSavepoint(e){this.ensureNotAborted(),this.savepoints.set(e,this.queue.length)}rollback(e){if(this.ensureNotAborted(),e===void 0)return this.queue=[],this.savepoints.clear(),void this.children.forEach(i=>i.rollback());let t=this.savepoints.get(e);if(t===void 0)throw new Error(`Savepoint '${e}' not found`);this.queue=this.queue.slice(0,t);let o=[];this.savepoints.forEach((i,r)=>{i>t&&o.push(r)}),o.forEach(i=>this.savepoints.delete(i)),this.children.forEach(i=>i.rollback())}commit(){this.ensureNotAborted(),this.parent&&this.mergeToParent()}canCommit(){return!this._isAborted&&this.hasChanges()}ensureNotAborted(){if(this._isAborted)throw new Error("Cannot perform operation on aborted transaction")}hasChanges(){return this.queue.length>0||this.children.some(e=>e.hasChanges())}getQueue(){return[...this.queue]}queueUpdate(e,t){this.ensureNotAborted(),this.queue.push({update:e,actionTypes:t})}getState(){return{name:this.name,queue:[...this.queue],savepoints:new Map(this.savepoints),isAborted:this._isAborted,parent:this.parent}}mergeToParent(){this.ensureNotAborted(),this.parent&&this.queue.forEach(e=>{this.parent.queueUpdate(e.update,e.actionTypes)})}getMergedUpdates(){if(this._isAborted)return{mergedUpdate:{},commandsCount:0,actionTypes:[]};let e=this.queue.length,t=new Set([this.name]),o=[],i=[],r=[],s=[],a=[],d=[],c=[];for(let{update:u,actionTypes:h}of this.queue)h.forEach(p=>t.add(p)),u.nodesToAdd?.length&&o.push(u.nodesToAdd),u.nodesToRemove?.length&&i.push(u.nodesToRemove),u.nodesToUpdate?.length&&r.push(u.nodesToUpdate),u.edgesToAdd?.length&&s.push(u.edgesToAdd),u.edgesToRemove?.length&&a.push(u.edgesToRemove),u.edgesToUpdate?.length&&d.push(u.edgesToUpdate),u.metadataUpdate&&c.push(u.metadataUpdate);let l={};return o.length>0&&(l.nodesToAdd=o.flat()),i.length>0&&(l.nodesToRemove=i.flat()),r.length>0&&(l.nodesToUpdate=r.flat()),s.length>0&&(l.edgesToAdd=s.flat()),a.length>0&&(l.edgesToRemove=a.flat()),d.length>0&&(l.edgesToUpdate=d.flat()),c.length>0&&(l.metadataUpdate=Object.assign({},...c)),{mergedUpdate:l,commandsCount:e,actionTypes:[...t]}}},_h=class{flowCore;transactionStack=[];pendingOptions=null;constructor(e){this.flowCore=e}transaction(e,t,o){return M(this,null,function*(){let[i,r,s]=this.parseArgs(e,t,o),a=this.getCurrentTransaction(),d=new bh(i,a,this.flowCore);!a&&s&&(this.pendingOptions=s),this.transactionStack.push(d);try{if(yield r(d.context),!d.isAborted()){if(!a){let{mergedUpdate:c,commandsCount:l,actionTypes:u}=d.getMergedUpdates();return{results:c,commandsCount:l,actionTypes:u}}d.mergeToParent()}return{results:{},commandsCount:0,actionTypes:[]}}catch(c){throw d.rollback(),c}finally{this.transactionStack.pop(),a||(this.pendingOptions=null)}})}getCurrentOptions(){return this.pendingOptions}queueUpdate(e,t){let o=this.getCurrentTransaction();if(!o)throw new Error("No active transaction. Cannot queue update.");o.queueUpdate(e,t)}isActive(){return this.transactionStack.length>0}getTransactionName(){let e=this.getCurrentTransaction();return e?e.getState().name:null}getCurrentTransaction(){return this.transactionStack[this.transactionStack.length-1]||null}parseArgs(e,t,o){if(typeof e=="function")return["transaction",e,t];if(typeof t!="function")throw new Error("Callback is required when transaction name is provided");return[e,t,o]}};var Ch=class{initializedPorts=new Map;initializedLabels=new Map;nodeSizes=new Map;portRects=new Map;edgeLabelSizes=new Map;portsToMeasure=new Set;labelsToMeasure=new Set;nodesToMeasure=new Set;measuredNodes=new Set;measuredPorts=new Set;measuredLabels=new Set;trackNodeMeasurement(e,t){this.nodeSizes.set(e,t),vt(t)&&this.measuredNodes.add(e)}trackPortMeasurement(e,t,o,i){let r=this.getCompoundId(e,t);this.portRects.set(r,{size:o,position:i}),vt(o)&&qt(i)&&this.measuredPorts.add(r)}trackLabelMeasurement(e,t,o){let i=this.getCompoundId(e,t);this.edgeLabelSizes.set(i,o),vt(o)&&this.measuredLabels.add(i)}addPort(e,t){let o=this.getCompoundId(e,t.id);this.initializedPorts.set(o,t),this.portsToMeasure.add(o)}addLabel(e,t){let o=this.getCompoundId(e,t.id);this.initializedLabels.set(o,t),this.labelsToMeasure.add(o)}collectAlreadyMeasuredItems(e,t){for(let o of e){this.nodesToMeasure.add(o.id),vt(o.size)&&this.measuredNodes.add(o.id);for(let i of o.measuredPorts??[])if(this.trackPreExistingPort(o.id,i.id),vt(i.size)&&qt(i.position)){let r=this.getCompoundId(o.id,i.id);this.measuredPorts.add(r)}}for(let o of t)for(let i of o.measuredLabels??[])if(this.trackPreExistingLabel(o.id,i.id),vt(i.size)){let r=this.getCompoundId(o.id,i.id);this.measuredLabels.add(r)}}allEntitiesHaveMeasurements(){return[...this.nodesToMeasure].every(e=>this.measuredNodes.has(e))&&this.measuredPorts.size===this.portsToMeasure.size&&this.measuredLabels.size===this.labelsToMeasure.size}applyToDiagramState(e){let c=e.getState(),{nodes:t,edges:o}=c,i=qo(c,["nodes","edges"]),r=this.groupPortsByNode(),s=this.groupLabelsByEdge(),a=this.updateNodes(t,r),d=this.updateEdges(o,s);e.setState(y(g({},i),{nodes:a,edges:d}))}getCompoundId(e,t){return`${e}->${t}`}splitCompoundId(e){let[t,o]=e.split("->");return{entityId:t,itemId:o}}trackPreExistingPort(e,t){let o=this.getCompoundId(e,t);this.portsToMeasure.add(o)}trackPreExistingLabel(e,t){let o=this.getCompoundId(e,t);this.labelsToMeasure.add(o)}groupPortsByNode(){let e=new Map;for(let[t,o]of this.initializedPorts.entries()){let{entityId:i}=this.splitCompoundId(t),r=e.get(i)||[];r.push(o),e.set(i,r)}return e}groupLabelsByEdge(){let e=new Map;for(let[t,o]of this.initializedLabels.entries()){let{entityId:i}=this.splitCompoundId(t),r=e.get(i)||[];r.push(o),e.set(i,r)}return e}updateNodes(e,t){return e.map(o=>{let i=this.nodeSizes.get(o.id)||o.size,r=t.get(o.id),s=new Map;if(o.measuredPorts)for(let d of o.measuredPorts)s.set(d.id,d);if(r)for(let d of r)s.set(d.id,d);let a=s.size>0?Array.from(s.values()):void 0;return a&&(a=a.map(d=>{let c=this.getCompoundId(o.id,d.id),l=this.portRects.get(c);return l?y(g({},d),{size:l.size,position:l.position}):d})),y(g({},o),{size:i,measuredPorts:a})})}updateEdges(e,t){return e.map(o=>{let i=t.get(o.id),r=new Map;if(o.measuredLabels)for(let a of o.measuredLabels)r.set(a.id,a);if(i)for(let a of i)r.set(a.id,a);let s=r.size>0?Array.from(r.values()):void 0;return s&&(s=s.map(a=>{let d=this.getCompoundId(o.id,a.id),c=this.edgeLabelSizes.get(d);return c?y(g({},a),{size:c}):a})),y(g({},o),{measuredLabels:s})})}},Dh=class{queue=[];isProcessing=!1;get isFinishing(){return this.isProcessing}get length(){return this.queue.length}startFinishing(){this.isProcessing=!0}enqueue(e){this.queue.push(e)}processAll(e){if(this.queue.length!==0){for(let t of this.queue)switch(t.method){case"addPort":e.addPort(...t.args);break;case"addEdgeLabel":e.addEdgeLabel(...t.args);break;case"applyNodeSize":e.applyNodeSize(...t.args);break;case"applyPortsSizesAndPositions":e.applyPortsSizesAndPositions(...t.args);break;case"applyEdgeLabelSize":e.applyEdgeLabelSize(...t.args)}this.queue=[]}}},qd=class{shouldWait;stabilityDelay;stabilityTimeout=null;stabilityPromise;resolveStability=()=>null;eventCount=0;constructor(e,t){this.shouldWait=e,this.stabilityDelay=t,this.stabilityPromise=new Promise(o=>{this.resolveStability=o})}notify(){this.eventCount++,this.resetStabilityTimer()}waitForStability(){return this.shouldWait?this.eventCount===0&&this.resetStabilityTimer():this.resolveStability(),this.stabilityPromise}resetStabilityTimer(){this.stabilityTimeout&&clearTimeout(this.stabilityTimeout),this.stabilityTimeout=setTimeout(()=>{this.resolveStability(),this.stabilityTimeout=null},this.stabilityDelay)}};var rP=n=>`[ngDiagram] Initialization stabilization failed.

Error: ${n instanceof Error?n.message:String(n)}

The diagram will force-finish initialization without waiting for all measurements.
This may result in:
  \u2022 Ports without measured positions/sizes
  \u2022 Edge labels without measured sizes
  \u2022 Incorrect initial edge routing

This usually indicates:
  \u2022 Resize observers not functioning properly
  \u2022 Port/label elements not rendering
  \u2022 Very slow initial render (> 50ms between additions)

The diagram will still be functional, but initial layout may be incomplete.

Documentation: https://www.ngdiagram.dev/docs/guides/model-initialization/
`,wh=class{flowCore;isInitialized=!1;entitiesStabilized=!1;portStabilityDetector;labelStabilityDetector;initState;lateArrivalQueue;onCompleteCallback;measurementTimeout=null;constructor(e){this.flowCore=e,this.initState=new Ch,this.lateArrivalQueue=new Dh}start(e,t,o){this.onCompleteCallback=o;let i=t.length>0;this.portStabilityDetector=new qd(e.length>0,50),this.labelStabilityDetector=new qd(i,50),this.initState.collectAlreadyMeasuredItems(e,t),Promise.all([this.portStabilityDetector.waitForStability(),this.labelStabilityDetector.waitForStability()]).then(()=>{this.entitiesStabilized=!0,this.startMeasurementTimeout(),this.tryFinish()}).catch(r=>{console.error(rP(r)),this.forceFinish()})}applyNodeSize(e,t){this.lateArrivalQueue.isFinishing?this.lateArrivalQueue.enqueue({method:"applyNodeSize",args:[e,t]}):(this.initState.trackNodeMeasurement(e,t),this.tryFinish())}addPort(e,t){this.lateArrivalQueue.isFinishing?this.lateArrivalQueue.enqueue({method:"addPort",args:[e,t]}):(this.initState.addPort(e,t),this.portStabilityDetector.notify())}applyPortsSizesAndPositions(e,t){if(this.lateArrivalQueue.isFinishing)this.lateArrivalQueue.enqueue({method:"applyPortsSizesAndPositions",args:[e,t]});else{for(let{id:o,size:i,position:r}of t)i&&r&&this.initState.trackPortMeasurement(e,o,i,r);this.tryFinish()}}addEdgeLabel(e,t){this.lateArrivalQueue.isFinishing?this.lateArrivalQueue.enqueue({method:"addEdgeLabel",args:[e,t]}):(this.initState.addLabel(e,t),this.labelStabilityDetector.notify())}applyEdgeLabelSize(e,t,o){this.lateArrivalQueue.isFinishing?this.lateArrivalQueue.enqueue({method:"applyEdgeLabelSize",args:[e,t,o]}):(this.initState.trackLabelMeasurement(e,t,o),this.tryFinish())}tryFinish(){this.lateArrivalQueue.isFinishing||this.isInitialized||this.entitiesStabilized&&this.initState.allEntitiesHaveMeasurements()&&this.finish()}finish(){return M(this,null,function*(){this.clearMeasurementTimeout(),this.lateArrivalQueue.startFinishing(),this.initState.applyToDiagramState(this.flowCore),this.onCompleteCallback&&(yield this.onCompleteCallback()),this.isInitialized=!0,this.lateArrivalQueue.processAll(this.flowCore.internalUpdater)})}forceFinish(){this.finish()}startMeasurementTimeout(){this.measurementTimeout=setTimeout(()=>{this.isInitialized||(console.warn("[InitUpdater] Measurement timeout reached. Some entities may not be measurable (e.g., display: none).",{nodes:{expected:this.initState.nodesToMeasure.size,measured:this.initState.measuredNodes.size},ports:{expected:this.initState.portsToMeasure.size,measured:this.initState.measuredPorts.size},labels:{expected:this.initState.labelsToMeasure.size,measured:this.initState.measuredLabels.size}}),this.forceFinish())},2e3)}clearMeasurementTimeout(){this.measurementTimeout!==null&&(clearTimeout(this.measurementTimeout),this.measurementTimeout=null)}},Eh=class{flowCore;constructor(e){this.flowCore=e}addPort(e,t){this.flowCore.portBatchProcessor.processAdd(e,t,(o,i)=>{this.flowCore.commandHandler.emit("addPorts",{nodeId:o,ports:i})})}updatePorts(e,t){for(let{id:o,size:i,position:r}of t)this.flowCore.portBatchProcessor.processUpdate(e,{portId:o,portChanges:{size:i,position:r}},(s,a)=>{this.flowCore.commandHandler.emit("updatePorts",{nodeId:s,ports:a})})}deletePort(e,t){this.flowCore.portBatchProcessor.processDelete(e,t,(o,i)=>{this.flowCore.commandHandler.emit("deletePorts",{nodeId:o,portIds:i})})}},Mh=class{flowCore;constructor(e){this.flowCore=e}addPort(e,t){this.isPortAlreadyMeasured(e,t.id)||this.flowCore.portBatchProcessor.processAddBatched(e,t,o=>{this.flowCore.commandHandler.emit("addPortsBulk",{additions:o})})}updatePorts(e,t){for(let{id:o,size:i,position:r}of t)this.flowCore.portBatchProcessor.processUpdateBatched(e,{portId:o,portChanges:{size:i,position:r}},s=>{this.flowCore.commandHandler.emit("updatePortsBulk",{updates:s})})}deletePort(e,t){this.flowCore.portBatchProcessor.processDeleteBatched(e,t,o=>{this.flowCore.commandHandler.emit("deletePortsBulk",{deletions:o})})}isPortAlreadyMeasured(e,t){let o=this.flowCore.getNodeById(e),i=o?.measuredPorts?.find(r=>r.id===t);return!(!i?.size||!i?.position)}},Sh=class{flowCore;portUpdateStrategy;constructor(e){this.flowCore=e,this.portUpdateStrategy=this.flowCore.isVirtualizationActive?new Mh(e):new Eh(e)}applyNodeSize(e,t){let o=this.flowCore.getNodeById(e);!o||this.isResizing()||this.hasSameSize(o,t)||this.flowCore.commandHandler.emit("resizeNode",{id:e,size:t})}isResizing(){return this.flowCore.actionStateManager.isResizing()}hasSameSize(e,t){return zd(We(e),We({size:t}))}addPort(e,t){this.portUpdateStrategy.addPort(e,t)}deletePort(e,t){this.portUpdateStrategy.deletePort(e,t)}applyPortsSizesAndPositions(e,t){let o=this.flowCore.getNodeById(e);if(!o)return;let i=this.getPortsToUpdate(o,t);i.length!==0&&this.portUpdateStrategy.updatePorts(e,i)}addEdgeLabel(e,t){this.flowCore.labelBatchProcessor.processAdd(e,t,(o,i)=>{this.flowCore.commandHandler.emit("addEdgeLabels",{edgeId:o,labels:i})})}applyEdgeLabelSize(e,t,o){let i=this.findEdgeLabel(e,t);i&&!this.hasSameLabelSize(i,o)&&this.flowCore.labelBatchProcessor.processUpdate(e,{labelId:t,labelChanges:{size:o}},(r,s)=>{this.flowCore.commandHandler.emit("updateEdgeLabels",{edgeId:r,labelUpdates:s})})}findEdgeLabel(e,t){return this.flowCore.getEdgeById(e)?.measuredLabels?.find(i=>i.id===t)}hasSameLabelSize(e,t){return zd(We({size:e.size}),We({size:t}))}getPortsToUpdate(e,t){let o=this.buildMeasuredPortsMap(e);return t.filter(i=>this.hasPortChanged(i,o))}buildMeasuredPortsMap(e){let t=new Map;for(let{id:o,size:i,position:r}of e.measuredPorts??[])t.set(o,{size:i,position:r});return t}hasPortChanged(e,t){let o=t.get(e.id);return!!o&&!zd(We(o),We({size:e.size,position:e.position}))}},Ih=class{renderer;inputEventsRouter;environment;_model;_config;initUpdater;internalUpdater;updateSemaphore=new Up(1);commandHandler;middlewareManager;spatialHash;modelLookup;transactionManager;portBatchProcessor;labelBatchProcessor;actionStateManager;edgeRoutingManager;eventManager;shortcutManager;measurementTracker;directRenderStrategy;virtualizedRenderStrategy;getFlowOffset;getViewportSize;constructor(e,t,o,i,r,s,a,d={}){this.renderer=t,this.inputEventsRouter=o,this.environment=i,this._model=e,this._config=_k(d,this),this.environment=i,this.commandHandler=new $p(this),this.spatialHash=new vh,this.initUpdater=new wh(this),this.internalUpdater=new Sh(this),this.modelLookup=new dh(this),this.eventManager=new jp,this.actionStateManager=new Rp(this.eventManager),this.directRenderStrategy=new uh(this),this.virtualizedRenderStrategy=new mh(this),this.middlewareManager=new ah(this,r),this.transactionManager=new _h(this),this.portBatchProcessor=new ch,this.labelBatchProcessor=new qp,this.measurementTracker=new Zp,this.edgeRoutingManager=new Vp(this.config.edgeRouting.defaultRouting,()=>this.config.edgeRouting||{}),this.getFlowOffset=s||(()=>({x:0,y:0})),this.getViewportSize=a||(()=>({width:0,height:0})),this.shortcutManager=new Gp(this),this.inputEventsRouter.registerDefaultCallbacks(this),this.init()}destroy(){this.virtualizedRenderStrategy.destroy(),this.eventManager.offAll(),this.model.destroy()}init(){this.initializeViewportSize(),this.renderStrategy.init()}initializeViewportSize(){let{width:e,height:t}=this.getViewportSize();if(e>0&&t>0){let o=this.model.getMetadata();this.model.updateMetadata(y(g({},o),{viewport:y(g({},o.viewport),{width:e,height:t})}))}}get model(){return this._model}getEnvironment(){return this.environment}get config(){return this._config}updateConfig(e){this._config=Vg(this._config,e)}registerMiddleware(e){return this.middlewareManager.register(e)}unregisterMiddleware(e){this.middlewareManager.unregister(e)}getState(){return{nodes:this.model.getNodes(),edges:this.model.getEdges(),metadata:this.model.getMetadata()}}get renderStrategy(){return this.isVirtualizationActive?this.virtualizedRenderStrategy:this.directRenderStrategy}setState(e){this.model.updateNodes(e.nodes),this.model.updateEdges(e.edges),this.model.updateMetadata(e.metadata),this.modelLookup.desynchronize()}transaction(e,t,o){return M(this,null,function*(){let i,r;if(typeof e=="function")r=t,i=yield this.transactionManager.transaction(e,r??{});else{let s=t;if(!s)throw new Error("Callback is required when transaction name is provided");r=o,i=yield this.transactionManager.transaction(e,s,r??{})}return i.commandsCount>0&&(r?.waitForMeasurements&&this.measurementTracker.trackStateUpdate(i.results,r._measurementDebounceTimeout,r._measurementInitialTimeout),yield this.applyUpdate(i.results,i.actionTypes)),r?.waitForMeasurements&&(yield this.measurementTracker.waitForMeasurements()),i})}applyUpdate(e,t){return M(this,null,function*(){let o=Array.isArray(t)?t:[t];if(this.transactionManager.isActive())this.transactionManager.queueUpdate(e,o);else{yield this.updateSemaphore.acquire();try{let i=this.getState(),r=yield this.middlewareManager.execute(i,e,o);r?(this.setState(r),this.eventManager.flushDeferredEmits()):this.eventManager.clearDeferredEmits()}finally{this.updateSemaphore.release()}}})}applyViewportOnlyUpdate(e){let t=this.model.getMetadata(),o=t.viewport,i=g(g({},o),e);i.x===o.x&&i.y===o.y&&i.scale===o.scale||(this.model.updateMetadata(y(g({},t),{viewport:i})),this.eventManager.emit("viewportChanged",{viewport:i,previousViewport:o}))}clientToFlowPosition(e){let{x:t,y:o,scale:i}=this.model.getMetadata().viewport,{x:r,y:s}=this.getFlowOffset();return{x:(e.x-t-r)/i,y:(e.y-o-s)/i}}flowToClientPosition(e){let{x:t,y:o,scale:i}=this.model.getMetadata().viewport,{x:r,y:s}=this.getFlowOffset();return{x:e.x*i+t+r,y:e.y*i+o+s}}clientToFlowViewportPosition(e){let{x:t,y:o}=this.getFlowOffset();return{x:e.x-t,y:e.y-o}}getNodeById(e){return this.modelLookup.getNodeById(e)}getEdgeById(e){return this.modelLookup.getEdgeById(e)}getNodesInRange(e,t){return Ug(this,e,t)}getNearestNodeInRange(e,t){return eP(this,e,t)}getNearestPortInRange(e,t){return tP(this,e,t)}getConnectedEdges(e){return this.modelLookup.getConnectedEdges(e)}getConnectedNodes(e){return this.modelLookup.getConnectedNodes(e)}getNodeEnds(e){return this.modelLookup.getNodeEnds(e)}getChildren(e){return this.modelLookup.getChildren(e)}getChildrenNested(e){return this.modelLookup.getAllDescendants(e)}isNestedChild(e,t){return this.modelLookup.isNodeDescendantOfGroup(e,t)}getParentHierarchy(e){return this.modelLookup.getParentChain(e)}getOverlappingNodes(e){return oP(this,e)}isNodeCurrentlyRendered(e){return this.renderStrategy.isNodeRendered(e)}getScale(){return this.model.getMetadata().viewport.scale}getViewport(){return this.model.getMetadata().viewport}get updater(){return this.initUpdater.isInitialized?this.internalUpdater:this.initUpdater}get isInitialized(){return this.initUpdater.isInitialized}get isVirtualizationActive(){return this.config.virtualization.enabled}setDebugMode(e){e?(window.flowCore=this,this.middlewareManager.isRegistered(Ud.name)||this.registerMiddleware(Ud)):(delete window.flowCore,this.unregisterMiddleware(Ud.name))}},Pe=class{flow;constructor(e){this.flow=e}},xh=class extends Pe{startPoint;isBoxSelecting=!1;handle(e){switch(e.phase){case"start":this.startPoint=e.lastInputPoint,this.isBoxSelecting=!0;break;case"continue":if(!this.isBoxSelecting||!this.flow.config.boxSelection.realtime)break;this.boxSelect(e);break;case"end":this.boxSelect(e),this.startPoint=void 0,this.isBoxSelecting=!1}}boxSelect(e){if(!this.startPoint)return;let t=e.lastInputPoint,{x:o,y:i}=this.flow.clientToFlowPosition(this.startPoint),{x:r,y:s}=this.flow.clientToFlowPosition(t),a={x:Math.min(o,r),y:Math.min(i,s),width:Math.abs(r-o),height:Math.abs(s-i)},d=this.flow.model.getEdges(),c=new Set(nP(this.flow,a,this.flow.config.boxSelection.partialInclusion).map(u=>u.id)),l=d.filter(u=>c.has(u.source)&&c.has(u.target)).map(u=>u.id);this.flow.commandHandler.emit("select",{nodeIds:[...c],edgeIds:l,multiSelection:!1})}},Th=class extends Pe{handle(){this.flow.commandHandler.emit("copy")}},Nh=class extends Pe{handle(){this.flow.commandHandler.emit("cut")}},kh=class extends Pe{handle(){this.flow.commandHandler.emit("deleteSelection")}},sP=["top","bottom","left","right"],aP=n=>`[ngDiagram] Unknown keyboard move direction: "${n}"

Valid directions are: ${sP.map(e=>`'${e}'`).join(", ")}

This indicates a programming error. Check keyboard shortcut configuration.

Documentation: https://www.ngdiagram.dev/docs/guides/shortcut-manager/
`,GC={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},Ph=class extends Pe{handle(e){let t=this.flow.modelLookup.getSelectedNodesWithChildren({directOnly:!1}).filter(r=>r.draggable??!0);if(t.length===0)return;let o=this.getRootNodes(t),i=this.getDelta(e.direction,o);this.flow.commandHandler.emit("moveNodesBy",{nodes:t,delta:i}),this.flow.config.viewportPanningEnabled&&this.panViewportIfNeeded(e.direction,t,i)}getRootNodes(e){let t=new Set(e.map(o=>o.id));return e.filter(o=>o.groupId==null||!t.has(o.groupId))}getDelta(e,t){let{computeSnapForNodeDrag:o,defaultDragSnap:i}=this.flow.config.snapping,r=t.reduce((a,d)=>{let{width:c,height:l}=o(d)??i;return{width:Math.max(a.width,c),height:Math.max(a.height,l)}},{width:0,height:0}),s=GC[e];if(!s)throw new Error(aP(e));return{x:s.x*r.width,y:s.y*r.height}}panViewportIfNeeded(e,t,o){let i=this.calculatePanAmount(e,t,o);i>0&&this.emitViewportPan(e,i)}calculatePanAmount(e,t,o){let{viewport:i}=this.flow.model.getMetadata();if(!i.width||!i.height)return 0;let r=this.getViewportBounds(i.x,i.y,i.width,i.height,i.scale);return t.reduce((s,a)=>{let d=this.calculateNodeOverflow(a,o,e,r);return Math.max(s,d)},0)}getViewportBounds(e,t,o,i,r){let{edgePanningThreshold:s}=this.flow.config.selectionMoving,a=s/r;return{left:-e/r+a,top:-t/r+a,right:(-e+o)/r-a,bottom:(-t+i)/r-a}}calculateNodeOverflow(e,t,o,i){let r=this.getSnappedPosition(e,t),s=this.getNodeBounds(e,r);switch(o){case"left":return i.left-s.left;case"right":return s.right-i.right;case"top":return i.top-s.top;case"bottom":return s.bottom-i.bottom}}getNodeBounds(e,t){let o=jg({x:t.x,y:t.y,width:e.size?.width??100,height:e.size?.height??50},e.angle??0);return{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height}}getSnappedPosition(e,t){let{shouldSnapDragForNode:o,computeSnapForNodeDrag:i,defaultDragSnap:r}=this.flow.config.snapping,s={x:e.position.x+t.x,y:e.position.y+t.y};return o(e)?Ve.snapPoint(s,i(e)??r):s}emitViewportPan(e,t){let{viewport:o}=this.flow.model.getMetadata(),i=t*o.scale,r=GC[e];this.flow.commandHandler.emit("moveViewportBy",{x:r.x===0?0:-r.x*i,y:r.y===0?0:-r.y*i})}},Ah=class extends Pe{handle(e){let t=0,o=0;switch(e.direction){case"top":o=-10;break;case"bottom":o=10;break;case"left":t=-10;break;case"right":t=10;break;default:return}this.flow.commandHandler.emit("moveViewportBy",{x:t,y:o})}},dP=n=>`[ngDiagram] Linking event missing target node.

Event details:
  \u2022 Phase: ${n.phase}
  \u2022 Port ID: ${n.portId}
  \u2022 Target type: ${n.targetType}
  \u2022 Pointer position: (${n.lastInputPoint.x}, ${n.lastInputPoint.y})

This indicates a programming error. Linking start events must have a target node.

Documentation: https://www.ngdiagram.dev/docs/guides/edges/edges/
`,Rh=class extends Pe{handle(e){switch(e.phase){case"start":{let t=e.target?.id;if(!t)throw new Error(dP(e));this.flow.actionStateManager.linking={sourceNodeId:t,sourcePortId:e.portId,temporaryEdge:null},this.flow.commandHandler.emit("startLinking",{source:t,sourcePort:e.portId});break}case"continue":{if(!this.flow.actionStateManager.isLinking())break;let t=this.flow.clientToFlowPosition(e.lastInputPoint);this.flow.config.viewportPanningEnabled&&e.panningForce&&this.flow.commandHandler.emit("moveViewportBy",{x:e.panningForce.x,y:e.panningForce.y}),this.flow.commandHandler.emit("moveTemporaryEdge",{position:t});break}case"end":{if(!this.flow.actionStateManager.isLinking())break;let t=this.flow.clientToFlowPosition(e.lastInputPoint);this.flow.commandHandler.emit("finishLinking",{position:t}),this.flow.actionStateManager.clearLinking();break}}}},Oh=class extends Pe{handle(e){let{data:t,lastInputPoint:o}=e;this.flow.commandHandler.emit("paletteDropNode",{node:y(g({},t),{id:this.flow.config.computeNodeId(),position:this.flow.clientToFlowPosition({x:o.x,y:o.y})})})}},Fh=class extends Pe{lastPoint;handle(e){switch(e.phase){case"start":this.lastPoint=e.lastInputPoint,this.flow.actionStateManager.panning={active:!0};break;case"continue":if(!this.flow.actionStateManager.isPanning()||!this.lastPoint)break;this.flow.commandHandler.emit("moveViewportBy",{x:e.lastInputPoint.x-this.lastPoint.x,y:e.lastInputPoint.y-this.lastPoint.y}),this.lastPoint=e.lastInputPoint;break;case"end":this.lastPoint=void 0,this.flow.actionStateManager.clearPanning()}}},Lh=class extends Pe{lastPoint;accumulatedDelta={x:0,y:0};rafScheduled=!1;handle(e){switch(e.phase){case"start":this.lastPoint=e.lastInputPoint,this.accumulatedDelta={x:0,y:0},this.flow.actionStateManager.panning={active:!0};break;case"continue":{if(!this.flow.actionStateManager.isPanning()||!this.lastPoint)break;let t=e.lastInputPoint.y-this.lastPoint.y;this.accumulatedDelta.x+=e.lastInputPoint.x-this.lastPoint.x,this.accumulatedDelta.y+=t,this.lastPoint=e.lastInputPoint,this.scheduleFlush();break}case"end":this.flushDelta(),this.lastPoint=void 0,this.rafScheduled=!1,this.flow.actionStateManager.clearPanning()}}scheduleFlush(){this.rafScheduled||(this.rafScheduled=!0,requestAnimationFrame(()=>{this.flushDelta(),this.rafScheduled=!1}))}flushDelta(){let{x:e,y:t}=this.accumulatedDelta;e===0&&t===0||(this.flow.commandHandler.emit("moveViewportBy",{x:e,y:t}),this.accumulatedDelta={x:0,y:0})}};function cP(n){return n.isVirtualizationActive?new Lh(n):new Fh(n)}var Bh=class extends Pe{handle(e){this.flow.commandHandler.emit("paste",this.getPasteParameters(e))}getPasteParameters(e){return e.lastInputPoint?{position:this.flow.clientToFlowPosition(e.lastInputPoint)}:{}}};var Vh=class extends Pe{lastPointerPosition;startPoint;isMoving=!1;hasMoved=!1;handle(e){return M(this,null,function*(){switch(e.phase){case"start":{let t=this.flow.clientToFlowPosition(e.lastInputPoint);this.lastPointerPosition=t,this.startPoint=t,this.isMoving=!0,this.flow.actionStateManager.dragging={modifiers:g({},e.modifiers),accumulatedDeltas:new Map};break}case"continue":{let t=this.flow.modelLookup.getSelectedNodesWithChildren({directOnly:!1}).filter(a=>a.draggable??!0),o=this.flow.modelLookup.getSelectedNodes();if(t.length===0||!this.isMoving||!this.lastPointerPosition||!this.startPoint)return;let i=this.flow.clientToFlowPosition(e.lastInputPoint);if(!this.hasMoved){let a=i.x-this.startPoint.x,d=i.y-this.startPoint.y;Math.sqrt(a*a+d*d)>=5&&(this.hasMoved=!0)}let r=i.x-this.lastPointerPosition.x,s=i.y-this.lastPointerPosition.y;this.flow.actionStateManager.dragging&&(this.flow.actionStateManager.dragging.modifiers=g({},e.modifiers)),this.hasMoved&&(this.flow.transaction("moveNodes",a=>M(this,null,function*(){yield a.emit("moveNodesBy",{delta:{x:r,y:s},nodes:t}),this.updateGroupHighlightOnDrag(a,i,o)})),this.panDiagramOnScreenEdge(e.panningForce)),this.lastPointerPosition=i;break}case"end":{let t=this.flow.clientToFlowPosition(e.lastInputPoint);this.hasMoved&&(yield this.handleDrop(t)),this.flow.actionStateManager.clearDragging(),this.lastPointerPosition=void 0,this.startPoint=void 0,this.isMoving=!1,this.hasMoved=!1}}})}updateGroupHighlightOnDrag(e,t,o){let i=this.getTopGroupAtPoint(t),r=this.flow.actionStateManager.highlightGroup?.highlightedGroupId;i&&o.some(s=>s.groupId!==i.id)?r!==i.id&&e.emit("highlightGroup",{groupId:i.id,nodes:o}):r&&e.emit("highlightGroupClear")}getTopGroupAtPoint(e){return QN(this.flow.getNodesInRange(e,1).filter(t=>eo(t)&&!t.selected),this.flow.getState().nodes)[0]}handleDrop(e){return M(this,null,function*(){let t=this.getTopGroupAtPoint(e),o=this.flow.modelLookup.getSelectedNodes();if(t)yield this.flow.commandHandler.emit("addToGroup",{groupId:t.id,nodeIds:o.map(i=>i.id)});else for(let i of o)i.groupId===void 0||o.find(r=>r.id===i.groupId)||(yield this.flow.commandHandler.emit("removeFromGroup",{groupId:i.groupId,nodeIds:[i.id]}))})}panDiagramOnScreenEdge(e){e&&this.flow.commandHandler.emit("moveViewportBy",{x:e.x,y:e.y})}},jh=class extends Pe{handle(){this.flow.model.redo()}},lP=n=>`[ngDiagram] Resize event missing target node.

Event details:
  \u2022 Phase: ${n.phase}
  \u2022 Direction: ${n.direction}
  \u2022 Target type: ${n.targetType}
  \u2022 Pointer position: (${n.lastInputPoint.x}, ${n.lastInputPoint.y})

This indicates a programming error. Resize events must have a target node.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/resizing/`,Hh=class extends Pe{handle(e){if(!e.target)throw new Error(lP(e));let{x:t,y:o}=this.flow.clientToFlowPosition(e.lastInputPoint);switch(e.phase){case"start":{let i=this.flow.getNodeById(e.target.id);i&&i.size&&(this.flow.actionStateManager.resize={startX:t,startY:o,startWidth:i.size.width,startHeight:i.size.height,startNodePositionX:i.position.x,startNodePositionY:i.position.y,resizingNode:i});break}case"continue":{let i=this.flow.actionStateManager.resize;if(!i)break;let{startHeight:r,startNodePositionX:s,startNodePositionY:a,startWidth:d,startX:c,startY:l}=i,u=Math.round(t-c),h=Math.round(o-l),p=d,v=r,E=s,k=a;switch(e.direction){case"top-left":p=d-u,E=s+(d-p),v=r-h,k=a+(r-v);break;case"top":v=r-h,k=a+(r-v);break;case"top-right":p=d+u,v=r-h,k=a+(r-v);break;case"right":p=d+u;break;case"bottom-right":p=d+u,v=r+h;break;case"bottom":v=r+h;break;case"bottom-left":p=d-u,E=s+(d-p),v=r+h;break;case"left":p=d-u,E=s+(d-p)}let P={id:e.target.id,disableAutoSize:!0,size:{width:Math.round(p),height:Math.round(v)}};E===s&&k===a||(P.position={x:Math.round(E),y:Math.round(k)}),this.flow.commandHandler.emit("resizeNode",P);break}case"end":this.flow.actionStateManager.clearResize()}}};var uP=n=>`[ngDiagram] Rotate event missing target node.

Event details:
  \u2022 Phase: ${n.phase}
  \u2022 Target type: ${n.targetType}
  \u2022 Pointer position: (${n.lastInputPoint.x}, ${n.lastInputPoint.y})
  \u2022 Center: (${n.center.x}, ${n.center.y})

This indicates a programming error. Rotation events must have a target node.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/rotation/`,zh=class extends Pe{handle(e){let{center:t,lastInputPoint:o,target:i,phase:r}=e;if(!i)throw new Error(uP(e));let s=i?.id,a=this.flow.clientToFlowPosition(o);switch(r){case"start":{let d=this.flow.getNodeById(s);if(!d)return;let c=Ve.angleBetweenPoints(t,a);this.flow.actionStateManager.rotation={startAngle:c,initialNodeAngle:d.angle??0,nodeId:s};break}case"continue":{let d=this.flow.actionStateManager.rotation;if(!d||d.nodeId!==s||Ve.distanceBetweenPoints(a,t)<30)return;let c=Ve.angleBetweenPoints(t,a);this.flow.commandHandler.emit("rotateNodeTo",{nodeId:s,angle:d.initialNodeAngle+(c-d.startAngle)});break}case"end":this.flow.actionStateManager.clearRotation()}}},Uh=class extends Pe{handle(){this.flow.commandHandler.emit("selectAll")}},$h=class extends Pe{handle(e){let t=this.getTargetElements(e),o=this.flow.shortcutManager.matchesAction("multiSelection",{modifiers:e.modifiers});if(!t&&!o)return void this.flow.commandHandler.emit("deselectAll");if(!t)return;let{target:i}=e,r=i?.selected;r&&o?this.flow.commandHandler.emit("deselect",t):this.flow.commandHandler.emit("select",y(g({},t),{multiSelection:r||o}))}getTargetElements(e){return e.targetType!=="diagram"&&e.target?e.targetType==="node"?{nodeIds:[e.target.id],edgeIds:void 0}:e.targetType==="edge"?{nodeIds:void 0,edgeIds:[e.target.id]}:void 0:null}},Gh=class extends Pe{handle(){this.flow.model.undo()}},Wh=class extends Pe{handle(e){let{centerPoint:{x:t,y:o},zoomFactor:i}=e,{x:r,y:s,scale:a}=this.flow.getState().metadata.viewport,d=(t-r-this.flow.getFlowOffset().x)/a,c=(o-s-this.flow.getFlowOffset().y)/a;a*=i,a=Ve.clamp({min:this.flow.config.zoom.min,value:a,max:this.flow.config.zoom.max}),r+=((t-r-this.flow.getFlowOffset().x)/a-d)*a,s+=((o-s-this.flow.getFlowOffset().y)/a-c)*a,this.flow.commandHandler.emit("zoom",{x:r,y:s,scale:a})}},qh=class{handlers={};emit(e){let t=this.handlers[e.name];if(t)return t.handle(e);console.warn(`No handler registered for event: ${e.name}`)}register(e,t){this.handlers[e]=t}registerDefaultCallbacks(e){this.register("copy",new Th(e)),this.register("select",new $h(e)),this.register("selectAll",new Uh(e)),this.register("panning",cP(e)),this.register("keyboardPanning",new Ah(e)),this.register("pointerMoveSelection",new Vh(e)),this.register("keyboardMoveSelection",new Ph(e)),this.register("resize",new Hh(e)),this.register("paste",new Bh(e)),this.register("deleteSelection",new kh(e)),this.register("zoom",new Wh(e)),this.register("linking",new Rh(e)),this.register("rotate",new zh(e)),this.register("paletteDrop",new Oh(e)),this.register("cut",new Nh(e)),this.register("boxSelection",new xh(e)),this.register("undo",new Gh(e)),this.register("redo",new jh(e))}hasHandler(e){return!!this.handlers[e]}},Fi=class n{get os(){return this.detectOS()}get browser(){return this.detectBrowser()}get runtime(){return this.isClient?"web":"node"}get isClient(){return this.checkIfClient()}detectOS(){if(!this.isClient)return null;let e=window.navigator.userAgent;return/iPhone|iPad|iPod/.test(e)?"iOS":/Mac/.test(e)?"MacOS":/Win/.test(e)?"Windows":/Android/.test(e)?"Android":/Linux/.test(e)?"Linux":"Other"}detectBrowser(){if(!this.isClient)return null;let e=window.navigator.userAgent;return/OPR/.test(e)?"Opera":/Edge|Edg/.test(e)?"Edge":/Chrome/.test(e)?"Chrome":/Firefox/.test(e)?"Firefox":/Safari/.test(e)?"Safari":/Trident/.test(e)?"IE":"Unknown"}checkIfClient(){return typeof window<"u"&&typeof document<"u"}now(){return this.isClient?performance.now():Date.now()}generateId(){return this.isClient&&typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,15)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})},qe=class n extends qh{environment=f(Fi);getBaseEvent(e){return{modifiers:this.getModifiers(e),id:this.environment.generateId(),timestamp:this.environment.now()}}eventGuards={isPointerEvent:this.isPointerEvent.bind(this),isKeyboardEvent:this.isKeyboardEvent.bind(this),isWheelEvent:this.isWheelEvent.bind(this),isDomEvent:this.isDomEvent.bind(this),withPrimaryModifier:this.withPrimaryModifier.bind(this),withSecondaryModifier:this.withSecondaryModifier.bind(this),withShiftModifier:this.withShiftModifier.bind(this),withMetaModifier:this.withMetaModifier.bind(this),withoutModifiers:this.withoutModifiers.bind(this),withPrimaryButton:this.withPrimaryButton.bind(this),isArrowKeyPressed:this.isArrowKeyPressed.bind(this),isKeyPressed:this.isKeyPressed.bind(this),isKeyComboPressed:this.isKeyComboPressed.bind(this)};keysMap={arrows:{up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight"},keys:{delete:"Delete",backspace:"Backspace"}};getPrimaryModifierKey(){return this.environment.isClient&&this.environment.os==="MacOS"?"metaKey":"ctrlKey"}isPointerEvent(e){return this.environment.isClient&&e instanceof PointerEvent}isKeyboardEvent(e){return this.environment.isClient&&e instanceof KeyboardEvent}isWheelEvent(e){return this.environment.isClient&&e instanceof WheelEvent}isDomEvent(e){return this.isPointerEvent(e)||this.isKeyboardEvent(e)||this.isWheelEvent(e)}getModifiers(e){return this.isDomEvent(e)?{primary:e[this.getPrimaryModifierKey()],secondary:e.altKey,shift:e.shiftKey,meta:e.metaKey}:{primary:!1,secondary:!1,shift:!1,meta:!1}}withPrimaryModifier(e){return this.getModifiers(e).primary}withSecondaryModifier(e){return this.getModifiers(e).secondary}withShiftModifier(e){return this.getModifiers(e).shift}withMetaModifier(e){return this.getModifiers(e).meta}withoutModifiers(e){let t=this.getModifiers(e);return Object.values(t).every(o=>o===!1)}withPrimaryButton(e){return this.isPointerEvent(e)&&(e.button===void 0||e.button===0)}isArrowKeyPressed(e){return this.isKeyboardEvent(e)&&Object.values(this.keysMap.arrows).includes(e.key)}isKeyPressed(e){return t=>this.isKeyboardEvent(t)&&t.key===e}isKeyComboPressed(e,...t){return o=>{if(!this.isKeyboardEvent(o))return!1;let i=this.getModifiers(o);return!!t.every(r=>i[r])&&this.isKeyPressed(e)(o)}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac})},pn=class n{clear(){throw new Error("Method not implemented.")}isInitialized=F(!1);viewportPannable=F(!0);nodes=F([]);edges=F([]);viewport=F({x:0,y:0,scale:1});draw(e,t,o){this.nodes.set(e),this.edges.set(t),this.viewport.set(o)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},ye=class n{renderer=f(pn);inputEventsRouter=f(qe);environment=f(Fi);flowCore=null;_isInitialized=F(!1);isInitialized=this._isInitialized.asReadonly();init(e,t,o,i,r){this.flowCore=new Ih(e,this.renderer,this.inputEventsRouter,this.environment,t,o,i,r),this._isInitialized.set(!0)}destroy(){this.flowCore&&(this.flowCore.destroy(),this.flowCore=null,this._isInitialized.set(!1))}provide(){if(!this.flowCore)throw new Error(`[ngDiagram] Library engine not initialized yet.

To fix this, wait for initialization to complete using one of these methods:
  \u2022 Use "isInitialized" signal from NgDiagramService
  \u2022 Use "diagramInit" event handler passed to NgDiagramComponent

Documentation: https://www.ngdiagram.dev/docs/guides/model-initialization/#waiting-for-initialization
`);return this.flowCore}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Ho=class n{ngZone=f(q);observer=null;observedElements=new WeakMap;batchProcessor;rafId=null;pendingEntries=[];constructor(){this.ngZone.runOutsideAngular(()=>{this.observer=new ResizeObserver(e=>{this.pendingEntries.push(...e),this.rafId||(this.rafId=requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.processBatch()})}))})})}setBatchProcessor(e){this.batchProcessor=e}observe(e,t){this.observedElements.set(e,t),this.observer?.observe(e)}unobserve(e){this.observer?.unobserve(e)}getMetadata(e){return this.observedElements.get(e)}processBatch(){let e=[...this.pendingEntries];this.pendingEntries=[],this.rafId=null,e.length!==0&&this.batchProcessor&&this.ngZone.run(()=>{this.batchProcessor(e)})}ngOnDestroy(){this.rafId&&cancelAnimationFrame(this.rafId),this.observer?.disconnect()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},fP=(n,e)=>{let t=n.parentElement;for(;t;){if(t.classList.contains(e))return t;t=t.parentElement}return null},pP=n=>`[ngDiagram] Port measurement failed: Parent node not found.

Port ID: ${n}

This may occur during DOM updates or node removal.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/ports/
`,hP=n=>`[ngDiagram] Node measurement failed: Node element not found.

Node ID: ${n}

This may occur during DOM updates or node removal.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/nodes/
`,gP=(n,e)=>`[ngDiagram] Port measurement failed: Missing data-port-id attribute.

Port element ID: ${n}
Node ID: ${e}

To fix this:
  \u2022 Add [id]="port.id" to port components
  \u2022 Ensure all ports have unique IDs

Skipping this port.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/ports/
`,os=class n{flowCoreProvider=f(ye);diagramElement=f(Y);getPortData(e){let t=fP(e,"ng-diagram-node");if(!t)return console.error(pP(e.id)),null;let o=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=this.getScale();return{position:{x:(o.left-i.left)/r,y:(o.top-i.top)/r},size:{width:o.width/r,height:o.height/r}}}getNodePortsData(e){let t=this.diagramElement.nativeElement.querySelector(`.ng-diagram-node[data-node-id="${e}"]`);if(!t)return console.error(hP(e)),[];let o=t.querySelectorAll("[data-port-id]"),i=[];return o.forEach(r=>{let s=r.getAttribute("data-port-id");if(!s)return void console.error(gP(r.id,e));let a=this.getPortData(r);a&&i.push({id:s,size:a.size,position:a.position})}),i}getScale(){return this.flowCoreProvider.provide().getState().metadata.viewport.scale}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},mP=n=>`[ngDiagram] Unknown element type: "${n}"

Expected types: 'port', 'edge-label', 'node'

This indicates a programming error in the resize observer metadata configuration.
Check that elements are registered with the correct type.`,Zd=class n{flowCoreProvider=f(ye);updatePortsService=f(os);batchResizeObserver=f(Ho);isInitialized=!1;initialize(){this.isInitialized||(this.batchResizeObserver.setBatchProcessor(e=>{this.processAllResizes(e)}),this.isInitialized=!0)}processAllResizes(e){if(!this.isInitialized)return void console.warn("FlowResizeBatchProcessorService not initialized yet, skipping resize processing");let t=[],o=[],i=[];for(let r of e){let s=this.batchResizeObserver.getMetadata(r.target);if(s)switch(s.type){case"port":t.push({metadata:s,entry:r});break;case"edge-label":o.push({metadata:s,entry:r});break;case"node":i.push({metadata:s,entry:r});break;default:throw new Error(mP(s.type))}}t.length>0&&this.processPortBatch(t),o.length>0&&this.processEdgeLabelBatch(o),i.length>0&&this.processNodeBatch(i)}processPortBatch(e){let t=this.flowCoreProvider.provide(),o=new Map;for(let{entry:i,metadata:r}of e){if(r?.type!=="port")continue;let s=this.getBorderBoxSize(i);if(!s)continue;let a=this.updatePortsService.getPortData(i.target);if(!a)continue;let d=t.getNodeById(r.nodeId);if(!d)continue;let c=d.measuredPorts?.find(h=>h.id===r.portId),l=c?.size,u=c?.position;l&&!this.isSizeChanged(l,s)&&u&&!this.isPositionChanged(u,a.position)||(o.has(r.nodeId)||o.set(r.nodeId,[]),o.get(r.nodeId).push({id:r.portId,size:s,position:a.position}))}o.forEach((i,r)=>{t.updater.applyPortsSizesAndPositions(r,i)})}processNodeBatch(e){let t=this.flowCoreProvider.provide(),o=[];for(let{entry:i,metadata:r}of e){if(r?.type!=="node")continue;let s=this.getBorderBoxSize(i);if(!s)continue;let a=t.getNodeById(r.nodeId);if(!a)continue;let d=a.size;if(d){if(this.isSizeChanged(d,s)&&(t.updater.applyNodeSize(r.nodeId,s),!t.actionStateManager.isResizing())){let c=this.updatePortsService.getNodePortsData(r.nodeId);t.updater.applyPortsSizesAndPositions(r.nodeId,c)}}else o.push({id:r.nodeId,size:s})}if(o.length>0)if(t.isInitialized)t.commandHandler.emit("updateNodes",{nodes:o});else for(let{id:i,size:r}of o)t.updater.applyNodeSize(i,r)}processEdgeLabelBatch(e){let t=this.flowCoreProvider.provide(),o=new Map;for(let{entry:i,metadata:r}of e){if(r?.type!=="edge-label")continue;let s=this.getBorderBoxSize(i);if(!s)continue;let a=t.getEdgeById(r.edgeId);if(!a)continue;let d=a.measuredLabels?.find(c=>c.id===r.labelId)?.size;d&&!this.isSizeChanged(d,s)||(o.has(r.edgeId)||o.set(r.edgeId,[]),o.get(r.edgeId).push({labelId:r.labelId,size:s}))}o.forEach((i,r)=>{i.forEach(({labelId:s,size:a})=>{t.updater.applyEdgeLabelSize(r,s,a)})})}getBorderBoxSize(e){let[t]=e.borderBoxSize;return t?{width:t.inlineSize,height:t.blockSize}:null}isSizeChanged(e,t){return Math.abs(e.width-t.width)>1||Math.abs(e.height-t.height)>1}isPositionChanged(e,t){return Math.abs(e.x-t.x)>1||Math.abs(e.y-t.y)>1}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Li=class n{draggedNode=F(null);previewId=F(null);onMouseDown(e,t){this.draggedNode.set(e),this.previewId.set(t)}onDragStartFromPalette(e,t){e.dataTransfer&&e.dataTransfer?.setData("text/plain",JSON.stringify(t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},An=class{flowCoreProvider=f(ye);get flowCore(){return this.flowCoreProvider.provide()}},je=class extends An{renderer=f(pn);viewport=m(()=>this.renderer.viewport()||{x:0,y:0,scale:1});scale=m(()=>this.renderer.viewport().scale||1);get minZoom(){return this.flowCore.config.zoom.min}get maxZoom(){return this.flowCore.config.zoom.max}canZoomIn=m(()=>this.scale()<this.maxZoom);canZoomOut=m(()=>this.scale()>this.minZoom);clientToFlowPosition(e){return this.flowCore.clientToFlowPosition(e)}clientToFlowViewportPosition(e){return this.flowCore.clientToFlowViewportPosition(e)}flowToClientPosition(e){return this.flowCore.flowToClientPosition(e)}moveViewport(e,t){this.flowCore.commandHandler.emit("moveViewport",{x:e,y:t})}moveViewportBy(e,t){this.flowCore.commandHandler.emit("moveViewportBy",{x:e,y:t})}zoom(e,t){let o=this.scale()*e,i=t?.x??this.viewport().x,r=t?.y??this.viewport().y;this.flowCore.commandHandler.emit("zoom",{scale:o,x:i,y:r})}zoomToFit(e){this.flowCore.commandHandler.emit("zoomToFit",e??{})}centerOnNode(e){this.flowCore.commandHandler.emit("centerOnNode",{nodeOrId:e})}centerOnRect(e){this.flowCore.commandHandler.emit("centerOnRect",{rect:e})}},Yd=class{viewportService=f(je);viewport=this.viewportService.viewport;randomHash=Math.random().toString(36).substring(2,10);size=m(()=>{let e=this.backgroundPattern(),t=e?.nativeElement.getAttribute("staticWidth");return Number(t)*this.viewport().scale});fill=m(()=>this.viewport().scale>.3?"var(--ngd-background-dot-color)":"none");fillOpacity=m(()=>this.viewport().scale-.2);patternTransform=m(()=>{let e=this.size(),t=this.viewport();return`translate(${e?t.x%e:0},${e?t.y%e:0})`})},Zh=class n extends Yd{flowCoreService=f(ye);diagramService=f(st);backgroundPattern=Oo("backgroundPattern");dotSpacing=m(()=>{let e=this.diagramService.config().background;return this.flowCoreService.isInitialized()&&e?e.dotSpacing:0});static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275cmp=S({type:n,selectors:[["ng-diagram-dotted-background"]],viewQuery:function(t,o){t&1&&Nn(o.backgroundPattern,qC,5),t&2&&kn()},features:[le],decls:5,vars:9,consts:[["backgroundPattern",""],[1,"dotted-background"],["x","0","y","0","patternUnits","userSpaceOnUse",3,"id"],["r","1","cx","1","cy","1"],["width","100%","height","100%","x","0","y","0"]],template:function(t,o){t&1&&(Re(),G(0,"svg",1)(1,"pattern",2,0),ke(3,"circle",3),U(),ke(4,"rect",4),U()),t&2&&(b(),ln("id",md("ng-diagram-background",o.randomHash)),se("fill",o.fill())("staticWidth",o.dotSpacing())("width",o.size()||o.dotSpacing())("height",o.size()||o.dotSpacing())("patternTransform",o.patternTransform())("fill-opacity",o.fillOpacity()),b(3),se("fill","url(#ng-diagram-background"+o.randomHash+")"))},styles:["[_nghost-%COMP%]   .dotted-background[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none}"]})},Yh=class n extends Yd{flowCore=f(ye);diagramService=f(st);backgroundPattern=Oo("backgroundPattern");cellSize=m(()=>{let e={width:10,height:10};return this.flowCore.isInitialized()?this.diagramService.config().background?.cellSize??e:e});majorLinesFrequency=m(()=>{let e={x:5,y:5};return this.flowCore.isInitialized()?this.diagramService.config().background?.majorLinesFrequency??e:e});patternSize=m(()=>{let e=this.cellSize(),t=this.majorLinesFrequency();return{width:e.width*t.x,height:e.height*t.y}});patternTransform=m(()=>{let e=this.viewport(),t=e.scale??1,o=this.patternSize();return`translate(${o.width?e.x%(o.width*t):0}, ${o.height?e.y%(o.height*t):0}) scale(${t})`});gridLines(){let e=this.cellSize(),t=this.patternSize(),o=[];for(let i=0;i<=t.width;i+=e.width)o.push({x1:i,y1:0,x2:i,y2:t.height,major:i%t.width===0});for(let i=0;i<=t.height;i+=e.height)o.push({x1:0,y1:i,x2:t.width,y2:i,major:i%t.height===0});return o}static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275cmp=S({type:n,selectors:[["ng-diagram-grid-background"]],viewQuery:function(t,o){t&1&&Nn(o.backgroundPattern,qC,5),t&2&&kn()},features:[le],decls:6,vars:7,consts:[["backgroundPattern",""],[1,"grid-background"],["patternUnits","userSpaceOnUse",3,"id"],["width","100%","height","100%","x","0","y","0"]],template:function(t,o){t&1&&(Re(),G(0,"svg",1)(1,"pattern",2,0),Xe(3,cT,1,7,":svg:line",null,Gf),U(),ke(5,"rect",3),U()),t&2&&(b(),ln("id",md("ng-diagram-background",o.randomHash)),se("staticWidth",o.patternSize().width)("width",o.patternSize().width)("height",o.patternSize().height)("patternTransform",o.patternTransform()),b(2),Qe(o.gridLines()),b(2),se("fill","url(#ng-diagram-background"+o.randomHash+")"))},styles:[".grid-background[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none}.grid-background[_ngcontent-%COMP%]   [stroke][_ngcontent-%COMP%]{vector-effect:non-scaling-stroke}"]})},Xd=class n{custom=Oo("contentProjection");type=_("dots");hasContent=!1;isDottedBackground=m(()=>this.type()==="dots");ngAfterContentInit(){this.hasContent=(this.custom()?.nativeElement?.childNodes?.length??0)>0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-background"]],viewQuery:function(t,o){t&1&&Nn(o.custom,Lg,5),t&2&&kn()},inputs:{type:[1,"type"]},ngContentSelectors:et,decls:4,vars:1,consts:[["contentProjection",""],[1,"content-projection"]],template:function(t,o){t&1&&(ae(),w(0,"div",1,0),K(2),D(),X(3,fT,3,1,"div")),t&2&&(b(3),Q(o.hasContent?-1:3))},dependencies:[Zh,Yh],styles:[".content-projection[_ngcontent-%COMP%]:not(:empty){width:100%;height:100%}"]})},Bi=class n{_lastPosition={x:0,y:0,timestamp:0};updatePosition(e,t){this._lastPosition={x:e,y:t,timestamp:Date.now()}}getLastPosition(){return g({},this._lastPosition)}hasRecentPosition(){return Date.now()-this._lastPosition.timestamp<5e3}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Xh=class n{cursorPositionService=f(Bi);onMouseMove(e){this.cursorPositionService.updatePosition(e.clientX,e.clientY)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramCursorPositionTracker",""]],hostBindings:function(t,o){t&1&&x("mousemove",function(r){return o.onMouseMove(r)},Po)}})},is=class n{node=_.required();highlighted=m(()=>this.node().highlighted??!1);static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramGroupHighlighted",""]],hostVars:4,hostBindings:function(t,o){t&2&&ee("ng-diagram-group-highlight",o.highlighted())("ng-diagram-node-wrapper",!0)},inputs:{node:[1,"node"]}})};function vP(n){return!Ed(n)||typeof CSS>"u"||!CSS.supports||CSS.supports("stroke","context-stroke")}var Vi=class n{platformId=f(Sn);markers=F(new Map);useInlineMarkers=!vP(this.platformId);registerMarker(e,t){this.markers.update(o=>{let i=new Map(o);return i.set(e,t),i})}unregisterMarker(e){this.markers.update(t=>{let o=new Map(t);return o.delete(e),o})}getMarkerUrl(e,t,o){return`url(#${this.useInlineMarkers?`${e}-${t}-${o}`:e})`}cloneMarkerElement(e,t){let o=this.markers().get(e);if(!o)return null;let i=o.cloneNode(!0);return i.id=t,this.replaceContextColors(i),i}replaceContextColors(e){e.getAttribute("stroke")==="context-stroke"&&e.setAttribute("stroke","currentColor");let t=e.getAttribute("fill");t!=="context-fill"&&t!=="context-stroke"||e.setAttribute("fill","currentColor");for(let o of Array.from(e.children))this.replaceContextColors(o)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Qh=class n{el=f(Y);markerRegistry=f(Vi);destroyRef=f(ut);sourceMarkerId=_();targetMarkerId=_();edgeId=_.required();sourceMarkerRef=null;targetMarkerRef=null;constructor(){Me(()=>{this.cleanup(),this.appendMarkers()}),this.destroyRef.onDestroy(()=>this.cleanup())}appendMarkers(){let e=this.sourceMarkerId();if(e){let o=`${e}-${this.edgeId()}-source`;this.sourceMarkerRef=this.markerRegistry.cloneMarkerElement(e,o),this.sourceMarkerRef&&this.el.nativeElement.appendChild(this.sourceMarkerRef)}let t=this.targetMarkerId();if(t){let o=`${t}-${this.edgeId()}-target`;this.targetMarkerRef=this.markerRegistry.cloneMarkerElement(t,o),this.targetMarkerRef&&this.el.nativeElement.appendChild(this.targetMarkerRef)}}cleanup(){this.sourceMarkerRef?.remove(),this.targetMarkerRef?.remove(),this.sourceMarkerRef=null,this.targetMarkerRef=null}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramInlineMarkers",""]],inputs:{sourceMarkerId:[1,"sourceMarkerId"],targetMarkerId:[1,"targetMarkerId"],edgeId:[1,"edgeId"]}})},Qd=class n{canHandle(e,t){return t.config.nodeDraggingEnabled&&e.actionName.startsWith("keyboardMoveSelection")&&t.modelLookup.getSelectedNodes().length>0}createEvent(e,t){let o=this.extractDirection(e.actionName);return o?y(g({},t),{name:"keyboardMoveSelection",direction:o}):null}extractDirection(e){return e.endsWith("Up")?"top":e.endsWith("Down")?"bottom":e.endsWith("Left")?"left":e.endsWith("Right")?"right":null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Kd=class n{canHandle(e,t){return t.config.viewportPanningEnabled&&e.actionName.startsWith("keyboardPan")&&t.modelLookup.getSelectedNodes().length===0}createEvent(e,t){let o=this.extractDirection(e.actionName);return o?y(g({},t),{name:"keyboardPanning",direction:o}):null}extractDirection(e){return e.endsWith("Up")?"bottom":e.endsWith("Down")?"top":e.endsWith("Left")?"right":e.endsWith("Right")?"left":null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Jd=class n{cursorPositionTracker=f(Bi);canHandle(e){return e.actionName==="paste"}createEvent(e,t){let o=y(g({},t),{name:e.actionName});return this.cursorPositionTracker.hasRecentPosition()&&(o.lastInputPoint=this.cursorPositionTracker.getLastPosition()),o}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Kh=class n{flowCoreProvider=f(ye);inputEventsRouter=f(qe);keyboardActions=[f(Kd),f(Qd),f(Jd)];elementRef=f(Y);onPointerDown(){this.elementRef.nativeElement.contains(document.activeElement)||this.elementRef.nativeElement.focus()}onKeyDown(e){if(!this.elementRef.nativeElement.contains(document.activeElement))return;let t=this.flowCoreProvider.provide(),o=this.inputEventsRouter.getBaseEvent(e),i=t.shortcutManager.match({key:e.key,modifiers:o.modifiers});if(i.length!==0&&!this.isInputFieldFocused(e)){e.preventDefault();for(let r of i){let s=this.keyboardActions.find(d=>d.canHandle(r,t)),a=s&&s.createEvent(r,o);a?this.inputEventsRouter.emit(a):this.inputEventsRouter.hasHandler(r.actionName)&&this.inputEventsRouter.emit(y(g({},o),{name:r.actionName}))}}}isInputFieldFocused(e){let t=e.composedPath()[0]||e.target;return t.hasAttribute("contenteditable")||["INPUT","TEXTAREA","SELECT"].includes(t.tagName)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramKeyboardInputs",""]],hostAttrs:["tabindex","0"],hostBindings:function(t,o){t&1&&x("keydown",function(r){return o.onKeyDown(r)},Po)("pointerdown",function(){return o.onPointerDown()})},features:[Ke([Kd,Qd,Jd])]})},ji=class n{inputEventsRouter=f(qe);emitStart(e,t,o){let i=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},i),{name:"linking",phase:"start",target:t,targetType:"node",portId:o,lastInputPoint:{x:e.clientX,y:e.clientY}}))}emitContinue(e,t,o,i=null){let r=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},r),{name:"linking",phase:"continue",target:t,targetType:"node",portId:o,lastInputPoint:{x:e.clientX,y:e.clientY},panningForce:i}))}emitEnd(e,t,o){let i=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},i),{name:"linking",phase:"end",target:t,targetType:"node",portId:o,lastInputPoint:{x:e.clientX,y:e.clientY}}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Hi=class extends Map{},Je;(function(n){n.Rotate="rotate",n.Resize="resize",n.Move="move",n.BoxSelection="box-selection",n.Linking="linking",n.Panning="panning",n.Zooming="zooming"})(Je||(Je={}));var zi=class extends Map{},Rn=class n{currentEvent=F(null);clearCurrentEvent(){this.currentEvent.set(null)}rotateHandled(){return this.currentEvent()===Je.Rotate}resizeHandled(){return this.currentEvent()===Je.Resize}moveHandled(){return this.currentEvent()===Je.Move}boxSelectionHandled(){return this.currentEvent()===Je.BoxSelection}linkingHandled(){return this.currentEvent()===Je.Linking}panningHandled(){return this.currentEvent()===Je.Panning}zoomingHandled(){return this.currentEvent()===Je.Zooming}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})},ec=class n{linkingEventService=f(ji);flowCoreProviderService=f(ye);touchEventsStateService=f(Rn);target=F(void 0);edgePanningInterval=null;portId=_.required();ngOnDestroy(){this.cleanup()}setTargetNode(e){this.target.set(e)}onPointerDown(e){this.shouldHandle(e)&&(e.linkingHandled=!0,this.touchEventsStateService.currentEvent.set(Je.Linking),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp),this.linkingEventService.emitStart(e,this.target(),this.portId()))}onPointerMove=e=>{if(this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())return void this.onPointerUp(e);let{edgePanningThreshold:t,edgePanningEnabled:o,edgePanningForce:i}=this.flowCoreProviderService.provide().config.linking,r=this.flowCoreProviderService.provide(),s=null;if(o){let{width:a,height:d}=r.getViewport(),{x:c,y:l}=r.getFlowOffset();s=Ve.calculateEdgePanningForce({x:c,y:l,width:a??0,height:d??0},{x:e.clientX,y:e.clientY},t,i),s?this.startEdgePanning(e,s):this.stopEdgePanning()}this.linkingEventService.emitContinue(e,this.target(),this.portId(),s)};onPointerUp=e=>{this.linkingEventService.emitEnd(e,this.target(),this.portId()),this.cleanup()};shouldHandle(e){return this.flowCoreProviderService.provide().actionStateManager.isLinking()?(this.target.set(void 0),!1):!(e.boxSelectionHandled||this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())}cleanup(){this.touchEventsStateService.clearCurrentEvent(),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),this.stopEdgePanning()}startEdgePanning(e,t){this.stopEdgePanning(),this.edgePanningInterval=window.setInterval(()=>{this.linkingEventService.emitContinue(e,this.target(),this.portId(),t)},KC)}stopEdgePanning(){this.edgePanningInterval!=null&&(window.clearInterval(this.edgePanningInterval),this.edgePanningInterval=null)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramLinkingInput",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})},inputs:{portId:[1,"portId"]},features:[Ke([ji])]})},rs=class n{inputEventsRouter=f(qe);targetData=_.required();onPointerDown(e){if(!this.shouldHandle(e))return;e.selectHandled=!0;let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"select",target:this.targetData(),targetType:this.targetType,lastInputPoint:{x:e.clientX,y:e.clientY}}))}shouldHandle(e){return!!this.inputEventsRouter.eventGuards.withPrimaryButton(e)&&!(e.boxSelectionHandled||e.selectHandled)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})},inputs:{targetData:[1,"targetData"]}})},Jh=class n extends rs{targetType="diagram";targetData=_();static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275dir=R({type:n,inputs:{targetData:[1,"targetData"]},features:[le]})},eg=class n extends rs{targetType="edge";targetData=_.required();static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275dir=R({type:n,inputs:{targetData:[1,"targetData"]},features:[le]})},tg=class n extends rs{targetType="node";targetData=_.required();static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275dir=R({type:n,inputs:{targetData:[1,"targetData"]},features:[le]})},yP=(n,e)=>`[ngDiagram] Failed to parse palette drop data as JSON.

Received data: "${n}"
Error: ${e instanceof Error?e.message:String(e)}

Note: This error typically occurs when implementing custom drag-and-drop functionality.
The built-in palette component handles data serialization correctly.

To fix custom implementations:
  \u2022 Ensure the dragged data is valid JSON format
  \u2022 Use JSON.stringify() when setting the drag data
  \u2022 Example: event.dataTransfer.setData('text/plain', JSON.stringify({ type: 'node', data: {...} }))

The palette drop event will continue with empty data object.

Documentation: https://www.ngdiagram.dev/docs/guides/palette/
`,bP=()=>`[ngDiagram] Invalid drop data: expected type "NgDiagramPaletteItem".

Received data: "UNKNOWN"

To fix this error:
  \u2022 Ensure the dragged data is of type "NgDiagramPaletteItem" and is dragged from a valid palette item.

The palette drop event will continue with empty data object.

Documentation: https://www.ngdiagram.dev/docs/guides/palette/
`,ng=class n{inputEventsRouterService=f(qe);paletteService=f(Li);el=f(Y);touchMoveListener=e=>this.onGlobalTouchMove(e);touchEndListener=e=>this.onGlobalTouchEnd(e);ngOnInit(){document.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),document.addEventListener("touchend",this.touchEndListener,{passive:!1})}ngOnDestroy(){document.removeEventListener("touchmove",this.touchMoveListener),document.removeEventListener("touchend",this.touchEndListener)}onDrop(e){e.preventDefault();let t=e.dataTransfer?.getData("text/plain"),o=this.inputEventsRouterService.getBaseEvent(e),i={};if(t)try{i=JSON.parse(t)}catch(r){return this.paletteService.draggedNode()?console.error(yP(t,r)):console.warn(bP())}this.inputEventsRouterService.emit(y(g({},o),{name:"paletteDrop",data:i,lastInputPoint:{x:e.clientX,y:e.clientY}})),this.paletteService.draggedNode.set(null),this.paletteService.previewId.set(null)}onDragOver(e){e.preventDefault()}onGlobalTouchMove(e){this.paletteService.draggedNode()&&e.preventDefault()}onGlobalTouchEnd(e){let t=this.paletteService.draggedNode();if(!t)return;let o=e.changedTouches[0];if(!o)return;let i=this.el.nativeElement,r=document.elementFromPoint(o.clientX,o.clientY);if(!r||!i.contains(r))return this.paletteService.draggedNode.set(null),void this.paletteService.previewId.set(null);let s=this.inputEventsRouterService.getBaseEvent(e);this.inputEventsRouterService.emit(y(g({},s),{name:"paletteDrop",data:t,lastInputPoint:{x:o.clientX,y:o.clientY}})),this.paletteService.draggedNode.set(null),this.paletteService.previewId.set(null),e.preventDefault(),e.stopPropagation()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramPaletteDrop",""]],hostBindings:function(t,o){t&1&&x("drop",function(r){return o.onDrop(r)})("dragover",function(r){return o.onDragOver(r)})}})},tc=class n{linkingEventService=f(ji);cursorPositionTrackerService=f(Bi);node;portId;startLinking(e,t){this.node=e,this.portId=t;let o=this.cursorPositionTrackerService.getLastPosition();this.linkingEventService.emitStart({clientX:o.x,clientY:o.y},e,t),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("click",this.onDocumentClick,!0),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEnd,{passive:!1})}onPointerMove=e=>{e.pointerType!=="touch"&&this.linkingEventService.emitContinue(e)};onTouchMove=e=>{if(e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this.linkingEventService.emitContinue({clientX:t.clientX,clientY:t.clientY})};onTouchEnd=e=>{e.preventDefault();let t=e.changedTouches[0],o={clientX:t.clientX,clientY:t.clientY};this.cleanup(),this.linkingEventService.emitEnd(o,this.node,this.portId)};onDocumentClick=e=>{this.cleanup(),this.linkingEventService.emitEnd(e,this.node,this.portId)};cleanup(){document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("click",this.onDocumentClick,!0),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},st=class n extends An{manualLinkingService=f(tc);renderer=f(pn);isInitialized=this.renderer.isInitialized.asReadonly();config$=F({});config=this.config$.asReadonly();actionState$=F({});actionState=this.actionState$.asReadonly();constructor(){super(),Me(()=>{this.isInitialized()&&Oe(()=>{this.config$.set(this.flowCore.config)})}),Me(e=>{if(!this.isInitialized())return;let t=this.flowCore.eventManager.on("actionStateChanged",o=>{Oe(()=>{this.actionState$.set(o.actionState)})});e(()=>t())})}updateConfig(e){this.flowCore.updateConfig(e),this.config$.set(this.flowCore.config)}getEnvironment(){return this.flowCore.getEnvironment()}registerMiddleware(e){return this.flowCore.registerMiddleware(e)}unregisterMiddleware(e){this.flowCore.unregisterMiddleware(e)}registerRouting(e){this.flowCore.edgeRoutingManager.registerRouting(e)}unregisterRouting(e){this.flowCore.edgeRoutingManager.unregisterRouting(e)}getRegisteredRoutings(){return this.flowCore.edgeRoutingManager.getRegisteredRoutings()}setDefaultRouting(e){this.flowCore.edgeRoutingManager.setDefaultRouting(e)}getDefaultRouting(){return this.flowCore.edgeRoutingManager.getDefaultRouting()}startLinking(e,t){this.manualLinkingService.startLinking(e,t)}addEventListener(e,t){return this.flowCore.eventManager.on(e,t)}addEventListenerOnce(e,t){return this.flowCore.eventManager.once(e,t)}removeEventListener(e,t){this.flowCore.eventManager.off(e,t)}removeAllEventListeners(){this.flowCore.eventManager.offAll()}setEventsEnabled(e){this.flowCore.eventManager.setEnabled(e)}areEventsEnabled(){return this.flowCore.eventManager.isEnabled()}hasEventListeners(e){return this.flowCore.eventManager.hasListeners(e)}transaction(e,t){let o=!1,i=this.flowCore.transaction(()=>{let r=e();return r instanceof Promise&&(o=!0),r},t??{});if(t||o)return i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};function nc(n,e){let t=_P(e);return!!(n.target&&n.target instanceof HTMLElement)&&n.target.closest(t)}function _P(n){return`[data-no-${n}="true"]`}var og=class n{inputEventsRouter=f(qe);elementRef=f(Y);diagramService=f(st);ngOnDestroy(){document.removeEventListener("pointermove",this.onMouseMove),document.removeEventListener("pointerup",this.onPointerUp)}onPointerDown(e){if(e.pointerType==="touch"||!this.inputEventsRouter.eventGuards.withPrimaryButton(e)||!this.shouldHandle(e))return;this.toggleGrabbingCursor(!0),e.preventDefault(),e.stopPropagation();let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"panning",phase:"start",target:void 0,targetType:"diagram",lastInputPoint:{x:e.clientX,y:e.clientY}})),document.addEventListener("pointermove",this.onMouseMove),document.addEventListener("pointerup",this.onPointerUp)}onPointerUp=e=>{this.inputEventsRouter.eventGuards.withPrimaryButton(e)&&(this.toggleGrabbingCursor(!1),e.preventDefault(),e.stopPropagation(),this.finishPanning(e))};onWheel(e){if(!this.shouldHandleWheel(e))return;e.preventDefault(),e.stopPropagation();let t=e.shiftKey?e.deltaY:e.deltaX,o=e.shiftKey?0:e.deltaY,i=Math.abs(t)>Math.abs(o)?t>0?"left":"right":o>0?"top":"bottom",r=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},r),{name:"keyboardPanning",direction:i}))}onMouseMove=e=>{if(e.zoomingHandled)return void this.finishPanning(e);e.preventDefault(),e.stopPropagation();let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"panning",phase:"continue",target:void 0,targetType:"diagram",lastInputPoint:{x:e.clientX,y:e.clientY}}))};finishPanning(e){document.removeEventListener("pointermove",this.onMouseMove),document.removeEventListener("pointerup",this.onPointerUp);let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"panning",phase:"end",target:void 0,targetType:"diagram",lastInputPoint:{x:e.clientX,y:e.clientY}}))}shouldHandle(e){let{viewportPanningEnabled:t}=this.diagramService.config();return!(!t||nc(e,"pan")||e.moveSelectionHandled||e.zoomingHandled||e.linkingHandled||e.rotateHandled||e.boxSelectionHandled)}shouldHandleWheel(e){let{viewportPanningEnabled:t}=this.diagramService.config();return!!t&&!nc(e,"pan")&&!this.inputEventsRouter.eventGuards.withPrimaryModifier(e)}toggleGrabbingCursor(e){this.elementRef.nativeElement.classList.toggle("panning",e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramPanning",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})("wheel",function(r){return o.onWheel(r)})}})},ig=class n{elementRef=f(Y);flowCoreProvider=f(ye);inputEventsRouterService=f(qe);touchEventsStateService=f(Rn);touchCache=[];lastDistance;initialDistance;isZoomingActive=!1;ZOOM_TRIGGER_DELTA=40;onTouchStart(e){for(let t of e.changedTouches)this.touchCache.push(t);this.touchCache.length===2&&(this.lastDistance=this.computeDistance(),this.initialDistance=this.lastDistance,this.isZoomingActive=!1)}onTouchEnd(e){for(let t of e.changedTouches)this.removeTouchFromCache(t);this.touchCache.length<2&&(this.lastDistance=void 0,this.initialDistance=void 0,this.isZoomingActive=!1,this.touchCache=[],this.touchEventsStateService.clearCurrentEvent())}onTouchMove(e){for(let c of e.changedTouches)this.updateTouchInCache(c);if(this.touchCache.length!==2||this.lastDistance===void 0||this.initialDistance===void 0)return;let t=this.computeDistance(),o=Math.abs(t-this.initialDistance);if(!this.isZoomingActive){if(!(o>this.ZOOM_TRIGGER_DELTA))return;this.isZoomingActive=!0,this.touchEventsStateService.currentEvent.set(Je.Zooming)}let i=this.flowCoreProvider.provide(),r=(this.touchCache[0].clientX+this.touchCache[1].clientX)/2,s=(this.touchCache[0].clientY+this.touchCache[1].clientY)/2,a=Math.min(Math.max(1-i.config.zoom.step,t/this.lastDistance),1+i.config.zoom.step);this.lastDistance=t;let d=this.inputEventsRouterService.getBaseEvent(e);this.inputEventsRouterService.emit(y(g({},d),{name:"zoom",centerPoint:{x:r,y:s},zoomFactor:a}))}removeTouchFromCache(e){let t=this.touchCache.findIndex(o=>o.identifier===e.identifier);t!==-1&&this.touchCache.splice(t,1)}computeDistance(){return Math.hypot(this.touchCache[0].clientX-this.touchCache[1].clientX,this.touchCache[0].clientY-this.touchCache[1].clientY)}updateTouchInCache(e){let t=this.touchCache.findIndex(o=>o.identifier===e.identifier);t!==-1&&(this.touchCache[t]=e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramZoomingPointer",""]],hostBindings:function(t,o){t&1&&x("touchstart",function(r){return o.onTouchStart(r)})("touchend",function(r){return o.onTouchEnd(r)})("touchmove",function(r){return o.onTouchMove(r)})("touchcancel",function(r){return o.onTouchEnd(r)})}})},rg=class n{flowCoreProvider=f(ye);inputEventsRouterService=f(qe);onWheel(e){if(!this.shouldHandle(e))return;e.stopPropagation(),e.preventDefault();let t=this.flowCoreProvider.provide(),o=e.deltaY>0?1-t.config.zoom.step:1+t.config.zoom.step,i=this.inputEventsRouterService.getBaseEvent(e);this.inputEventsRouterService.emit(y(g({},i),{name:"zoom",centerPoint:{x:e.clientX,y:e.clientY},zoomFactor:o}))}shouldHandle(e){return this.inputEventsRouterService.eventGuards.withPrimaryModifier(e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramZoomingWheel",""]],hostBindings:function(t,o){t&1&&x("wheel",function(r){return o.onWheel(r)})}})},sg=class n{node=_.required();position=m(()=>this.node().position);get transform(){let e=this.position();return`translate(${e.x}px, ${e.y}px)`}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramNodePosition",""]],hostVars:4,hostBindings:function(t,o){t&2&&$e("transform",o.transform)("transform-origin","0 0")},inputs:{node:[1,"node"]}})},hn=class n{node=_.required();selected=m(()=>this.node().selected??!1);static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramNodeSelected",""]],hostVars:4,hostBindings:function(t,o){t&2&&ee("ng-diagram-node-selected",o.selected())("ng-diagram-node-wrapper",!0)},inputs:{node:[1,"node"]}})},WC={width:"11.25rem",height:"2rem"},Hd={width:"9.0625rem",height:"9.0625rem"},ag=class n{hostElement=f(Y);renderer=f(ft);batchResizeObserver=f(Ho);flowCoreProvider=f(ye);node=_.required();size=m(()=>this.node().size);autoSize=m(()=>this.node().autoSize??!0);id=m(()=>this.node().id);sizeState=m(()=>({size:this.size(),autoSize:this.autoSize()}));constructor(){Me(()=>{let{size:e,autoSize:t}=this.sizeState();if(!t&&e){let{width:o,height:i}=this.size();this.setSize(o,i)}else this.setSize()})}ngOnInit(){this.connectResizeObserver()}ngOnDestroy(){this.disconnectResizeObserver()}setSize(e,t){let o=this.node();e!==void 0&&t!==void 0?this.applyExplicitSize(e,t,o):this.applyAutoSize(o)}applyExplicitSize(e,t,o){let i=this.hostElement.nativeElement,r=this.flowCoreProvider.provide().config.resize.getMinNodeSize(o),s=!o.type;if(this.renderer.setStyle(i,"width",`${e}px`),this.renderer.setStyle(i,"height",`${t}px`),r||s){let a=r?.width??Wp.width,d=r?.height??Wp.height;this.renderer.setStyle(i,"min-width",`${a}px`),this.renderer.setStyle(i,"min-height",`${d}px`)}}applyAutoSize(e){e.type?this.resetExplicitSizes():eo(e)?this.applyDefaultGroupSize():this.applyDefaultNodeSize()}applyDefaultGroupSize(){let e=this.hostElement.nativeElement;this.renderer.setStyle(e,"width",Hd.width),this.renderer.setStyle(e,"height",Hd.height),this.renderer.setStyle(e,"min-width",Hd.width),this.renderer.setStyle(e,"min-height",Hd.height)}applyDefaultNodeSize(){let e=this.hostElement.nativeElement;this.renderer.setStyle(e,"width","unset"),this.renderer.setStyle(e,"height","unset"),this.renderer.setStyle(e,"min-width",WC.width),this.renderer.setStyle(e,"min-height",WC.height)}resetExplicitSizes(){let e=this.hostElement.nativeElement;this.renderer.setStyle(e,"width","unset"),this.renderer.setStyle(e,"height","unset"),this.renderer.setStyle(e,"min-width","unset"),this.renderer.setStyle(e,"min-height","unset")}connectResizeObserver(){this.batchResizeObserver.observe(this.hostElement.nativeElement,{type:"node",nodeId:this.id()})}disconnectResizeObserver(){this.batchResizeObserver.unobserve(this.hostElement.nativeElement)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramNodeSize",""]],inputs:{node:[1,"node"]}})},dg=class n{viewport=_({x:0,y:0,scale:1});get transform(){let e=this.viewport();return`translate(${e.x}px, ${e.y}px) scale(${e.scale})`}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramViewport",""]],hostVars:2,hostBindings:function(t,o){t&2&&$e("transform",o.transform)},inputs:{viewport:[1,"viewport"]}})},oc=class n{data=_.required();zIndex=m(()=>this.data().computedZIndex??0);static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramZIndex",""]],hostVars:2,hostBindings:function(t,o){t&2&&$e("z-index",o.zIndex())},inputs:{data:[1,"data"]}})},cg=class n{inputEventsRouter=f(qe);boxSelectionProvider=f(ns);flowCoreProvider=f(ye);elementRef=f(Y);startPoint=null;ngOnInit(){this.elementRef.nativeElement.addEventListener("pointerdown",this.onPointerDownCapture,{capture:!0})}ngOnDestroy(){this.elementRef.nativeElement.removeEventListener("pointerdown",this.onPointerDownCapture,{capture:!0}),document.removeEventListener("pointermove",this.onMouseMove),document.removeEventListener("pointerup",this.onPointerUp)}onPointerDownCapture=e=>{this.shouldHandle(e)&&(e.boxSelectionHandled=!0)};onPointerDown(e){if(!e.boxSelectionHandled)return;e.preventDefault(),e.stopPropagation();let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"boxSelection",phase:"start",target:void 0,targetType:"diagram",lastInputPoint:{x:e.clientX,y:e.clientY}})),this.startPoint={x:e.clientX,y:e.clientY},document.addEventListener("pointermove",this.onMouseMove),document.addEventListener("pointerup",this.onPointerUp)}onPointerUp=e=>{if(!this.inputEventsRouter.eventGuards.withPrimaryButton(e))return;e.preventDefault(),e.stopPropagation(),document.removeEventListener("pointermove",this.onMouseMove),document.removeEventListener("pointerup",this.onPointerUp);let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"boxSelection",phase:"end",target:void 0,targetType:"diagram",lastInputPoint:{x:e.clientX,y:e.clientY}})),this.startPoint=null,this.boxSelectionProvider.boundingBox.set(null)};onMouseMove=e=>{e.preventDefault(),e.stopPropagation();let t=this.inputEventsRouter.getBaseEvent(e);if(this.inputEventsRouter.emit(y(g({},t),{name:"boxSelection",phase:"continue",target:void 0,targetType:"diagram",lastInputPoint:{x:e.clientX,y:e.clientY}})),this.startPoint){let o=this.flowCoreProvider.provide(),{x:i,y:r}=o.clientToFlowViewportPosition(this.startPoint),{x:s,y:a}=o.clientToFlowViewportPosition({x:e.clientX,y:e.clientY}),d=Math.min(i,s),c=Math.min(r,a),l=Math.abs(s-i),u=Math.abs(a-r);this.boxSelectionProvider.boundingBox.set({x:d,y:c,width:l,height:u})}};shouldHandle(e){let t=this.flowCoreProvider.provide(),o=this.inputEventsRouter.getBaseEvent(e).modifiers;return t.shortcutManager.matchesAction("boxSelection",{modifiers:o})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramBoxSelection",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})}})},lg=class n{inputEventsRouter=f(qe);diagramService=f(st);touchEventsStateService=f(Rn);isPanning=!1;lastTouch=null;onTouchStart(e){if(!this.isTwoFingerTouch(e)||!this.shouldHandle(e)||this.touchEventsStateService.zoomingHandled())return void(this.isPanning=!1);this.isPanning=!0,this.touchEventsStateService.currentEvent.set(Je.Panning);let t=this.getMidpoint(e.touches);this.lastTouch=t,this.emitPanningEvent("start",e,t),this.preventDefaultAndStop(e)}onTouchMove(e){if(this.touchEventsStateService.zoomingHandled()&&this.isPanning)return this.isPanning=!1,this.lastTouch=null,void this.touchEventsStateService.clearCurrentEvent();if(!this.shouldContinuePanning(e))return;let t=this.getMidpoint(e.touches);this.lastTouch=t,this.emitPanningEvent("continue",e,t),this.preventDefaultAndStop(e)}onTouchEnd(e){if(!this.isPanning)return;this.isPanning=!1;let t=this.lastTouch||this.getMidpoint(e.touches);this.emitPanningEvent("end",e,t),this.lastTouch=null,this.touchEventsStateService.clearCurrentEvent(),this.preventDefaultAndStop(e)}getMidpoint(e){return e.length<2?{x:0,y:0}:{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}}shouldHandle(e){let{viewportPanningEnabled:t}=this.diagramService.config();return!(!t||nc(e,"pan")||this.touchEventsStateService.zoomingHandled())}isTwoFingerTouch(e){return e.touches.length===2}shouldContinuePanning(e){return this.isPanning&&this.isTwoFingerTouch(e)&&!this.touchEventsStateService.zoomingHandled()}emitPanningEvent(e,t,o){let i=this.inputEventsRouter.getBaseEvent(t);this.inputEventsRouter.emit(y(g({},i),{name:"panning",phase:e,target:void 0,targetType:"diagram",lastInputPoint:o}))}preventDefaultAndStop(e){e.preventDefault(),e.stopPropagation()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramPanning",""]],hostBindings:function(t,o){t&1&&x("touchstart",function(r){return o.onTouchStart(r)})("touchmove",function(r){return o.onTouchMove(r)})("touchend",function(r){return o.onTouchEnd(r)})("touchcancel",function(r){return o.onTouchEnd(r)})}})},ug=class n{service=f(ye,{optional:!0,skipSelf:!0});constructor(){if(!this.service)throw new Error(`NgDiagram services are not available. Please register all required services using \`provideNgDiagram()\` in your component's providers array.

Example usage:

import { provideNgDiagram } from 'ng-diagram';

@Component({
  selector: 'app-root',
  providers: [provideNgDiagram()], // Add this to register all ng-diagram services
  template: \`<ng-diagram ...></ng-diagram>\`
})
export class AppComponent {...}`)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramServicesAvailabilityChecker",""]]})},CP=n=>`[ngDiagram] Node template '${n}' is not registered. Falling back to default node template.

Documentation: https://www.ngdiagram.dev/docs/guides/nodes/custom-nodes/
`,DP=n=>`[ngDiagram] Edge template '${n}' is not registered. Falling back to default edge template.

Documentation: https://www.ngdiagram.dev/docs/guides/edges/custom-edges/
`,ic=class n{flowConfig=f(ye);nodeTemplateMap=new zi;edgeTemplateMap=new Hi;accessedNodeTypes=new Set;accessedEdgeTypes=new Set;setNodeTemplateMap(e){this.accessedNodeTypes.clear(),this.nodeTemplateMap=e}setEdgeTemplateMap(e){this.accessedEdgeTypes.clear(),this.edgeTemplateMap=e}getNodeTemplate(e){if(e===void 0)return null;let t=this.nodeTemplateMap.get(e||"");return t||this.accessedNodeTypes.has(e)||(console.warn(CP(e)),this.accessedNodeTypes.add(e)),t??null}getEdgeTemplate(e){if(e===void 0)return null;let t=this.edgeTemplateMap.get(e||"");return t||this.accessedEdgeTypes.has(e)||(console.warn(DP(e)),this.accessedEdgeTypes.add(e)),t??null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},_0=[Uk,Ek,jk];function C0(n){return n(_0)}var fg=class n{boxSelectionProvider=f(ns);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-box-selection"]],decls:2,vars:2,consts:[[3,"left","top","width","height"]],template:function(t,o){if(t&1&&(Br(0),X(1,pT,1,8,"div",0)),t&2){let i=hd(o.boxSelectionProvider.boundingBox());b(),Q(i?1:-1)}},styles:["div[_ngcontent-%COMP%]{position:absolute;pointer-events:none;background-color:var(--ngd-box-selection-background);border:var(--ngd-box-selection-border-size) solid var(--ngd-box-selection-border-color)}"],changeDetection:0})},pg=class n{renderer=f(pn);isVisible=this.renderer.isInitialized;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-canvas"]],hostVars:2,hostBindings:function(t,o){t&2&&$e("visibility",o.isVisible()?null:"hidden")},features:[pt([{directive:dg,inputs:["viewport","viewport"]}])],ngContentSelectors:gT,decls:5,vars:0,consts:[[1,"edges-container"],[1,"nodes-container"]],template:function(t,o){t&1&&(ae(hT),G(0,"div",0),K(1),K(2,1),U(),G(3,"div",1),K(4,2),U())},styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;display:flex;overflow:visible;transform-origin:0 0}.nodes-container[_ngcontent-%COMP%], .edges-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;pointer-events:none}"],changeDetection:0})},wP=(n,e,t,o,i)=>`[ngDiagram] Invalid edge coordinates detected for edge '${n}'.

Edge details:
  \u2022 source: ${e} (port: ${t||"not specified"})
  \u2022 target: ${o} (port: ${i||"not specified"})

Documentation: https://www.ngdiagram.dev/docs/guides/edges/edges/
`,zo=class n{flowCoreProvider=f(ye);markerRegistry=f(Vi);useInlineMarkers=this.markerRegistry.useInlineMarkers;edge=_.required();routing=_();stroke=_();sourceArrowhead=_();targetArrowhead=_();strokeOpacity=_();strokeWidth=_();strokeDasharray=_();points=m(()=>this.edge().points??[]);path=m(()=>{let e=this.edge(),t=this.routing()??e.routing,o=this.flowCoreProvider.provide(),i=this.points();if(i.length===0)return"";if(i.some(s=>!qt(s)))return console.error(wP(e.id,e.source,e.sourcePort,e.target,e.targetPort)),"";if(t&&o.edgeRoutingManager.hasRouting(t))return o.edgeRoutingManager.computePath(t,i);let r=o.edgeRoutingManager.getDefaultRouting();return o.edgeRoutingManager.hasRouting(r)?o.edgeRoutingManager.computePath(r,i):`M ${i[0].x},${i[0].y}`});sourceMarkerId=m(()=>this.edge()?.sourceArrowhead??this.sourceArrowhead());targetMarkerId=m(()=>this.edge()?.targetArrowhead??this.targetArrowhead());markerStart=m(()=>{let e=this.sourceMarkerId();return e?this.markerRegistry.getMarkerUrl(e,this.edge().id,"source"):null});markerEnd=m(()=>{let e=this.targetMarkerId();return e?this.markerRegistry.getMarkerUrl(e,this.edge().id,"target"):null});selected=m(()=>this.edge().selected);temporary=m(()=>this.edge().temporary);labels=m(()=>this.edge().measuredLabels??[]);class=m(()=>{let e=["ng-diagram-edge__path"];return this.selected()&&e.push("selected"),this.temporary()&&e.push("temporary"),e.join(" ")});prevRouting;prevRoutingMode;prevPoints;constructor(){Me(()=>this.syncEdgePropertiesToModel())}syncEdgePropertiesToModel(){let e=this.edge(),t={};(this.checkRoutingChanges(e,t)||this.checkRoutingModeChanges(e,t)||this.checkPointsChanges(e,t))&&this.flowCoreProvider.provide().commandHandler.emit("updateEdge",{id:e.id,edgeChanges:t})}checkRoutingChanges(e,t){let o=this.routing()??e.routing;return!(!o||this.prevRouting===o||(t.routing=o,this.prevRouting=o,0))}checkRoutingModeChanges(e,t){return!(!e.routingMode||this.prevRoutingMode===e.routingMode||(t.routingMode=e.routingMode,this.prevRoutingMode=e.routingMode,0))}checkPointsChanges(e,t){return!(!(e.routingMode==="manual"&&e.points&&e.points.length>0)||this.prevPoints&&UN(this.prevPoints,e.points)||(t.points=e.points,this.prevPoints=e.points,0))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-base-edge"]],hostVars:4,hostBindings:function(t,o){t&2&&ee("selected",o.selected())("temporary",o.temporary())},inputs:{edge:[1,"edge"],routing:[1,"routing"],stroke:[1,"stroke"],sourceArrowhead:[1,"sourceArrowhead"],targetArrowhead:[1,"targetArrowhead"],strokeOpacity:[1,"strokeOpacity"],strokeWidth:[1,"strokeWidth"],strokeDasharray:[1,"strokeDasharray"]},features:[pt([{directive:oc,inputs:["data","edge"]},{directive:eg,inputs:["targetData","edge"]}])],ngContentSelectors:et,decls:5,vars:14,consts:[["ngDiagramInlineMarkers","",3,"sourceMarkerId","targetMarkerId","edgeId"],["fill","none","stroke","none","stroke-width","20","stroke-opacity","0"]],template:function(t,o){t&1&&(ae(),Re(),w(0,"svg"),X(1,mT,1,3,":svg:defs",0),A(2,"path")(3,"path",1),D(),K(4)),t&2&&($e("color",o.stroke()||"var(--edge-stroke, var(--ngd-default-edge-stroke))"),b(),Q(o.useInlineMarkers?1:-1),b(),Se(o.class()),se("d",o.path())("stroke",o.stroke()||"var(--edge-stroke, var(--ngd-default-edge-stroke))")("fill","none")("stroke-width",o.strokeWidth()||"var(--edge-stroke-width, 2)")("stroke-dasharray",o.strokeDasharray()||"var(--edge-stroke-dasharray, none)")("marker-start",o.markerStart())("marker-end",o.markerEnd())("stroke-opacity",o.strokeOpacity()||"var(--edge-stroke-opacity, 1)"),b(),se("d",o.path()))},dependencies:[Qh],styles:["[_nghost-%COMP%]{position:relative}svg[_ngcontent-%COMP%]{overflow:visible;position:absolute;cursor:pointer}svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{pointer-events:visibleStroke;cursor:pointer;transition:var(--edge-stroke-transition, none)}"],changeDetection:0})},ss=class n{flowCoreProvider=f(ye);hostElement=f(Y);edgeComponent=f(zo);batchResizeObserver=f(Ho);id=_.required();positionOnEdge=_.required();edgeData=m(()=>this.edgeComponent.edge());points=m(()=>this.edgeData()?.points);edgeId=m(()=>this.edgeData()?.id);position=m(()=>this.edgeData()?.measuredLabels?.find(o=>o.id===this.id())?.position||{x:0,y:0});isVisible=m(()=>{let e=this.edgeData();if(!e)return!1;let t=e.measuredLabels?.find(o=>o.id===this.id());return!(!t?.position||t?.position.x==null||t?.position.y==null||!(e.points&&e.points.length>=2))});lastPositionOnEdge=F(void 0);get transform(){let e=this.position();return`translate(${e.x}px, ${e.y}px) translate(-50%, -50%)`}constructor(){Me(()=>{let e=this.positionOnEdge(),t=this.lastPositionOnEdge();e!==t&&(Oe(()=>{this.lastPositionOnEdge.set(e)}),this.flowCoreProvider.provide().commandHandler.emit("updateEdgeLabels",{edgeId:this.edgeId(),labelUpdates:[{labelId:this.id(),labelChanges:{positionOnEdge:e}}]}))})}ngOnInit(){this.lastPositionOnEdge.set(this.positionOnEdge()),this.flowCoreProvider.provide().updater.addEdgeLabel(this.edgeId(),{id:this.id(),positionOnEdge:this.positionOnEdge()}),this.batchResizeObserver.observe(this.hostElement.nativeElement,{type:"edge-label",edgeId:this.edgeId(),labelId:this.id()})}ngOnDestroy(){this.flowCoreProvider.provide().commandHandler.emit("deleteEdgeLabels",{edgeId:this.edgeId(),labelIds:[this.id()]}),this.batchResizeObserver.unobserve(this.hostElement.nativeElement)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-base-edge-label"]],hostVars:4,hostBindings:function(t,o){t&2&&$e("transform",o.transform)("visibility",o.isVisible()?null:"hidden")},inputs:{id:[1,"id"],positionOnEdge:[1,"positionOnEdge"]},ngContentSelectors:et,decls:1,vars:0,template:function(t,o){t&1&&(ae(),K(0))},styles:["[_nghost-%COMP%]{position:absolute;pointer-events:all}"],changeDetection:0})};var hg=class n{edgeComponent=f(zo);selected=m(()=>this.edgeComponent.selected());static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-default-edge-label"]],ngContentSelectors:et,decls:2,vars:3,consts:[[3,"className"]],template:function(t,o){t&1&&(ae(),G(0,"div",0),K(1),U()),t&2&&(ee("selected",o.selected()),ln("className","ng-diagram-default-edge-label"))},styles:[".ng-diagram-default-edge-label[_ngcontent-%COMP%]{display:flex;padding:var(--edge-label-padding, 4px 8px);border-radius:var(--edge-label-border-radius, 4px);font-size:var(--edge-label-font-size, 12px);background:var(--edge-label-background-color, var(--ngd-default-edge-label-background-color));color:var(--edge-label-text-color, var(--ngd-default-edge-label-color));border:var(--edge-label-border-width, 1px) solid var(--edge-label-border-color, var(--ngd-default-edge-label-border-color));transition:var(--edge-label-border-transition, border-color .1s ease-in-out)}"],changeDetection:0})},gg=class n{edge=_.required();label=m(()=>this.edge().data?.label);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-default-edge"]],inputs:{edge:[1,"edge"]},decls:3,vars:3,consts:[[1,"default-edge",3,"edge"],[1,"ng-diagram-default-label",3,"id","positionOnEdge"]],template:function(t,o){if(t&1&&(w(0,"ng-diagram-base-edge",0),Br(1),X(2,vT,3,3,"ng-diagram-base-edge-label",1),D()),t&2){I("edge",o.edge()),b();let i=hd(o.label());b(),Q(i?2:-1)}},dependencies:[zo,ss,hg],styles:["ng-diagram-base-edge.default-edge[_ngcontent-%COMP%]{--edge-stroke: var(--ngd-default-edge-stroke);--edge-stroke-transition: stroke .1s ease-in-out}ng-diagram-base-edge.default-edge[_ngcontent-%COMP%]:hover:not(.selected):not(.temporary){--edge-stroke: var(--ngd-default-edge-stroke-hover);--edge-label-border-color: var(--ngd-default-edge-stroke-hover)}ng-diagram-base-edge.default-edge.selected[_ngcontent-%COMP%]{--edge-stroke: var(--ngd-default-edge-stroke-selected);--edge-label-border-color: var(--ngd-default-edge-stroke-selected)}ng-diagram-base-edge.default-edge.temporary[_ngcontent-%COMP%]{--edge-stroke-opacity: .5}"],changeDetection:0})},mg=class n{elementRef=f(Y);markerRegistry=f(Vi);destroyRef=f(ut);markerId=null;ngAfterViewInit(){let e=this.elementRef.nativeElement.querySelector("marker");if(!e)return void console.warn("[ngDiagram] Marker element not found in projected content");let t=e.getAttribute("id");t?(this.markerId=t,this.markerRegistry.registerMarker(t,e),this.destroyRef.onDestroy(()=>{this.markerId&&this.markerRegistry.unregisterMarker(this.markerId)})):console.warn("[ngDiagram] Marker element must have an id attribute")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-marker"]],ngContentSelectors:et,decls:1,vars:0,template:function(t,o){t&1&&(ae(),K(0))},styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]     svg{position:absolute;pointer-events:none;fill:currentColor}"],changeDetection:0})},vg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-marker-arrow"]],decls:5,vars:0,consts:[["id","ng-diagram-arrow","viewBox","0 9 8 14","refX","6","refY","16","markerWidth","4","markerHeight","7","orient","auto-start-reverse"],["d","M1 21L6 16L1 11","stroke","context-stroke","fill","none","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,o){t&1&&(w(0,"ng-diagram-marker"),Re(),w(1,"svg")(2,"defs")(3,"marker",0),A(4,"path",1),D()()()())},dependencies:[mg],encapsulation:2})},yg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-edge"]],ngContentSelectors:et,decls:1,vars:0,template:function(t,o){t&1&&(ae(),K(0))},styles:["[_nghost-%COMP%]{position:absolute;-webkit-user-select:none;user-select:none}"],changeDetection:0})},bg=class n{inputEventsRouter=f(qe);diagramComponent=f(cs);flowCoreProvider=f(ye);touchEventsStateService=f(Rn);targetData=_();edgePanningInterval=null;ngOnDestroy(){document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),this.stopEdgePanning()}onPointerDown(e){if(!this.shouldHandle(e)||!this.inputEventsRouter.eventGuards.withPrimaryButton(e))return;let t=this.targetData();if(!t)return;this.touchEventsStateService.currentEvent.set(Je.Move),e.moveSelectionHandled=!0;let o=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},o),{name:"pointerMoveSelection",phase:"start",target:t,targetType:"node",lastInputPoint:{x:e.clientX,y:e.clientY},currentDiagramEdge:null})),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp)}onPointerUp=e=>{this.inputEventsRouter.eventGuards.withPrimaryButton(e)&&this.finishDragging(e)};onPointerMove=e=>{if(e.zoomingHandled||this.touchEventsStateService.boxSelectionHandled()||this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())return void this.finishDragging(e);let t=this.targetData();if(!t)return;let o=this.inputEventsRouter.getBaseEvent(e),{selectionMoving:{edgePanningThreshold:i,edgePanningEnabled:r,edgePanningForce:s},viewportPanningEnabled:a}=this.flowCoreProvider.provide().config,d=null;a&&r&&(d=Ve.calculateEdgePanningForce(this.diagramComponent.getBoundingClientRect(),{x:e.clientX,y:e.clientY},i,s),d?this.startEdgePanning(e.clientX,e.clientY,d):this.stopEdgePanning()),this.inputEventsRouter.emit(y(g({},o),{name:"pointerMoveSelection",phase:"continue",target:t,targetType:"node",lastInputPoint:{x:e.clientX,y:e.clientY},panningForce:d}))};finishDragging(e){let t=this.targetData();if(!t)return;document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),this.stopEdgePanning();let o=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},o),{name:"pointerMoveSelection",phase:"end",target:t,targetType:"node",lastInputPoint:{x:e.clientX,y:e.clientY},currentDiagramEdge:null})),this.touchEventsStateService.clearCurrentEvent()}shouldHandle(e){return!(!this.flowCoreProvider.provide().config.nodeDraggingEnabled||!(this.targetData()?.draggable??1)||nc(e,"drag")||e.zoomingHandled||e.linkingHandled||e.rotateHandled||e.boxSelectionHandled||this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())}startEdgePanning(e,t,o){this.stopEdgePanning(),this.edgePanningInterval=window.setInterval(()=>{let i=this.targetData();if(!i)return;let r=this.inputEventsRouter.getBaseEvent({});this.inputEventsRouter.emit(y(g({},r),{name:"pointerMoveSelection",phase:"continue",target:i,targetType:"node",lastInputPoint:{x:e,y:t},panningForce:o}))},KC)}stopEdgePanning(){this.edgePanningInterval!=null&&(window.clearInterval(this.edgePanningInterval),this.edgePanningInterval=null)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramPointerMoveSelection",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})},inputs:{targetData:[1,"targetData"]}})},rc=class n{portsService=f(os);flowCore=f(ye);node=_.required();rotate=m(()=>this.node().angle?`rotate(${this.node().angle}deg)`:"");id=m(()=>this.node().id);size=m(()=>this.node().size);constructor(){this.setupPortSyncEffect()}syncPorts(){let e=this.id(),t=this.flowCore.provide();if(t.actionStateManager.isResizing()){let o=this.portsService.getNodePortsData(e);t.updater.applyPortsSizesAndPositions(e,o)}else queueMicrotask(()=>{let o=this.portsService.getNodePortsData(e);t.updater.applyPortsSizesAndPositions(e,o)})}setupPortSyncEffect(){let e,t,o=!0;Me(()=>{let i=this.size(),r=this.rotate();if(o)return o=!1,e=i,void(t=r);(i?.width!==e?.width||i?.height!==e?.height||r!==t)&&(e=i,t=r,this.syncPorts())})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-node"]],inputs:{node:[1,"node"]},features:[pt([{directive:ag,inputs:["node","node"]},{directive:sg,inputs:["node","node"]},{directive:tg,inputs:["targetData","node"]},{directive:bg,inputs:["targetData","node"]},{directive:oc,inputs:["data","node"]}])],ngContentSelectors:et,decls:2,vars:2,consts:[[1,"node-content"]],template:function(t,o){t&1&&(ae(),G(0,"div",0),K(1),U()),t&2&&$e("transform",o.rotate())},styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;transform-origin:0 0;pointer-events:none;-webkit-user-select:none;user-select:none;cursor:pointer}.node-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transform-origin:center center;pointer-events:all}"],changeDetection:0})},as=class{nodeComponent=f(rc,{optional:!0});isRenderedOnCanvas=m(()=>!!this.nodeComponent)},sc=class n{inputEventsRouter=f(qe);touchEventsStateService=f(Rn);direction=_.required();targetData=_.required();ngOnDestroy(){document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp)}onPointerDown(e){if(!this.shouldHandle(e))return;this.touchEventsStateService.currentEvent.set(Je.Resize),e.preventDefault(),e.stopPropagation(),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp);let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"resize",phase:"start",target:this.targetData(),direction:this.direction(),targetType:"node",lastInputPoint:{x:e.clientX,y:e.clientY}}))}onPointerUp=e=>{document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),this.touchEventsStateService.clearCurrentEvent();let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"resize",phase:"end",target:this.targetData(),direction:this.direction(),targetType:"node",lastInputPoint:{x:e.clientX,y:e.clientY}}))};onPointerMove=e=>{if(this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())return void this.onPointerUp(e);let t=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},t),{name:"resize",phase:"continue",target:this.targetData(),direction:this.direction(),targetType:"node",lastInputPoint:{x:e.clientX,y:e.clientY}}))};shouldHandle(e){return!(e.boxSelectionHandled||this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramResize",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})},inputs:{direction:[1,"direction"],targetData:[1,"targetData"]}})},_g=class n{position=_.required();classes=m(()=>`resize-handle resize-handle--${this.position()}`);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-resize-handle"]],hostVars:2,hostBindings:function(t,o){t&2&&Se(o.classes())},inputs:{position:[1,"position"]},features:[pt([{directive:sc,inputs:["direction","position","targetData","targetData"]}])],decls:0,vars:0,template:function(t,o){},styles:['[_nghost-%COMP%]:before{content:"";position:absolute;width:16px;height:16px;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%}.resize-handle[_nghost-%COMP%]{position:absolute;width:var(--ngd-resize-handle-size);height:var(--ngd-resize-handle-size);background-color:var(--ngd-resize-handle-background-color);border:var(--ngd-resize-handle-border-size) var(--ngd-resize-handle-border-style) var(--ngd-resize-handle-border-color);border-radius:var(--ngd-resize-handle-border-radius)}.resize-handle--top-left[_nghost-%COMP%]{top:0;left:0;transform:translate(-50%,-50%);cursor:nwse-resize}.resize-handle--top-right[_nghost-%COMP%]{top:0;right:0;transform:translate(50%,-50%);cursor:nesw-resize}.resize-handle--bottom-left[_nghost-%COMP%]{bottom:0;left:0;transform:translate(-50%,50%);cursor:nesw-resize}.resize-handle--bottom-right[_nghost-%COMP%]{bottom:0;right:0;transform:translate(50%,50%);cursor:nwse-resize}'],changeDetection:0})},Cg=class n{position=_.required();classes=m(()=>`resize-line resize-line--${this.position()}`);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-resize-line"]],hostVars:2,hostBindings:function(t,o){t&2&&Se(o.classes())},inputs:{position:[1,"position"]},features:[pt([{directive:sc,inputs:["direction","position","targetData","targetData"]}])],decls:0,vars:0,template:function(t,o){},styles:['[_nghost-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.resize-line[_nghost-%COMP%]{position:absolute}.resize-line--top[_nghost-%COMP%]:before, .resize-line--bottom[_nghost-%COMP%]:before{width:100%;height:8px}.resize-line--right[_nghost-%COMP%]:before, .resize-line--left[_nghost-%COMP%]:before{width:8px;height:100%}.resize-line--top[_nghost-%COMP%]{top:0;left:0;width:100%;border-top:var(--ngd-resize-line-border-width) var(--ngd-resize-line-border-style) var(--ngd-resize-line-border-color);cursor:ns-resize;transform:translateY(-50%)}.resize-line--right[_nghost-%COMP%]{top:0;right:0;height:100%;border-right:var(--ngd-resize-line-border-width) var(--ngd-resize-line-border-style) var(--ngd-resize-line-border-color);cursor:ew-resize;transform:translate(50%)}.resize-line--bottom[_nghost-%COMP%]{bottom:0;left:0;width:100%;border-bottom:var(--ngd-resize-line-border-width) var(--ngd-resize-line-border-style) var(--ngd-resize-line-border-color);cursor:ns-resize;transform:translateY(50%)}.resize-line--left[_nghost-%COMP%]{top:0;left:0;height:100%;border-left:var(--ngd-resize-line-border-width) var(--ngd-resize-line-border-style) var(--ngd-resize-line-border-color);cursor:ew-resize;transform:translate(-50%)}'],changeDetection:0})},gn=class n extends as{diagramService=f(st);defaultResizable=_(void 0);nodeData=m(()=>this.nodeComponent?.node());dataResizable=m(()=>this.nodeData()?.resizable);isResizable=m(()=>this.dataResizable()??this.defaultResizable()??this.diagramService.config().resize?.defaultResizable);showAdornment=m(()=>!!this.isResizable()&&this.nodeData()?.selected&&this.isRenderedOnCanvas()&&!this.nodeData()?.angle);linePositions=["top","right","bottom","left"];handlePositions=["top-left","top-right","bottom-left","bottom-right"];static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275cmp=S({type:n,selectors:[["ng-diagram-node-resize-adornment"]],inputs:{defaultResizable:[1,"defaultResizable"]},features:[le],ngContentSelectors:et,decls:2,vars:1,consts:[[3,"position","targetData"]],template:function(t,o){t&1&&(ae(),K(0),X(1,_T,4,0)),t&2&&(b(),Q(o.showAdornment()?1:-1))},dependencies:[Cg,_g],styles:["[_nghost-%COMP%]{display:flex;position:relative;width:100%;height:100%}"],changeDetection:0})},Dg=class n{node=_.required();isSelected=m(()=>this.node().selected??!1);highlighted=m(()=>this.node().highlighted??!1);classes=m(()=>"ng-diagram-group "+(this.highlighted()?"highlight":""));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-default-group-template"]],inputs:{node:[1,"node"]},ngContentSelectors:et,decls:3,vars:3,consts:[["ngDiagramNodeSelected","","ngDiagramGroupHighlighted","",3,"node"]],template:function(t,o){t&1&&(ae(),w(0,"ng-diagram-node-resize-adornment")(1,"div",0),K(2),D()()),t&2&&(b(),Se(o.classes()),I("node",o.node()))},dependencies:[gn,hn,is],styles:["[_nghost-%COMP%]:hover   .ng-diagram-group[_ngcontent-%COMP%]{border-color:var(--ngd-group-border-color-hover)}.ng-diagram-group[_ngcontent-%COMP%]{display:flex;border-radius:var(--ngd-group-border-radius);padding:.625rem;background-color:var(--ngd-node-bg-primary-default);border:.0625rem solid var(--ngd-group-border-color);width:100%;height:100%;box-sizing:border-box}"],changeDetection:0})},EP={topLeft:"top-left",topCenter:"top-center",topRight:"top-right",centerLeft:"center-left",center:"center",centerRight:"center-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},On=class n extends as{hostElement=f(Y);flowCoreProvider=f(ye);batchResizeObserver=f(Ho);linkingInputDirective=f(ec);isInitialized=F(!1);lastSide=F(void 0);lastType=F(void 0);nodeData=m(()=>this.nodeComponent?.node());id=_.required();type=_.required();side=_.required();originPoint=_("center");get portClass(){let e=EP[this.originPoint()]||"center";return`ng-diagram-port ${this.hasContent?"custom-content":""} ${this.side()} origin-${e}`}constructor(){super(),Me(()=>{let e=this.nodeData(),t=this.isInitialized(),o=this.lastSide(),i=this.side();t&&e&&o!==i&&(this.lastSide.set(i),this.flowCoreProvider.provide().commandHandler.emit("updatePorts",{nodeId:e.id,ports:[{portId:this.id(),portChanges:{side:i}}]}))}),Me(()=>{let e=this.nodeData();this.isInitialized()&&e&&Oe(()=>{this.linkingInputDirective.setTargetNode(e)})}),Me(()=>{let e=this.nodeData(),t=this.isInitialized(),o=this.lastType(),i=this.type();t&&o!==i&&e&&(Oe(()=>{this.lastType.set(i)}),this.flowCoreProvider.provide().commandHandler.emit("updatePorts",{nodeId:e.id,ports:[{portId:this.id(),portChanges:{type:i}}]}))})}ngOnInit(){this.lastSide.set(this.side()),this.lastType.set(this.type());let e=this.nodeData();e&&(this.flowCoreProvider.provide().updater.addPort(e.id,{id:this.id(),type:this.type(),nodeId:e.id,side:this.side()}),this.batchResizeObserver.observe(this.hostElement.nativeElement,{type:"port",nodeId:e.id,portId:this.id()}),this.isInitialized.set(!0))}ngOnDestroy(){let e=this.id(),t=this.nodeData();if(!t)return;let o=this.flowCoreProvider.provide();o.isInitialized&&(this.batchResizeObserver.unobserve(this.hostElement.nativeElement),o.getNodeById(t.id)&&(o.isVirtualizationActive&&!o.isNodeCurrentlyRendered(t.id)||o.internalUpdater.deletePort(t.id,e)))}custom=Oo("contentProjection");hasContent=!1;ngAfterContentInit(){this.hasContent=(this.custom()?.nativeElement?.childNodes?.length??0)>0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-port"]],viewQuery:function(t,o){t&1&&Nn(o.custom,Lg,5),t&2&&kn()},hostVars:5,hostBindings:function(t,o){t&2&&(se("data-port-id",o.id()),Se(o.portClass),$e("display",o.isRenderedOnCanvas()?"block":"none"))},inputs:{id:[1,"id"],type:[1,"type"],side:[1,"side"],originPoint:[1,"originPoint"]},features:[pt([{directive:ec,inputs:["portId","id"]}]),le],ngContentSelectors:et,decls:3,vars:0,consts:[["contentProjection",""],[1,"content-projection"]],template:function(t,o){t&1&&(ae(),G(0,"div",1,0),K(2),U())},styles:['[_nghost-%COMP%]{position:absolute;width:fit-content;height:fit-content;inset:0;box-sizing:content-box;z-index:2;border-radius:var(--ngd-port-border-radius);cursor:crosshair}[_nghost-%COMP%]:has(.content-projection:not(:empty)){--ngd-port-border-radius: 0%}[_nghost-%COMP%]:has(.content-projection:empty), [_nghost-%COMP%]   .content-projection[_ngcontent-%COMP%]:not(:empty){display:flex;background:var(--ngd-port-background-color);border:var(--ngd-port-border-size) solid var(--ngd-port-border-color);border-radius:var(--ngd-port-border-radius);transition-property:background-color,border-color,outline,box-shadow;transition-timing-function:ease-in-out;transition-duration:.1s;transform-origin:center}[_nghost-%COMP%]:has(.content-projection:empty){width:var(--ngd-port-size);height:var(--ngd-port-size)}[_nghost-%COMP%]:has(.content-projection:empty):before{content:"";position:absolute;width:18px;height:18px;top:50%;left:50%;border-radius:var(--ngd-port-border-radius)}.left[_nghost-%COMP%]{top:50%;left:0}.right[_nghost-%COMP%]{top:50%;left:100%}.top[_nghost-%COMP%]{top:0;left:50%}.bottom[_nghost-%COMP%]{top:100%;left:50%}.origin-top-left[_nghost-%COMP%]{transform:translate(0)}.origin-top-center[_nghost-%COMP%]{transform:translate(-50%)}.origin-top-right[_nghost-%COMP%]{transform:translate(-100%)}.origin-center-left[_nghost-%COMP%]{transform:translateY(-50%)}.origin-center[_nghost-%COMP%]{transform:translate(-50%,-50%)}.origin-center-right[_nghost-%COMP%]{transform:translate(-100%,-50%)}.origin-bottom-left[_nghost-%COMP%]{transform:translateY(-100%)}.origin-bottom-center[_nghost-%COMP%]{transform:translate(-50%,-100%)}.origin-bottom-right[_nghost-%COMP%]{transform:translate(-100%,-100%)}'],changeDetection:0})},wg=class n{inputEventsRouter=f(qe);touchEventsStateService=f(Rn);targetData=_();ngOnDestroy(){this.cleanup()}onPointerDown(e){if(!this.shouldHandle(e))return;e.rotateHandled=!0,this.touchEventsStateService.currentEvent.set(Je.Rotate);let t=this.targetData();if(!t)return;let o=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},o),{name:"rotate",phase:"start",target:t,lastInputPoint:{x:e.clientX,y:e.clientY},center:this.getNodeCenter(t)})),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp),document.addEventListener("pointercancel",this.onPointerCancel)}onPointerMove=e=>{if(this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())return void this.onPointerUp(e);e.rotateHandled=!0;let t=this.targetData();if(!t)return;let o=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},o),{name:"rotate",phase:"continue",target:t,lastInputPoint:{x:e.clientX,y:e.clientY},center:this.getNodeCenter(t)}))};onPointerUp=e=>{let t=this.targetData();if(!t)return;let o=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},o),{name:"rotate",phase:"end",target:t,lastInputPoint:{x:e.clientX,y:e.clientY},center:this.getNodeCenter(t)})),this.cleanup()};onPointerCancel=e=>{let t=this.targetData();if(!t)return;let o=this.inputEventsRouter.getBaseEvent(e);this.inputEventsRouter.emit(y(g({},o),{name:"rotate",phase:"end",target:t,lastInputPoint:{x:e.clientX,y:e.clientY},center:this.getNodeCenter(t)})),this.cleanup()};shouldHandle(e){return!(e.boxSelectionHandled||this.touchEventsStateService.panningHandled()||this.touchEventsStateService.zoomingHandled())}cleanup(){this.touchEventsStateService.clearCurrentEvent(),document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),document.removeEventListener("pointercancel",this.onPointerCancel)}getNodeCenter(e){let{x:t,y:o}=e.position,{width:i,height:r}=e.size||{width:0,height:0};return{x:t+i/2,y:o+r/2}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramRotateHandle",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})},inputs:{targetData:[1,"targetData"]}})},Eg=class n{custom=Oo("contentProjection");data=_.required();isRotating=F(!1);hasCustomHandle=!1;ngAfterContentInit(){this.hasCustomHandle=(this.custom()?.nativeElement?.childNodes?.length??0)>0}get pointerDownAttr(){return this.isRotating()?"true":null}pointerDown(){this.isRotating.set(!0)}pointerUp(){this.isRotating.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-rotate-handle"]],viewQuery:function(t,o){t&1&&Nn(o.custom,Lg,5),t&2&&kn()},hostVars:5,hostBindings:function(t,o){t&1&&x("pointerdown",function(){return o.pointerDown()})("pointerup",function(){return o.pointerUp()},Po),t&2&&(se("data-rotating",o.pointerDownAttr),ee("rotate-handle",!o.hasCustomHandle)("ng-diagram-rotate-handle",!0))},inputs:{data:[1,"data"]},features:[pt([{directive:wg,inputs:["targetData","data"]}])],ngContentSelectors:et,decls:4,vars:1,consts:[["contentProjection",""],[1,"content-projection"],["xmlns","http://www.w3.org/2000/svg","width","18","height","19","viewBox","0 0 18 19","fill","none"],["d","M15.75 9.5637C15.7502 11.3383 15.0515 13.0416 13.8051 14.3049C12.5588 15.5682 10.8651 16.2899 9.0907 16.3137H9C7.27611 16.318 5.61676 15.6583 4.36641 14.4715C4.31271 14.4207 4.26955 14.3599 4.23938 14.2924C4.20921 14.2249 4.19262 14.1522 4.19056 14.0783C4.1885 14.0044 4.20102 13.9309 4.22739 13.8618C4.25376 13.7928 4.29347 13.7296 4.34426 13.6759C4.39504 13.6222 4.45591 13.5791 4.52337 13.5489C4.59084 13.5187 4.66359 13.5021 4.73746 13.5001C4.81134 13.498 4.8849 13.5105 4.95394 13.5369C5.02298 13.5633 5.08615 13.603 5.13984 13.6538C5.94408 14.4122 6.95396 14.9169 8.04335 15.1047C9.13273 15.2926 10.2533 15.1553 11.2651 14.7099C12.2769 14.2646 13.1351 13.531 13.7324 12.6008C14.3297 11.6706 14.6396 10.585 14.6235 9.4797C14.6075 8.37436 14.266 7.29826 13.6419 6.38583C13.0178 5.4734 12.1387 4.76509 11.1144 4.34939C10.09 3.9337 8.96594 3.82904 7.88249 4.04849C6.79903 4.26794 5.80425 4.80178 5.02242 5.58331C5.01668 5.58952 5.01057 5.59539 5.00414 5.60089L3.13523 7.3137H5.0625C5.21168 7.3137 5.35476 7.37296 5.46025 7.47845C5.56574 7.58394 5.625 7.72701 5.625 7.8762C5.625 8.02538 5.56574 8.16846 5.46025 8.27395C5.35476 8.37944 5.21168 8.4387 5.0625 8.4387H1.6875C1.53832 8.4387 1.39524 8.37944 1.28975 8.27395C1.18426 8.16846 1.125 8.02538 1.125 7.8762V4.5012C1.125 4.35201 1.18426 4.20894 1.28975 4.10345C1.39524 3.99796 1.53832 3.9387 1.6875 3.9387C1.83668 3.9387 1.97976 3.99796 2.08525 4.10345C2.19074 4.20894 2.25 4.35201 2.25 4.5012V6.59651L4.23633 4.78245C5.18131 3.84113 6.384 3.20089 7.69256 2.94253C9.00112 2.68418 10.3569 2.8193 11.5887 3.33084C12.8205 3.84238 13.8732 4.7074 14.6138 5.81671C15.3544 6.92602 15.7498 8.22988 15.75 9.5637Z","fill","white"]],template:function(t,o){t&1&&(ae(),G(0,"div",1,0),K(2),U(),X(3,CT,2,0,":svg:svg",2)),t&2&&(b(3),Q(o.hasCustomHandle?-1:3))},styles:[".content-projection[_ngcontent-%COMP%]:not(:empty){width:100%;height:100%}.rotate-handle[_nghost-%COMP%]{background-color:var(--ngd-rotate-handle-background-color);border-radius:50%;transition:background-color .1s ease-in-out}.rotate-handle[_nghost-%COMP%]:hover, .rotate-handle[_nghost-%COMP%]:focus-visible{background-color:var(--ngd-rotate-handle-background-color-hover)}.rotate-handle[data-rotating][_nghost-%COMP%], .rotate-handle.active[_nghost-%COMP%]{background-color:var(--ngd-rotate-handle-background-color-active)}[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;width:var(--ngd-rotate-handle-size);height:var(--ngd-rotate-handle-size);position:absolute;transform:translate(50%,-50%);z-index:10;box-sizing:border-box;pointer-events:auto;cursor:grab;top:var(--ngd-rotate-handle-top);right:var(--ngd-rotate-handle-right);bottom:var(--ngd-rotate-handle-bottom);left:var(--ngd-rotate-handle-left)}[data-rotating][_nghost-%COMP%], .active[_nghost-%COMP%], .active[_nghost-%COMP%], .active   [_nghost-%COMP%]{cursor:grabbing}"],changeDetection:0})},Uo=class n extends as{diagramService=f(st);defaultRotatable=_(void 0);dataRotatable=m(()=>this.nodeData()?.rotatable);isRotating=F(!1);nodeData=m(()=>this.nodeComponent?.node());isRotatable=m(()=>this.dataRotatable()??this.defaultRotatable()??this.diagramService.config().nodeRotation?.defaultRotatable);eventTarget=m(()=>({type:"rotate-handle",element:this.nodeData()}));showAdornment=m(()=>!!this.nodeData()?.selected&&this.isRenderedOnCanvas()&&!!this.isRotatable());static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275cmp=S({type:n,selectors:[["ng-diagram-node-rotate-adornment"]],hostAttrs:[1,"node-rotate-adornment"],inputs:{defaultRotatable:[1,"defaultRotatable"]},features:[le],ngContentSelectors:et,decls:1,vars:1,consts:[[3,"data"]],template:function(t,o){t&1&&(ae(),X(0,DT,2,1,"ng-diagram-rotate-handle",0)),t&2&&Q(o.showAdornment()?0:-1)},dependencies:[Eg],styles:["[_nghost-%COMP%]{position:absolute;inset:0;pointer-events:none}"],changeDetection:0})},Mg=class n{diagramService=f(st);node=_.required();isSelected=m(()=>this.node().selected??!1);classes=m(()=>"node "+(this.isSelected()?"isSelected":""));enablePortHover=m(()=>!this.diagramService.actionState().resize);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-base-node-template"]],hostVars:4,hostBindings:function(t,o){t&2&&ee("isSelected",o.isSelected())("ng-diagram-port-hoverable-over-node",o.enablePortHover())},inputs:{node:[1,"node"]},ngContentSelectors:et,decls:6,vars:3,consts:[["ngDiagramNodeSelected","",3,"node"],["id","port-left","type","both","side","left"],["id","port-right","type","both","side","right"]],template:function(t,o){t&1&&(ae(),A(0,"ng-diagram-node-rotate-adornment"),w(1,"ng-diagram-node-resize-adornment")(2,"div",0),K(3),D(),A(4,"ng-diagram-port",1)(5,"ng-diagram-port",2),D()),t&2&&(b(2),Se(o.classes()),I("node",o.node()))},dependencies:[On,hn,gn,Uo],styles:["[_nghost-%COMP%]:hover   .node[_ngcontent-%COMP%]{border-color:var(--ngd-node-border-color-hover)}.node[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.5rem;width:100%;background-color:var(--ngd-node-bg-primary-default);border:var(--ngd-node-border-size) solid var(--ngd-node-border-color);color:var(--ngd-txt-primary-default);border-radius:var(--ngd-node-border-radius)}.node.isSelected[_ngcontent-%COMP%]{border-color:var(--ngd-node-border-color-hover)}"],changeDetection:0})},Sg=class n{node=_.required();label=m(()=>{let e=this.node().data;return"label"in e?e.label:this.node().id});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-default-node-template"]],inputs:{node:[1,"node"]},decls:3,vars:2,consts:[[3,"node"]],template:function(t,o){t&1&&(w(0,"ng-diagram-base-node-template",0)(1,"span"),V(2),D()()),t&2&&(I("node",o.node()),b(2),we(o.label()))},dependencies:[Mg],encapsulation:2,changeDetection:0})},ds=class n{panel=F(null);position=m(()=>this.panel()?.position());register(e){this.panel.set(e)}unregister(){this.panel.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Ig=class n{DEFAULT_POSITION="bottom-right";ALTERNATIVE_POSITION="top-right";panelRegistry=f(ds);position=m(()=>this.panelRegistry.position()===this.DEFAULT_POSITION?this.ALTERNATIVE_POSITION:this.DEFAULT_POSITION);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-watermark"]],hostVars:2,hostBindings:function(t,o){t&2&&Se(o.position())},decls:5,vars:0,consts:[["href","https://www.ngdiagram.dev/","target","_blank"],[1,"sr-only"],["width","479","height","90","viewBox","0 0 479 90","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M78.1895 20.5088C82.5953 20.5088 85.9324 21.2858 88.2002 22.8408C90.468 24.3959 92.1205 26.0165 93.1572 27.7012H94.9062V21.8691H106.958V78.6289C106.958 81.9333 105.986 84.5572 104.042 86.501C102.098 88.5096 99.5063 89.5146 96.2666 89.5146H64V78.8232H91.9902C93.8044 78.8232 94.7119 77.8511 94.7119 75.9072V63.3701H92.9629C92.315 64.4068 91.4075 65.4757 90.2412 66.5771C89.075 67.6138 87.5199 68.4884 85.5762 69.2012C83.6324 69.9139 81.1699 70.2705 78.1895 70.2705C74.2371 70.2705 70.5762 69.3312 67.207 67.4521C63.9026 65.5083 61.2459 62.7541 59.2373 59.1904C57.2288 55.562 56.2246 51.2208 56.2246 46.167V44.6123C56.2246 39.5584 57.2287 35.2492 59.2373 31.6855C61.2458 28.0572 63.9027 25.3038 67.207 23.4248C70.5763 21.481 74.2371 20.5088 78.1895 20.5088ZM278.176 20.5088C282.582 20.5088 285.919 21.2858 288.187 22.8408C290.454 24.3959 292.107 26.0165 293.144 27.7012H294.893V21.8691H306.944V78.6289C306.944 81.9333 305.972 84.5572 304.028 86.501C302.085 88.5096 299.493 89.5146 296.253 89.5146H263.986V78.8232H291.977C293.791 78.8232 294.698 77.8511 294.698 75.9072V63.3701H292.949C292.301 64.4068 291.394 65.4757 290.228 66.5771C289.061 67.6138 287.506 68.4885 285.562 69.2012C283.619 69.9139 281.156 70.2705 278.176 70.2705C274.223 70.2705 270.563 69.3311 267.193 67.4521C263.889 65.5083 261.232 62.7541 259.224 59.1904C257.215 55.562 256.211 51.2208 256.211 46.167V44.6123C256.211 39.5584 257.215 35.2492 259.224 31.6855C261.232 28.0572 263.889 25.3038 267.193 23.4248C270.563 21.481 274.223 20.5088 278.176 20.5088ZM225.268 20.5088C231.617 20.5088 236.639 22.0958 240.332 25.2705C244.025 28.4454 245.872 33.0464 245.872 39.0723V57.0527C245.872 58.9964 246.78 59.9678 248.594 59.9678H252.481V70.0762H244.317C241.92 70.0762 239.944 69.4933 238.389 68.3271C236.834 67.1609 236.056 65.605 236.056 63.6611V63.5645H234.209C233.95 64.342 233.367 65.3791 232.46 66.6748C231.553 67.9058 230.127 69.0067 228.184 69.9785C226.24 70.9504 223.583 71.4365 220.214 71.4365C216.78 71.4365 213.703 70.8537 210.981 69.6875C208.26 68.4565 206.09 66.707 204.47 64.4395C202.915 62.1069 202.137 59.2879 202.137 55.9834C202.137 52.6789 202.915 49.9247 204.47 47.7217C206.09 45.4541 208.292 43.7694 211.078 42.668C213.929 41.5017 217.169 40.919 220.797 40.9189H234.015V38.1973C234.015 35.9295 233.302 34.0827 231.877 32.6572C230.451 31.167 228.183 30.4219 225.073 30.4219C222.028 30.4219 219.761 31.1351 218.271 32.5605C216.78 33.9212 215.808 35.7032 215.354 37.9062L204.08 34.1152C204.858 31.6531 206.089 29.4178 207.773 27.4092C209.523 25.3358 211.823 23.6832 214.674 22.4521C217.589 21.1563 221.121 20.5088 225.268 20.5088ZM374.047 20.5088C380.396 20.5088 385.418 22.0959 389.111 25.2705C392.805 28.4454 394.651 33.0464 394.651 39.0723V57.0527C394.651 58.9964 395.559 59.9678 397.373 59.9678H401.261V70.0762H393.097C390.699 70.0762 388.723 69.4933 387.168 68.3271C385.613 67.1609 384.835 65.605 384.835 63.6611V63.5645H382.988C382.729 64.342 382.146 65.3791 381.239 66.6748C380.332 67.9058 378.906 69.0067 376.963 69.9785C375.019 70.9504 372.362 71.4365 368.993 71.4365C365.559 71.4365 362.482 70.8537 359.761 69.6875C357.04 68.4565 354.869 66.707 353.249 64.4395C351.694 62.1069 350.916 59.2879 350.916 55.9834C350.916 52.6789 351.694 49.9247 353.249 47.7217C354.869 45.4541 357.072 43.7694 359.857 42.668C362.708 41.5017 365.948 40.919 369.576 40.9189H382.794V38.1973C382.794 35.9295 382.082 34.0827 380.656 32.6572C379.231 31.167 376.963 30.4219 373.853 30.4219C370.807 30.4219 368.54 31.1351 367.05 32.5605C365.56 33.9212 364.587 35.7032 364.134 37.9062L352.859 34.1152C353.637 31.6531 354.868 29.4178 356.553 27.4092C358.302 25.3358 360.602 23.6832 363.453 22.4521C366.369 21.1563 369.9 20.5088 374.047 20.5088ZM28.5029 21.0918C32.2609 21.0918 35.5332 21.9664 38.3193 23.7158C41.1701 25.4004 43.3727 27.7654 44.9277 30.8105C46.4828 33.7911 47.2607 37.2904 47.2607 41.3076V70.0762H35.0146V42.2793C35.0146 38.6509 34.1072 35.9294 32.293 34.1152C30.5436 32.3012 28.017 31.3936 24.7129 31.3936C20.9549 31.3936 18.0392 32.6577 15.9658 35.1846C13.8924 37.6468 12.8555 41.1132 12.8555 45.584V70.0762H0.609375V21.8691H12.6611V28.1865H14.4102C15.1877 26.5019 16.6461 24.915 18.7842 23.4248C20.9224 21.8697 24.1618 21.0918 28.5029 21.0918ZM144.251 2.04199C153.387 2.04207 160.319 4.37504 165.049 9.04004C169.844 13.6404 172.241 20.5086 172.241 29.6445V42.4736C172.241 51.6096 169.844 58.5106 165.049 63.1758C160.319 67.7759 153.386 70.0761 144.251 70.0762H116.26V58.8018H125.201V13.3164H116.26V2.04199H144.251ZM193.622 70.0762H181.376V21.8691H193.622V70.0762ZM347.539 32.5605H341.513C338.403 32.5606 335.843 33.4024 333.835 35.0869C331.826 36.7067 330.822 39.234 330.822 42.668V70.0762H318.576V21.8691H330.628V27.3115H332.377C333.09 25.3679 334.256 23.9422 335.876 23.0352C337.56 22.1281 339.504 21.6749 341.707 21.6748H347.539V32.5605ZM461.921 21.0918C464.901 21.0919 467.59 21.7394 469.987 23.0352C472.449 24.2662 474.393 26.1779 475.818 28.7695C477.309 31.2965 478.054 34.504 478.054 38.3916V70.0762H465.808V39.2666C465.808 36.61 465.127 34.6338 463.767 33.3379C462.406 31.9774 460.495 31.2969 458.033 31.2969C455.247 31.2969 453.077 32.2043 451.521 34.0186C450.031 35.7679 449.286 38.2944 449.286 41.5986V70.0762H437.04V39.2666C437.04 36.6101 436.36 34.6338 434.999 33.3379C433.638 31.9772 431.727 31.2969 429.265 31.2969C426.479 31.2969 424.308 32.2043 422.753 34.0186C421.263 35.7679 420.518 38.2945 420.518 41.5986V70.0762H408.271V21.8691H420.323V27.1172H422.072C422.915 25.4974 424.308 24.1047 426.252 22.9385C428.196 21.7075 430.755 21.0918 433.93 21.0918C437.364 21.0918 440.117 21.7723 442.19 23.1328C444.264 24.4287 445.852 26.146 446.953 28.2842H448.702C449.804 26.2108 451.36 24.4935 453.368 23.1328C455.377 21.7723 458.228 21.0918 461.921 21.0918ZM221.672 50.0547C219.404 50.0547 217.622 50.5408 216.326 51.5127C215.03 52.4846 214.383 53.8454 214.383 55.5947C214.383 57.3441 215.063 58.7696 216.424 59.8711C217.784 60.9725 219.761 61.5234 222.353 61.5234C225.786 61.5234 228.573 60.5841 230.711 58.7051C232.914 56.7613 234.015 54.2013 234.015 51.0264V50.0547H221.672ZM370.451 50.0547C368.183 50.0547 366.401 50.5408 365.105 51.5127C363.81 52.4846 363.162 53.8454 363.162 55.5947C363.162 57.3441 363.842 58.7696 365.203 59.8711C366.564 60.9725 368.54 61.5234 371.132 61.5234C374.566 61.5234 377.352 60.5841 379.49 58.7051C381.693 56.7613 382.794 54.2013 382.794 51.0264V50.0547H370.451ZM81.6885 31.1992C77.9305 31.1992 74.7877 32.3985 72.2607 34.7959C69.734 37.1284 68.4708 40.4976 68.4707 44.9033V45.876C68.4708 50.2169 69.734 53.5861 72.2607 55.9834C74.7877 58.3808 77.9305 59.5791 81.6885 59.5791C85.4465 59.5791 88.5893 58.3808 91.1162 55.9834C93.6429 53.5861 94.9062 50.2169 94.9062 45.876V44.9033C94.9062 40.4976 93.6429 37.1284 91.1162 34.7959C88.6541 32.3985 85.5113 31.1992 81.6885 31.1992ZM281.675 31.1992C277.917 31.1992 274.774 32.3985 272.247 34.7959C269.72 37.1284 268.457 40.4976 268.457 44.9033V45.876C268.457 50.2169 269.72 53.5861 272.247 55.9834C274.774 58.3808 277.917 59.5791 281.675 59.5791C285.433 59.5791 288.576 58.3808 291.103 55.9834C293.629 53.5861 294.892 50.2169 294.893 45.876V44.9033C294.893 40.4976 293.629 37.1284 291.103 34.7959C288.64 32.3985 285.498 31.1992 281.675 31.1992ZM138.03 58.4131H144.445C149.629 58.413 153.419 57.0523 155.816 54.3311C158.214 51.6097 159.412 47.7866 159.412 42.8623V29.2559C159.412 24.2668 158.214 20.4437 155.816 17.7871C153.419 15.0658 149.629 13.7052 144.445 13.7051H138.03V58.4131ZM187.499 0.681641C189.767 0.681641 191.646 1.3939 193.137 2.81934C194.627 4.24481 195.372 6.12444 195.372 8.45703C195.372 10.7894 194.627 12.6683 193.137 14.0938C191.646 15.5192 189.767 16.2324 187.499 16.2324C185.296 16.2324 183.417 15.5192 181.862 14.0938C180.372 12.6683 179.627 10.7895 179.627 8.45703C179.627 6.12444 180.372 4.24481 181.862 2.81934C183.417 1.39408 185.296 0.681711 187.499 0.681641Z"]],template:function(t,o){t&1&&(G(0,"a",0)(1,"span",1),V(2,"ngDiagram"),U(),Re(),G(3,"svg",2),ke(4,"path",3),U()())},styles:["[_nghost-%COMP%]{position:absolute;width:var(--watermark-size)}.bottom-right[_nghost-%COMP%]{bottom:1rem;right:1rem}.top-right[_nghost-%COMP%]{top:1rem;right:1rem}.bottom-left[_nghost-%COMP%]{bottom:1rem;left:1rem}.top-left[_nghost-%COMP%]{top:1rem;left:1rem}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7;height:100%;width:100%;display:block}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--watermark-fill)}[_nghost-%COMP%]   [_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]{--watermark-size: min(4rem, 10%);--watermark-fill: #b3b3b3}[_nghost-%COMP%]   .sr-only[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}"]})},xg=class n{inputEventsRouter=f(qe);boxSelectionProvider=f(ns);flowCoreProvider=f(ye);touchEventsStateService=f(Rn);touchStartPoint=null;isBoxSelectionActive=!1;longPressTimer=null;LONG_PRESS_DELAY=400;MOVE_THRESHOLD=10;onTouchStart(e){!this.isSingleTouch(e)||this.touchEventsStateService.rotateHandled()||this.touchEventsStateService.resizeHandled()||this.touchEventsStateService.linkingHandled()?this.cancelBoxSelection():(this.touchStartPoint={x:e.touches[0].clientX,y:e.touches[0].clientY},this.longPressTimer=setTimeout(()=>{this.isBoxSelectionActive=!0,this.touchEventsStateService.currentEvent.set(Je.BoxSelection);let t=e.touches[0]||this.touchStartPoint;t&&this.emitBoxSelectionEvent("start",e,t)},this.LONG_PRESS_DELAY),e.preventDefault(),e.stopPropagation())}onTouchMove(e){if(!this.isSingleTouch(e)||this.shouldCancelDuringLongPress(e))return void this.cancelBoxSelection();if(!this.isBoxSelectionActive||!this.touchStartPoint)return;let t=e.touches[0];this.emitBoxSelectionEvent("continue",e,t),this.updateBoundingBox(t),e.preventDefault(),e.stopPropagation()}onTouchEnd(e){if(this.clearLongPressTimer(),!this.isBoxSelectionActive)return void(this.touchStartPoint=null);let t=e.changedTouches[0]||e.touches[0]||this.touchStartPoint;t&&this.emitBoxSelectionEvent("end",e,t),this.touchEventsStateService.clearCurrentEvent(),this.cancelBoxSelection(),e.preventDefault(),e.stopPropagation()}cancelBoxSelection(){this.isBoxSelectionActive=!1,this.touchStartPoint=null,this.boxSelectionProvider.boundingBox.set(null),this.clearLongPressTimer()}clearLongPressTimer(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}isSingleTouch(e){return e.touches.length===1}shouldCancelDuringLongPress(e){if(!this.longPressTimer||!this.touchStartPoint||this.isBoxSelectionActive)return!1;let t=e.touches[0];return Math.max(Math.abs(t.clientX-this.touchStartPoint.x),Math.abs(t.clientY-this.touchStartPoint.y))>this.MOVE_THRESHOLD}emitBoxSelectionEvent(e,t,o){if(!o)return;let i=this.inputEventsRouter.getBaseEvent(t);this.inputEventsRouter.emit(y(g({},i),{name:"boxSelection",phase:e,target:void 0,targetType:"diagram",lastInputPoint:{x:"clientX"in o?o.clientX:o.x,y:"clientY"in o?o.clientY:o.y}}))}updateBoundingBox(e){let t=this.flowCoreProvider.provide(),{x:o,y:i}=t.clientToFlowViewportPosition(this.touchStartPoint),{x:r,y:s}=t.clientToFlowViewportPosition({x:e.clientX,y:e.clientY}),a=Math.min(o,r),d=Math.min(i,s),c=Math.abs(r-o),l=Math.abs(s-i);this.boxSelectionProvider.boundingBox.set({x:a,y:d,width:c,height:l})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramMobileBoxSelection",""]],hostBindings:function(t,o){t&1&&x("touchstart",function(r){return o.onTouchStart(r)})("touchmove",function(r){return o.onTouchMove(r)})("touchend",function(r){return o.onTouchEnd(r)})("touchcancel",function(r){return o.onTouchEnd(r)})}})},cs=class n{elementRef=f(Y);flowCoreProvider=f(ye);renderer=f(pn);flowResizeBatchProcessor=f(Zd);templateProviderService=f(ic);initializedModel=null;resizeObserver=null;config=_();model=_.required();middlewares=_(_0);nodeTemplateMap=_(new zi);edgeTemplateMap=_(new Hi);nodes=this.renderer.nodes;edges=this.renderer.edges;viewport=this.renderer.viewport;viewportPannable=this.renderer.viewportPannable;diagramInit=new re;edgeDrawn=new re;selectionMoved=new re;selectionChanged=new re;selectionRemoved=new re;groupMembershipChanged=new re;selectionRotated=new re;viewportChanged=new re;clipboardPasted=new re;nodeResized=new re;paletteItemDropped=new re;constructor(){Me(()=>{let e=this.model();this.initializedModel!=e&&(Oe(()=>{this.renderer.isInitialized.set(!1),this.renderer.viewportPannable.set(this.config()?.viewportPanningEnabled??!0),this.flowCoreProvider.destroy(),this.flowCoreProvider.init(e,this.middlewares(),this.getFlowOffset,this.getViewportSize,this.config())}),this.initializedModel=e,this.setupEventBridge())}),Me(()=>{let e=this.nodeTemplateMap();this.templateProviderService.setNodeTemplateMap(e)}),Me(()=>{let e=this.edgeTemplateMap();this.templateProviderService.setEdgeTemplateMap(e)})}ngOnInit(){this.flowResizeBatchProcessor.initialize(),this.setupViewportSizeTracking()}ngOnDestroy(){this.flowCoreProvider.destroy(),this.cleanupViewportSizeTracking()}getNodeTemplate(e){return this.templateProviderService.getNodeTemplate(e)}getEdgeTemplate(e){return this.templateProviderService.getEdgeTemplate(e)}trackNode=(e,t)=>t._internalId||t.id;isGroup(e){return"isGroup"in e}castToGroupNode(e){return e}getBoundingClientRect(){return this.elementRef.nativeElement.getBoundingClientRect()}getFlowOffset=()=>{let e=this.elementRef.nativeElement.getBoundingClientRect();return e?{x:e.left,y:e.top}:{x:0,y:0}};getViewportSize=()=>{let e=this.elementRef.nativeElement.getBoundingClientRect();return e?{width:e.width,height:e.height}:{width:0,height:0}};setupViewportSizeTracking(){if(typeof ResizeObserver>"u")return;this.resizeObserver=new ResizeObserver(t=>{let o=t[0];if(o){let{width:i,height:r}=o.contentRect;this.updateViewportSize(i,r)}}),this.resizeObserver.observe(this.elementRef.nativeElement);let e=this.elementRef.nativeElement.getBoundingClientRect();this.updateViewportSize(e.width,e.height)}cleanupViewportSizeTracking(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}updateViewportSize(e,t){if(!this.flowCoreProvider.isInitialized())return;let o=this.flowCoreProvider.provide(),i=o.getState().metadata.viewport;i.width===e&&i.height===t||o.applyUpdate({metadataUpdate:{viewport:y(g({},i),{width:e,height:t})}},"updateViewportSize")}setupEventBridge(){let e=this.flowCoreProvider.provide(),t=e.eventManager;t.on("diagramInit",o=>{setTimeout(()=>{this.renderer.isInitialized.set(!0),this.diagramInit.emit(o),e.config.zoom.zoomToFit.onInit&&e.commandHandler.emit("zoomToFit",{})})}),t.on("edgeDrawn",o=>this.edgeDrawn.emit(o)),t.on("selectionMoved",o=>this.selectionMoved.emit(o)),t.on("selectionChanged",o=>this.selectionChanged.emit(o)),t.on("selectionRemoved",o=>this.selectionRemoved.emit(o)),t.on("groupMembershipChanged",o=>this.groupMembershipChanged.emit(o)),t.on("selectionRotated",o=>this.selectionRotated.emit(o)),t.on("viewportChanged",o=>this.viewportChanged.emit(o)),t.on("clipboardPasted",o=>this.clipboardPasted.emit(o)),t.on("nodeResized",o=>this.nodeResized.emit(o)),t.on("paletteItemDropped",o=>this.paletteItemDropped.emit(o))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram"]],hostVars:2,hostBindings:function(t,o){t&2&&ee("pannable",o.viewportPannable())},inputs:{config:[1,"config"],model:[1,"model"],middlewares:[1,"middlewares"],nodeTemplateMap:[1,"nodeTemplateMap"],edgeTemplateMap:[1,"edgeTemplateMap"]},outputs:{diagramInit:"diagramInit",edgeDrawn:"edgeDrawn",selectionMoved:"selectionMoved",selectionChanged:"selectionChanged",selectionRemoved:"selectionRemoved",groupMembershipChanged:"groupMembershipChanged",selectionRotated:"selectionRotated",viewportChanged:"viewportChanged",clipboardPasted:"clipboardPasted",nodeResized:"nodeResized",paletteItemDropped:"paletteItemDropped"},features:[pt([ug,cg,xg,Xh,rg,og,lg,ig,Kh,ng,Jh])],ngContentSelectors:ET,decls:10,vars:2,consts:[[1,"diagram-background-container"],[3,"viewport"],[1,"ng-diagram-node",3,"node"],[3,"edge"],[4,"ngComponentOutlet","ngComponentOutletInputs"],[3,"node"]],template:function(t,o){if(t&1&&(ae(wT),w(0,"div",0),K(1),D(),w(2,"ng-diagram-canvas",1),Xe(3,kT,3,2,"ng-diagram-edge",null,IT),A(5,"ng-diagram-marker-arrow"),Xe(6,FT,4,3,"ng-diagram-node",2,o.trackNode,!0),D(),X(8,LT,1,0,"ng-diagram-watermark"),A(9,"ng-diagram-box-selection")),t&2){let i;b(2),I("viewport",o.viewport()),b(),Qe(o.edges()),b(3),Qe(o.nodes()),b(2),Q((i=o.config())!=null&&i.hideWatermark?-1:8)}},dependencies:[rt,xi,pg,rc,vg,gg,Sg,Dg,yg,Ig,fg],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;position:relative;overflow:hidden;background-color:var(--ngd-diagram-background-color);touch-action:none;transform:translateZ(0);-webkit-font-smoothing:antialiased;outline:none}.pannable[_nghost-%COMP%]{cursor:grab}.pannable.panning[_nghost-%COMP%]{cursor:grabbing}[_nghost-%COMP%]   .diagram-background-container[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0})},Tg=class n{panelRegistry=f(ds);position=_("bottom-right");ngAfterViewInit(){this.panelRegistry?.register(this)}ngOnDestroy(){this.panelRegistry?.unregister()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-panel"]],hostVars:2,hostBindings:function(t,o){t&2&&Se(o.position())},inputs:{position:[1,"position"]},ngContentSelectors:et,decls:1,vars:0,template:function(t,o){t&1&&(ae(),K(0))},styles:["[_nghost-%COMP%]{overflow:hidden;border-radius:var(--ngd-minimap-border-radius);padding:var(--ngd-minimap-padding);background-color:var(--ngd-minimap-background);box-shadow:0 8px 16px -4px var(--ngd-minimap-shadow-color);border:1px solid var(--ngd-minimap-border-color);display:flex;flex-direction:column;gap:var(--ngd-minimap-padding)}"],changeDetection:0})},Ng=class n{viewportService=f(je);step=_(.1);zoomPercentage=m(()=>Math.round(100*this.viewportService.scale()));canZoomIn=m(()=>this.viewportService.scale()+this.step()<=this.viewportService.maxZoom);canZoomOut=m(()=>this.viewportService.scale()-this.step()>=this.viewportService.minZoom);zoomIn(){let e=this.viewportService.scale(),t=(e+this.step())/e;this.viewportService.zoom(t)}zoomOut(){let e=this.viewportService.scale(),t=(e-this.step())/e;this.viewportService.zoom(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-zoom-controls"]],inputs:{step:[1,"step"]},decls:7,vars:3,consts:[[1,"zoom-controls-container"],["aria-label","Zoom out",1,"nav-button",3,"click","disabled"],[1,"label"],["aria-label","Zoom in",1,"nav-button",3,"click","disabled"]],template:function(t,o){t&1&&(G(0,"div",0)(1,"button",1),it("click",function(){return o.zoomOut()}),V(2,"\u2212"),U(),G(3,"span",2),V(4),U(),G(5,"button",3),it("click",function(){return o.zoomIn()}),V(6,"+"),U()()),t&2&&(b(),ln("disabled",!o.canZoomOut()),b(3),un("",o.zoomPercentage(),"%"),b(),ln("disabled",!o.canZoomIn()))},styles:[".zoom-controls-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.zoom-controls-container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center;font-size:var(--ngd-zoom-controls-font-size);font-weight:var(--ngd-zoom-controls-font-weight);color:var(--ngd-zoom-controls-color);-webkit-user-select:none;user-select:none}.nav-button[_ngcontent-%COMP%]{width:var(--ngd-nav-button-size);height:var(--ngd-nav-button-size);color:var(--ngd-nav-button-color);border-radius:var(--ngd-nav-button-border-radius);padding:var(--ngd-nav-button-padding);border:none;background:none;box-sizing:content-box;cursor:pointer;font-size:var(--ngd-nav-button-size);line-height:var(--ngd-nav-button-size)}.nav-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--ngd-nav-button-background-color-hover)}.nav-button[_ngcontent-%COMP%]:active{color:var(--ngd-nav-button-color-active)}.nav-button[_ngcontent-%COMP%]:disabled{color:var(--ngd-nav-button-color-disabled);cursor:default}"],changeDetection:0})},kg=class n{bounds=_.required();nodeStyle=_();computedStyle=m(()=>this.nodeStyle()??{});shape=m(()=>this.computedStyle().shape??"rect");hostClass=m(()=>{let e=this.computedStyle().cssClass;return e?`minimap-node ${e}`:"minimap-node"});cx=m(()=>this.bounds().x+this.bounds().width/2);cy=m(()=>this.bounds().y+this.bounds().height/2);radius=m(()=>Math.min(this.bounds().width,this.bounds().height)/2);rx=m(()=>this.bounds().width/2);ry=m(()=>this.bounds().height/2);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["g","ng-diagram-default-minimap-node",""]],hostVars:11,hostBindings:function(t,o){t&2&&(se("transform",o.bounds().transform),Se(o.hostClass()),$e("fill",o.computedStyle().fill)("stroke",o.computedStyle().stroke)("stroke-width",o.computedStyle().strokeWidth,"px")("opacity",o.computedStyle().opacity))},inputs:{bounds:[1,"bounds"],nodeStyle:[1,"nodeStyle"]},attrs:BT,decls:3,vars:1,template:function(t,o){if(t&1&&X(0,VT,1,3,":svg:circle")(1,jT,1,4,":svg:ellipse")(2,HT,1,4,":svg:rect"),t&2){let i;Q((i=o.shape())==="circle"?0:i==="ellipse"?1:2)}},styles:["[_nghost-%COMP%]{fill:var(--ngd-minimap-node-color);opacity:var(--ngd-minimap-node-opacity)}"],changeDetection:0})},Pg=class n{diagramBounds=_.required();minimapTransform=_.required();rect=m(()=>{let e=this.diagramBounds(),t=this.minimapTransform();return{x:e.x*t.scale+t.offsetX,y:e.y*t.scale+t.offsetY,width:e.width*t.scale,height:e.height*t.scale}});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["rect","ng-diagram-minimap-diagram-bounds",""]],hostVars:4,hostBindings:function(t,o){t&2&&se("x",o.rect().x)("y",o.rect().y)("width",o.rect().width)("height",o.rect().height)},inputs:{diagramBounds:[1,"diagramBounds"],minimapTransform:[1,"minimapTransform"]},attrs:zT,decls:0,vars:0,template:function(t,o){},styles:["[_nghost-%COMP%]{fill:var(--ngd-minimap-diagram-bounds-color);opacity:var(--ngd-minimap-diagram-bounds-opacity);stroke:none;pointer-events:none}"],changeDetection:0})},Ag=class n{viewportService=f(je);flowCoreProvider=f(ye);transform=_.required();viewport=_.required();dragState={isDragging:!1,lastPosition:{x:0,y:0},pointerId:null};ngOnDestroy(){this.removeDocumentListeners()}onPointerDown(e){e.button===0&&(e.preventDefault(),this.capturePointer(e),this.dragState.isDragging=!0,this.dragState.lastPosition={x:e.clientX,y:e.clientY},this.setPanningState(!0),this.attachDocumentListeners())}onPointerMove=e=>{if(!this.dragState.isDragging)return;let t=this.calculateClientDelta(e);this.dragState.lastPosition={x:e.clientX,y:e.clientY};let o=this.calculateViewportDelta(t);this.viewportService.moveViewportBy(o.x,o.y)};onPointerUp=e=>{this.dragState.isDragging=!1,this.setPanningState(!1),this.releasePointer(e),this.removeDocumentListeners()};capturePointer(e){e.target.setPointerCapture(e.pointerId),this.dragState.pointerId=e.pointerId}releasePointer(e){if(this.dragState.pointerId===null)return;let t=e.target;t.hasPointerCapture(this.dragState.pointerId)&&t.releasePointerCapture(this.dragState.pointerId),this.dragState.pointerId=null}attachDocumentListeners(){document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerup",this.onPointerUp),document.addEventListener("pointercancel",this.onPointerUp)}removeDocumentListeners(){document.removeEventListener("pointermove",this.onPointerMove),document.removeEventListener("pointerup",this.onPointerUp),document.removeEventListener("pointercancel",this.onPointerUp)}setPanningState(e){let t=this.flowCoreProvider.provide().actionStateManager;e?t.panning={active:!0}:t.clearPanning()}calculateClientDelta(e){return{x:e.clientX-this.dragState.lastPosition.x,y:e.clientY-this.dragState.lastPosition.y}}calculateViewportDelta(e){let{scale:t}=this.transform(),{scale:o}=this.viewport();return{x:-e.x/t*o,y:-e.y/t*o}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","ngDiagramMinimapNavigation",""]],hostBindings:function(t,o){t&1&&x("pointerdown",function(r){return o.onPointerDown(r)})},inputs:{transform:[1,"transform"],viewport:[1,"viewport"]}})},MP=n=>({x:-n.x/n.scale,y:-n.y/n.scale,width:(n.width??0)/n.scale,height:(n.height??0)/n.scale}),SP=(n,e)=>e.width===0||e.height===0?n:$o([n,e]),IP=(n,e,t,o)=>n.width===0||n.height===0?1:Math.min((e-2*o)/n.width,(t-2*o)/n.height),xP=(n,e,t,o)=>({offsetX:(e-n.width*o)/2-n.x*o,offsetY:(t-n.height*o)/2-n.y*o}),TP=(n,e,t,o)=>{let i=IP(n,e,t,o),{offsetX:r,offsetY:s}=xP(n,e,t,i);return{scale:i,offsetX:r,offsetY:s}},D0={width:100,height:50},NP=(n,e=D0)=>{let t=n.size??e,o=n.angle??0;return{id:n.id,x:n.position.x,y:n.position.y,width:t.width,height:t.height,angle:o,transform:`rotate(${o} ${n.position.x+t.width/2} ${n.position.y+t.height/2})`}},kP=(n,e=D0)=>{if(n.length===0)return{x:0,y:0,width:0,height:0};let t=n.map(o=>{let i=o.size??e;return jg({x:o.position.x,y:o.position.y,width:i.width,height:i.height},o.angle??0)});return $o(t)},PP=(n,e)=>({x:-n.x/n.scale*e.scale+e.offsetX,y:-n.y/n.scale*e.scale+e.offsetY,width:(n.width??0)/n.scale*e.scale,height:(n.height??0)/n.scale*e.scale}),Rg=class extends Map{},ac=class n{renderer=f(pn);computeMinimapNodes(e,t){return this.renderer.nodes().map(o=>({bounds:NP(o),diagramNode:o,nodeStyle:e?.(o)??{},template:o.type?t.get(o.type)??null:null}))}computeDiagramBounds(){return Hg(this.renderer.nodes(),[])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},Zt=class n extends An{diagramService=f(st);_nodes=F([]);_edges=F([]);_metadata=F({viewport:{x:0,y:0,scale:1}});nodes=this._nodes.asReadonly();edges=this._edges.asReadonly();metadata=this._metadata.asReadonly();constructor(){super(),Me(()=>{this.diagramService.isInitialized()&&(this.flowCore.model.onChange(this.modelListener),Oe(()=>this.modelListener({nodes:this.flowCore.model.getNodes(),edges:this.flowCore.model.getEdges(),metadata:this.flowCore.model.getMetadata()})))})}ngOnDestroy(){this.flowCoreProvider.isInitialized()&&this.flowCore.model.unregisterOnChange(this.modelListener)}getModel(){return this.flowCore.model}toJSON(){return this.flowCore.model.toJSON()}addEdges(e){this.flowCore.commandHandler.emit("addEdges",{edges:e})}addNodes(e){this.flowCore.commandHandler.emit("addNodes",{nodes:e})}getEdgeById(e){return this.flowCore.getEdgeById(e)||null}getNearestNodeInRange(e,t){return this.flowCore.getNearestNodeInRange(e,t)||null}getNearestPortInRange(e,t){return this.flowCore.getNearestPortInRange(e,t)||null}getNodeById(e){return this.flowCore.getNodeById(e)}getNodesInRange(e,t){return this.flowCore.getNodesInRange(e,t)}getConnectedEdges(e){return this.flowCore.getConnectedEdges(e)}getConnectedNodes(e){return this.flowCore.getConnectedNodes(e)}getNodeEnds(e){return this.flowCore.getNodeEnds(e)}getChildren(e){return this.flowCore.getChildren(e)}getChildrenNested(e){return this.flowCore.getChildrenNested(e)}isNestedChild(e,t){return this.flowCore.isNestedChild(e,t)}getParentHierarchy(e){return this.flowCore.getParentHierarchy(e)}getOverlappingNodes(e){return this.flowCore.getOverlappingNodes(e)}computePartsBounds(e,t){return Hg(e,t)}updateEdge(e,t){this.flowCore.commandHandler.emit("updateEdge",{id:e,edgeChanges:g({},t)})}updateEdgeData(e,t){this.flowCore.commandHandler.emit("updateEdge",{id:e,edgeChanges:{data:t}})}updateNode(e,t){this.flowCore.commandHandler.emit("updateNode",{id:e,nodeChanges:g({},t)})}updateNodeData(e,t){this.flowCore.commandHandler.emit("updateNode",{id:e,nodeChanges:{data:t}})}updateNodes(e){this.flowCore.commandHandler.emit("updateNodes",{nodes:e})}updateEdges(e){this.flowCore.commandHandler.emit("updateEdges",{edges:e})}deleteEdges(e){this.flowCore.commandHandler.emit("deleteEdges",{ids:e})}deleteNodes(e){this.flowCore.commandHandler.emit("deleteNodes",{ids:e})}modelListener=e=>{this._nodes.set(e.nodes),this._edges.set(e.edges),this._metadata.set(e.metadata)};static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},dc=class n{modelService=f(Zt);computeMinimapNodes(){return[]}computeDiagramBounds(){return kP(this.modelService.nodes())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})},cc=class n{VIEWPORT_STROKE_WIDTH_CSS_VAR="--ngd-minimap-viewport-stroke-width";renderer=f(pn);flowCoreProvider=f(ye);elementRef=f(Y);directStrategy=f(ac);virtualizedStrategy=f(dc);strokePadding=F(1);position=_("bottom-right");width=_(200);height=_(150);showZoomControls=_(!0);nodeStyle=_();minimapNodeTemplateMap=_(new Rg);ngAfterViewInit(){this.strokePadding.set(this.getStrokePaddingFromCss())}isDiagramInitialized=this.renderer.isInitialized;viewport=this.renderer.viewport;hasValidViewport=m(()=>{let e=this.viewport();return!!e.width&&!!e.height&&e.width>0&&e.height>0});viewportRect=m(()=>PP(this.viewport(),this.transform()));strategy=m(()=>this.isDiagramInitialized()&&this.flowCoreProvider.provide().isVirtualizationActive?this.virtualizedStrategy:this.directStrategy);transform=m(()=>TP(this.combinedBounds(),this.width(),this.height(),this.strokePadding()));nodesGroupTransform=m(()=>{let e=this.transform();return`translate(${e.offsetX}, ${e.offsetY}) scale(${e.scale})`});minimapNodes=m(()=>this.strategy().computeMinimapNodes(this.nodeStyle(),this.minimapNodeTemplateMap()));showDiagramBounds=m(()=>this.isDiagramInitialized()&&this.flowCoreProvider.provide().isVirtualizationActive);diagramBounds=m(()=>this.strategy().computeDiagramBounds());viewportBoundsInDiagramSpace=m(()=>MP(this.viewport()));combinedBounds=m(()=>SP(this.diagramBounds(),this.viewportBoundsInDiagramSpace()));getStrokePaddingFromCss(){let e=getComputedStyle(this.elementRef.nativeElement).getPropertyValue(this.VIEWPORT_STROKE_WIDTH_CSS_VAR).trim();return parseFloat(e)||1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-minimap"]],hostVars:2,hostBindings:function(t,o){t&2&&Se(o.position())},inputs:{position:[1,"position"],width:[1,"width"],height:[1,"height"],showZoomControls:[1,"showZoomControls"],nodeStyle:[1,"nodeStyle"],minimapNodeTemplateMap:[1,"minimapNodeTemplateMap"]},features:[Ke([ac,dc])],decls:5,vars:10,consts:[[3,"position"],["ngDiagramMinimapNavigation","",1,"minimap-svg",3,"transform","viewport"],["x","0","y","0",1,"minimap-background"],["ng-diagram-minimap-diagram-bounds","",3,"diagramBounds","minimapTransform"],[1,"minimap-viewport"],["ng-diagram-default-minimap-node","",3,"bounds","nodeStyle"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(t,o){t&1&&(w(0,"ng-diagram-panel",0),Re(),w(1,"svg",1),A(2,"rect",2),X(3,QT,5,3),D(),X(4,KT,1,0,"ng-diagram-zoom-controls"),D()),t&2&&(I("position",o.position()),b(),I("transform",o.transform())("viewport",o.viewport()),se("viewBox","0 0 "+o.width()+" "+o.height())("width",o.width())("height",o.height()),b(),se("width",o.width())("height",o.height()),b(),Q(o.isDiagramInitialized()?3:-1),b(),Q(o.showZoomControls()?4:-1))},dependencies:[Ag,rt,xi,kg,Pg,Ng,Tg],styles:["[_nghost-%COMP%]{display:block;position:absolute;pointer-events:auto;z-index:10}.bottom-right[_nghost-%COMP%]{bottom:var(--ngd-minimap-margin);right:var(--ngd-minimap-margin)}.bottom-left[_nghost-%COMP%]{bottom:var(--ngd-minimap-margin);left:var(--ngd-minimap-margin)}.top-right[_nghost-%COMP%]{top:var(--ngd-minimap-margin);right:var(--ngd-minimap-margin)}.top-left[_nghost-%COMP%]{top:var(--ngd-minimap-margin);left:var(--ngd-minimap-margin)}.minimap-svg[_ngcontent-%COMP%]{display:block;cursor:pointer;touch-action:none}.minimap-background[_ngcontent-%COMP%]{fill:transparent}.minimap-viewport[_ngcontent-%COMP%]{stroke:var(--ngd-minimap-viewport-stroke-color);stroke-width:var(--ngd-minimap-viewport-stroke-width);fill:transparent;pointer-events:none}.minimap-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"],changeDetection:0})},Ui=class n{paletteService=f(Li);environment=f(Fi);browser=this.environment.browser;id=this.environment.generateId();preview=Oo("preview");scale=f(je).scale;isSafari=this.browser==="Safari";isChrome=this.browser==="Chrome";isVisible=m(()=>this.paletteService.previewId()===this.id);get scaleTransform(){return`scale(${this.scale()})`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-palette-item-preview"]],viewQuery:function(t,o){t&1&&Nn(o.preview,JT,5),t&2&&kn()},ngContentSelectors:et,decls:3,vars:5,consts:[["preview",""],[3,"dragged-node","transform"]],template:function(t,o){t&1&&(ae(),G(0,"div",null,0),X(2,eN,2,4,"div",1),U()),t&2&&($e("zoom",o.isSafari?o.scale():null),ee("dragged-node",o.isSafari),b(2),Q(o.isVisible()?2:-1))},styles:[".dragged-node[_ngcontent-%COMP%]{position:absolute;background-color:transparent;pointer-events:none;left:-1000px}"],changeDetection:0})},lc=class n{paletteService=f(Li);paletteItemPreviewComponent=M_(Ui);item=_.required();onDragStart(e){let t=this.paletteItemPreviewComponent()?.preview();t&&t.nativeElement&&e.dataTransfer?.setDragImage(t.nativeElement,0,0),this.paletteService.onDragStartFromPalette(e,this.item())}onMouseDown(){this.paletteService.onMouseDown(this.item(),this.paletteItemPreviewComponent()?.id||"")}onTouchStart(e){e.preventDefault(),this.paletteService.onMouseDown(this.item(),this.paletteItemPreviewComponent()?.id||"")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ng-diagram-palette-item"]],contentQueries:function(t,o,i){t&1&&ud(i,o.paletteItemPreviewComponent,Ui,5),t&2&&kn()},hostAttrs:[2,"width","100%"],inputs:{item:[1,"item"]},ngContentSelectors:et,decls:2,vars:0,consts:[["draggable","true",1,"draggable",3,"dragstart","mousedown","touchstart"]],template:function(t,o){t&1&&(ae(),G(0,"div",0),it("dragstart",function(r){return o.onDragStart(r)})("mousedown",function(){return o.onMouseDown()})("touchstart",function(r){return o.onTouchStart(r)}),K(1),U())},encapsulation:2,changeDetection:0})},ls=class n extends An{copy(){this.flowCore.commandHandler.emit("copy")}cut(){this.flowCore.commandHandler.emit("cut")}paste(e){this.flowCore.commandHandler.emit("paste",{position:e})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac})},Og=class n extends An{addToGroup(e,t){this.flowCore.commandHandler.emit("addToGroup",{groupId:e,nodeIds:t})}highlightGroup(e,t){this.flowCore.commandHandler.emit("highlightGroup",{groupId:e,nodes:t})}highlightGroupClear(){this.flowCore.commandHandler.emit("highlightGroupClear")}removeFromGroup(e,t){this.flowCore.commandHandler.emit("removeFromGroup",{groupId:e,nodeIds:t})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac})},us=class n extends An{moveNodesBy(e,t){this.flowCore.commandHandler.emit("moveNodesBy",{nodes:e,delta:t})}resizeNode(e,t,o,i){this.flowCore.commandHandler.emit("resizeNode",{id:e,size:t,position:o,disableAutoSize:i})}rotateNodeTo(e,t){this.flowCore.commandHandler.emit("rotateNodeTo",{nodeId:e,angle:t})}bringToFront(e,t){this.flowCore.commandHandler.emit("bringToFront",{nodeIds:e,edgeIds:t})}sendToBack(e,t){this.flowCore.commandHandler.emit("sendToBack",{nodeIds:e,edgeIds:t})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac})},at=class n extends An{modelService=f(Zt);selection=m(()=>({nodes:this.modelService.nodes().filter(e=>e.selected),edges:this.modelService.edges().filter(e=>e.selected)}));select(e=[],t=[]){this.flowCore.commandHandler.emit("select",{nodeIds:e,edgeIds:t})}deselect(e=[],t=[]){this.flowCore.commandHandler.emit("deselect",{nodeIds:e,edgeIds:t})}deselectAll(){this.flowCore.commandHandler.emit("deselectAll")}deleteSelection(){this.flowCore.commandHandler.emit("deleteSelection")}static \u0275fac=(()=>{let e;return function(o){return(e||(e=ve(n)))(o||n)}})();static \u0275prov=C({token:n,factory:n.\u0275fac})},Fg=class n{effectRef=null;nodes=F([]);edges=F([]);metadata=F({viewport:{x:0,y:0,scale:1}});callbacks=[];constructor(){this.effectRef=Me(()=>{let e=this.nodes(),t=this.edges(),o=this.metadata();Oe(()=>{for(let i of this.callbacks)i({nodes:e,edges:t,metadata:o})})})}destroy(){this.effectRef?.destroy(),this.callbacks=[],this.nodes.set([]),this.edges.set([]),this.metadata.set({viewport:{x:0,y:0,scale:1}})}getNodes(){return this.nodes()}getEdges(){return this.edges()}updateNodes(e){this.nodes.update(t=>typeof e=="function"?e(t):e)}updateEdges(e){this.edges.update(t=>typeof e=="function"?e(t):e)}getMetadata(){return this.metadata()}updateMetadata(e){this.metadata.update(t=>typeof e=="function"?e(t):e)}onChange(e){this.callbacks.push(e)}unregisterOnChange(e){this.callbacks=this.callbacks.filter(t=>t!==e)}undo(){console.warn("Undo is not implemented in the current model. Please implement a custom ModelAdapter to support undo functionality.")}redo(){console.warn("Redo is not implemented in the current model. Please implement a custom ModelAdapter to support redo functionality.")}toJSON(){let e=this.metadata();return JSON.stringify({nodes:this.nodes().map(a=>{var d=a,{selected:t,measuredPorts:o,measuredBounds:i,computedZIndex:r}=d,s=qo(d,["selected","measuredPorts","measuredBounds","computedZIndex"]);return s}),edges:this.edges().map(d=>{var c=d,{points:t,sourcePosition:o,targetPosition:i,measuredLabels:r,computedZIndex:s}=c,a=qo(c,["points","sourcePosition","targetPosition","measuredLabels","computedZIndex"]);return a}),metadata:e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};function w0(n={},e){let t=()=>{let o=f(Fi),i=new Fg,r=()=>o.generateId();return i.updateNodes((n.nodes||[]).map(s=>b0(s,r))),i.updateEdges(n.edges||[]),i.updateMetadata(s=>g(g({},s),n.metadata)),i};return e?ci(e,t):t()}function E0(){return[Li,ye,os,pn,qe,Zd,st,Bi,Ho,je,Zt,at,ls,us,Og,ji,tc,ic,Vi,ds]}var $i=class n{item=_.required();nodeLabel=m(()=>this.item()?.data?.label??"Unknown");nodeDescription=m(()=>this.item()?.data?.description??"No description");nodeIcon=m(()=>`ph ${this.item()?.data?.icon??"ph-placeholder"}`);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-palette-item"]],inputs:{item:[1,"item"]},decls:8,vars:4,consts:[[1,"palette-item"],[1,"palette-item__icon"],[1,"palette-item__label"],[1,"palette-item__description"]],template:function(t,o){t&1&&(G(0,"div",0)(1,"div",1),ke(2,"i"),U(),G(3,"div")(4,"div",2),V(5),U(),G(6,"div",3),V(7),U()()()),t&2&&(b(2),Se(o.nodeIcon()),b(3),we(o.nodeLabel()),b(2),we(o.nodeDescription()))},styles:["[_nghost-%COMP%]{width:100%}.palette-item[_ngcontent-%COMP%]{display:flex;padding:var(--ngd-token-spacing-node-head-v-pad) var(--ngd-token-spacing-node-head-h-pad);align-items:center;gap:var(--ngd-token-spacing-node-head-gap);flex:1 0 0;width:100%;border-radius:var(--ngd-token-radius-node-head);border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-default)}.palette-item[_ngcontent-%COMP%]:hover{border-color:var(--ngd-node-stroke-primary-hover)}.palette-item__icon[_ngcontent-%COMP%]{display:flex;padding:var(--ngd-token-spacing-node-head-icon);justify-content:center;align-items:center;gap:12px;border-radius:var(--ngd-token-radius-node-head-icon);border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-secondary-default);color:var(--ngd-node-icon-primary-default);font-size:24px}.palette-item__label[_ngcontent-%COMP%]{color:var(--ngd-txt-primary-default);font-size:14px;font-style:normal;font-weight:600;line-height:140%}.palette-item__description[_ngcontent-%COMP%]{color:var(--ngd-txt-secondary-default);font-size:10px;font-style:normal;font-weight:400;line-height:140%}"],changeDetection:0})};var Dt=class n{visibility=F(!1);menuPosition=F({x:0,y:0});nodeContext=F(!1);showMenu({x:e,y:t}){this.nodeContext.set(!0),this.menuPosition.set({x:e,y:t}),this.visibility.set(!0)}showDiagramMenu({x:e,y:t}){this.nodeContext.set(!1),this.menuPosition.set({x:e,y:t}),this.visibility.set(!0)}hideMenu(){this.visibility.set(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};var AP=["*"],fc=class n{contextMenuService=f(Dt);viewportService=f(je);selectionService=f(at);node=_.required();groupTitle=m(()=>this.node().data?.label??"Group");highlighted=m(()=>this.node().highlighted??!1);onRightClick(e){e.preventDefault(),e.stopPropagation();let t=this.node();if(t){this.selectionService.selection().nodes.some(r=>r.id===t.id)||this.selectionService.select([t.id]);let i=this.viewportService.clientToFlowViewportPosition({x:e.clientX,y:e.clientY});this.contextMenuService.showMenu(i)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-group-node"]],hostVars:2,hostBindings:function(t,o){t&2&&ee("ng-diagram-port-hoverable-over-node",!0)},inputs:{node:[1,"node"]},ngContentSelectors:AP,decls:9,vars:2,consts:[["ngDiagramNodeSelected","","ngDiagramGroupHighlighted","",1,"group-node",3,"contextmenu","node"],[1,"group-node__header"],[1,"group-node__header-title"],[1,"group-node__content"],["id","port-left","type","target","side","left",1,"group-node__port"],["id","port-right","type","source","side","right",1,"group-node__port"]],template:function(t,o){t&1&&(ae(),w(0,"ng-diagram-node-resize-adornment")(1,"div",0),x("contextmenu",function(r){return o.onRightClick(r)}),w(2,"div",1)(3,"div",2),V(4),D()(),w(5,"div",3),K(6),D()(),A(7,"ng-diagram-port",4)(8,"ng-diagram-port",5),D()),t&2&&(b(),I("node",o.node()),b(3),we(o.groupTitle()))},dependencies:[gn,On,hn,is],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;border-radius:var(--ngd-token-radius-node-head);--ngd-port-background-color: var(--ngd-node-port-fill-default);--ngd-port-border-color: var(--ngd-node-port-stroke-default);--ngd-port-border-size: 2px;--ngd-port-size: 8px}.ng-diagram-group-highlight[_nghost-%COMP%]   .group-node__content[_ngcontent-%COMP%]{border-top:1px solid var(--ngd-colors-acc1-500)}.group-node[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;flex:1 0 0;align-self:stretch;min-width:var(--node-group-min-width);min-height:var(--node-group-min-height);--header-height: 42px ;border-radius:var(--ngd-token-radius-node-head);border:1px solid var(--ngd-ui-stroke-primary-focus);background:linear-gradient(to bottom,var(--ngd-node-bg-primary-default) 0%,var(--ngd-node-bg-primary-default) var(--header-height),var(--ngd-ui-bg-tertiary-default) var(--header-height),var(--ngd-ui-bg-tertiary-default) 100%)}.group-node__header[_ngcontent-%COMP%]{display:flex;height:var(--header-height);padding:5px 5px 5px 16px;align-items:center;gap:12px;align-self:stretch;border-top-left-radius:var(--ngd-token-radius-node-head);border-top-right-radius:var(--ngd-token-radius-node-head);overflow:hidden}.group-node__header-title[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;flex:1 0 0;overflow:hidden;color:var(--ngd-txt-primary-default);text-overflow:ellipsis;font-size:12px;font-style:normal;font-weight:600;line-height:130%}.group-node__content[_ngcontent-%COMP%]{display:flex;padding:10px;flex-direction:column;align-items:flex-start;gap:10px;flex:1 0 0;align-self:stretch;border-radius:0 0 var(--ngd-token-radius-node-head) var(--ngd-token-radius-node-head);border-top:1px solid var(--ngd-txt-tertiary-default);background:transparent}.group-node__port[_ngcontent-%COMP%]{top:24px}"],changeDetection:0})};var RP=(n,e)=>e.value;function OP(n,e){if(n&1&&(w(0,"option",5),V(1),D()),n&2){let t=e.$implicit;I("value",t.value),b(),we(t.label)}}var pc=class n{status=_("pending");statusChange=ue();statuses=[{value:"pending",label:"Pending"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"blocked",label:"Blocked"}];onStatusChange(e){let t=e.target;this.statusChange.emit(t.value)}getStatusLabel(){return this.statuses.find(e=>e.value===this.status())?.label||this.statuses[0].label}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-status-dropdown"]],inputs:{status:[1,"status"]},outputs:{statusChange:"statusChange"},decls:8,vars:3,consts:[[1,"status-dropdown"],[1,"status-badge",3,"ngClass"],[1,"status-label"],[1,"ph","ph-caret-down"],["data-no-drag","true","data-no-pan","true",1,"status-select",3,"change","value"],[3,"value"]],template:function(t,o){t&1&&(w(0,"div",0)(1,"div",1)(2,"span",2),V(3),D(),A(4,"i",3),D(),w(5,"select",4),x("change",function(r){return o.onStatusChange(r)}),Xe(6,OP,2,2,"option",5,RP),D()()),t&2&&(b(),I("ngClass",o.status()),b(2),we(o.getStatusLabel()),b(2),I("value",o.status()),b(),Qe(o.statuses))},dependencies:[Jf],styles:[".status-dropdown[_ngcontent-%COMP%]{position:relative;width:100%}.status-dropdown[_ngcontent-%COMP%]:has(.status-select:hover)   .status-badge.pending[_ngcontent-%COMP%]{background-color:var(--ngd-button-gray-bg-hover)}.status-dropdown[_ngcontent-%COMP%]:has(.status-select:hover)   .status-badge.in-progress[_ngcontent-%COMP%]{background-color:var(--ngd-button-primary-bg-hover)}.status-dropdown[_ngcontent-%COMP%]:has(.status-select:hover)   .status-badge.completed[_ngcontent-%COMP%]{background-color:var(--ngd-button-green-bg-hover)}.status-dropdown[_ngcontent-%COMP%]:has(.status-select:hover)   .status-badge.blocked[_ngcontent-%COMP%]{background-color:var(--ngd-button-red-bg-hover)}.status-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 12px;border-radius:6px;transition:all .2s ease;color:var(--ngd-txt-primary-white)}.status-badge[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.status-badge.pending[_ngcontent-%COMP%]{background-color:var(--ngd-button-gray-bg-default)}.status-badge.in-progress[_ngcontent-%COMP%]{background-color:var(--ngd-button-primary-bg-default)}.status-badge.completed[_ngcontent-%COMP%]{background-color:var(--ngd-button-green-bg-default)}.status-badge.blocked[_ngcontent-%COMP%]{background-color:var(--ngd-button-red-bg-default)}.status-select[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;opacity:0;border:none;cursor:pointer}"],changeDetection:0})};var hc=class n{modelService=f(Zt);contextMenuService=f(Dt);viewportService=f(je);selectionService=f(at);node=_.required();nodeLabel=m(()=>this.node()?.data?.label??"Unknown");nodeDescription=m(()=>this.node()?.data?.description??"No description");nodeIcon=m(()=>`ph ${this.node()?.data?.icon??"ph-placeholder"}`);nodeStatus=m(()=>this.node()?.data?.status??"pending");onStatusChange(e){let t=this.node();t&&this.modelService.updateNode(t.id,{data:y(g({},t.data),{status:e})})}onRightClick(e){e.preventDefault(),e.stopPropagation();let t=this.node();if(t){this.selectionService.selection().nodes.some(r=>r.id===t.id)||this.selectionService.select([t.id]);let i=this.viewportService.clientToFlowViewportPosition({x:e.clientX,y:e.clientY});this.contextMenuService.showMenu(i)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-custom-node"]],hostVars:2,hostBindings:function(t,o){t&2&&ee("ng-diagram-port-hoverable-over-node",!0)},inputs:{node:[1,"node"]},features:[pt([{directive:hn,inputs:["node","node"]}])],decls:15,vars:5,consts:[[1,"custom-node",3,"contextmenu"],[1,"custom-node__header"],[1,"custom-node__icon"],[1,"custom-node__label"],[1,"custom-node__description"],[1,"custom-node__content"],[3,"statusChange","status"],["id","port-left","type","target","side","left"],["id","port-right","type","source","side","right"]],template:function(t,o){t&1&&(A(0,"ng-diagram-node-rotate-adornment"),w(1,"ng-diagram-node-resize-adornment")(2,"div",0),x("contextmenu",function(r){return o.onRightClick(r)}),w(3,"div",1)(4,"div",2),A(5,"i"),D(),w(6,"div")(7,"div",3),V(8),D(),w(9,"div",4),V(10),D()()(),w(11,"div",5)(12,"app-status-dropdown",6),x("statusChange",function(r){return o.onStatusChange(r)}),D()()(),A(13,"ng-diagram-port",7)(14,"ng-diagram-port",8),D()),t&2&&(b(5),Se(o.nodeIcon()),b(3),we(o.nodeLabel()),b(2),we(o.nodeDescription()),b(2),I("status",o.nodeStatus()))},dependencies:[On,gn,Uo,pc],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;border-radius:var(--ngd-token-radius-node-head);--ngd-port-background-color: var(--ngd-node-port-fill-default);--ngd-port-border-color: var(--ngd-node-port-stroke-default);--ngd-port-border-size: 2px;--ngd-port-size: 8px}.custom-node[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;min-width:var(--node-custom-min-width);min-height:var(--node-custom-min-height);border-radius:var(--ngd-token-radius-node-head);border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-default);padding:var(--ngd-token-spacing-node-head-v-pad) var(--ngd-token-spacing-node-head-h-pad);gap:var(--ngd-token-spacing-node-head-gap)}.custom-node__header[_ngcontent-%COMP%]{display:flex;gap:2px;align-items:center;gap:var(--ngd-token-spacing-node-head-gap);align-self:stretch}.custom-node__icon[_ngcontent-%COMP%]{display:flex;padding:var(--ngd-token-spacing-node-head-icon);justify-content:center;align-items:center;gap:12px;border-radius:var(--ngd-token-radius-node-head-icon);border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-secondary-default);color:var(--ngd-node-icon-primary-default);font-size:24px}.custom-node__label[_ngcontent-%COMP%]{color:var(--ngd-txt-primary-default);font-size:14px;font-style:normal;font-weight:600;line-height:140%}.custom-node__description[_ngcontent-%COMP%]{color:var(--ngd-txt-secondary-default);font-size:10px;font-style:normal;font-weight:400;line-height:140%}.custom-node__content[_ngcontent-%COMP%]{width:100%;flex-grow:1;border-radius:8px;border:1px dashed var(--ngd-dropzone-stroke-default);background:var(--ngd-dropzone-bg-default);padding:8px;color:var(--ngd-txt-primary-default)}.custom-node[_ngcontent-%COMP%]:hover{border:1px solid var(--ngd-node-stroke-primary-hover);background:var(--ngd-node-bg-primary-default)}.custom-node[_ngcontent-%COMP%]:active{border:1px solid var(--ngd-node-stroke-primary-hover);background:var(--ngd-node-bg-primary-default);box-shadow:var(--ngd-token-shadow-focus-node-active-x) var(--ngd-token-shadow-focus-node-active-y) var(--ngd-token-shadow-focus-node-active-blur) var(--ngd-token-shadow-focus-node-active-spread) var(--ngd-focus-ring-node-active)}.custom-node[_ngcontent-%COMP%]:disabled{border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-disabled)}.custom-node[_ngcontent-%COMP%]:disabled__icon{border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-disabled);color:var(--ngd-node-icon-primary-disabled)}.custom-node[_ngcontent-%COMP%]:disabled__label, .custom-node[_ngcontent-%COMP%]:disabled__description{color:var(--ngd-txt-disabled)}"],changeDetection:0})};var gc=class n{contextMenuService=f(Dt);viewportService=f(je);selectionService=f(at);node=_.required();nodeLabel=m(()=>this.node()?.data?.label??"Unknown");nodeDescription=m(()=>this.node()?.data?.description??"No description");nodeIcon=m(()=>`ph ${this.node()?.data?.icon??"ph-placeholder"}`);onRightClick(e){e.preventDefault(),e.stopPropagation();let t=this.node();if(t){this.selectionService.selection().nodes.some(r=>r.id===t.id)||this.selectionService.select([t.id]);let i=this.viewportService.clientToFlowViewportPosition({x:e.clientX,y:e.clientY});this.contextMenuService.showMenu(i)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-trigger-node"]],hostVars:2,hostBindings:function(t,o){t&2&&ee("ng-diagram-port-hoverable-over-node",!0)},inputs:{node:[1,"node"]},features:[pt([{directive:hn,inputs:["node","node"]}])],decls:12,vars:4,consts:[[1,"trigger-node",3,"contextmenu"],[1,"trigger-node__icon"],[1,"trigger-node__label"],[1,"trigger-node__description"],["id","port-left","type","target","side","left"],["id","port-right","type","source","side","right"]],template:function(t,o){t&1&&(A(0,"ng-diagram-node-rotate-adornment"),w(1,"ng-diagram-node-resize-adornment")(2,"div",0),x("contextmenu",function(r){return o.onRightClick(r)}),w(3,"div",1),A(4,"i"),D(),w(5,"div")(6,"div",2),V(7),D(),w(8,"div",3),V(9),D()()(),A(10,"ng-diagram-port",4)(11,"ng-diagram-port",5),D()),t&2&&(b(4),Se(o.nodeIcon()),b(3),we(o.nodeLabel()),b(2),we(o.nodeDescription()))},dependencies:[On,gn,Uo],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%;border-radius:var(--ngd-token-radius-node-head);--ngd-port-background-color: var(--ngd-node-port-fill-default);--ngd-port-border-color: var(--ngd-node-port-stroke-default);--ngd-port-border-size: 2px;--ngd-port-size: 8px}.trigger-node[_ngcontent-%COMP%]{display:flex;width:100%;min-width:var(--node-trigger-min-width);min-height:var(--node-trigger-min-height);padding:var(--ngd-token-spacing-node-head-v-pad) var(--ngd-token-spacing-node-head-h-pad);align-items:center;gap:var(--ngd-token-spacing-node-head-gap);border-radius:var(--ngd-token-radius-node-head);border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-default)}.trigger-node__icon[_ngcontent-%COMP%]{display:flex;padding:var(--ngd-token-spacing-node-head-icon);justify-content:center;align-items:center;gap:12px;border-radius:var(--ngd-token-radius-node-head-icon);border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-secondary-default);color:var(--ngd-node-icon-primary-default);font-size:24px}.trigger-node__label[_ngcontent-%COMP%]{color:var(--ngd-txt-primary-default);font-size:14px;font-style:normal;font-weight:600;line-height:140%}.trigger-node__description[_ngcontent-%COMP%]{color:var(--ngd-txt-secondary-default);font-size:10px;font-style:normal;font-weight:400;line-height:140%}.trigger-node[_ngcontent-%COMP%]:hover{border:1px solid var(--ngd-node-stroke-primary-hover);background:var(--ngd-node-bg-primary-default)}.trigger-node[_ngcontent-%COMP%]:active{border:1px solid var(--ngd-node-stroke-primary-hover);background:var(--ngd-node-bg-primary-default);box-shadow:var(--ngd-token-shadow-focus-node-active-x) var(--ngd-token-shadow-focus-node-active-y) var(--ngd-token-shadow-focus-node-active-blur) var(--ngd-token-shadow-focus-node-active-spread) var(--ngd-focus-ring-node-active)}.trigger-node[_ngcontent-%COMP%]:disabled{border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-disabled)}.trigger-node[_ngcontent-%COMP%]:disabled__icon{border:1px solid var(--ngd-node-stroke-primary-default);background:var(--ngd-node-bg-primary-disabled);color:var(--ngd-node-icon-primary-disabled)}.trigger-node[_ngcontent-%COMP%]:disabled__label, .trigger-node[_ngcontent-%COMP%]:disabled__description{color:var(--ngd-txt-disabled)}"],changeDetection:0})};var mc=new zi([["trigger",gc],["custom",hc],["group",fc]]);var FP=n=>({node:n});function LP(n,e){n&1&&Yn(0)}function BP(n,e){if(n&1&&cn(0,LP,1,0,"ng-container",1),n&2){let t=T();I("ngComponentOutlet",t.componentType()||null)("ngComponentOutletInputs",Si(2,FP,t.item()))}}function VP(n,e){if(n&1&&A(0,"app-palette-item",0),n&2){let t=T();I("item",t.item())}}var vc=class n{item=_.required();componentType=m(()=>mc.get(this.item().type||""));static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-palette-item-preview"]],inputs:{item:[1,"item"]},decls:2,vars:1,consts:[[3,"item"],[4,"ngComponentOutlet","ngComponentOutletInputs"]],template:function(t,o){t&1&&X(0,BP,1,4,"ng-container")(1,VP,1,1,"app-palette-item",0),t&2&&Q(o.componentType()?0:1)},dependencies:[xi,$i],encapsulation:2,changeDetection:0})};var jP=["*"],to=class n{type=_("button");disabled=_(!1);title=_("");round=_(!1);active=_(!1);size=_("large");clickAction=ue();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ngd-nav-button"]],inputs:{type:[1,"type"],disabled:[1,"disabled"],title:[1,"title"],round:[1,"round"],active:[1,"active"],size:[1,"size"]},outputs:{clickAction:"clickAction"},ngContentSelectors:jP,decls:2,vars:15,consts:[[1,"button",3,"click","type","disabled","title"]],template:function(t,o){t&1&&(ae(),G(0,"button",0),it("click",function(r){return o.clickAction.emit(r)}),K(1),U()),t&2&&(ee("button--round",o.round())("button--active",o.active())("button--xlarge",o.size()==="xlarge")("button--large",o.size()==="large")("button--medium",o.size()==="medium")("button--small",o.size()==="small"),ln("type",o.type())("disabled",o.disabled())("title",o.title()))},dependencies:[rt],styles:[".button[_ngcontent-%COMP%]{all:unset;display:inline-flex;height:20px;width:20px;box-sizing:content-box;justify-content:center;align-items:center;border-radius:var(--ngd-token-radius-button-l);border:2px solid transparent;color:var(--ngd-nav-button-icon-primary-default);text-align:right;font-style:normal;font-weight:600;line-height:100%}.button[_ngcontent-%COMP%]:hover:not(.button--active){background:var(--ngd-nav-button-bg-primary-hover);color:var(--ngd-nav-button-icon-primary-default)}.button[_ngcontent-%COMP%]:active{background:var(--ngd-nav-button-bg-primary-hover);color:var(--ngd-nav-button-icon-primary-pressed)}.button[_ngcontent-%COMP%]:focus-visible{border:2px solid var(--ngd-ui-bg-primary-default);background:var(--ngd-nav-button-bg-primary-hover);box-shadow:0 0 0 2px #000}.button[_ngcontent-%COMP%]:disabled{color:var(--ngd-nav-button-icon-primary-disabled)}.button--active[_ngcontent-%COMP%]{background:var(--ngd-button-primary-bg-default);color:var(--ngd-nav-button-icon-primary-active)}.button--round[_ngcontent-%COMP%]{border-radius:var(--ngd-token-radius-button-round)}.button--xlarge[_ngcontent-%COMP%]{padding:var(--ngd-token-spacing-button-xl-v-pad-2);gap:var(--ngd-token-spacing-button-xl-gap);font-size:24px}.button--large[_ngcontent-%COMP%]{padding:var(--ngd-token-spacing-button-l-v-pad-2);gap:var(--ngd-token-spacing-button-l-gap);font-size:20px}.button--medium[_ngcontent-%COMP%]{padding:var(--ngd-token-spacing-button-m-v-pad-2);gap:var(--ngd-token-spacing-button-m-gap);font-size:18px}.button--small[_ngcontent-%COMP%]{padding:var(--ngd-token-spacing-button-s-v-pad-2);gap:var(--ngd-token-spacing-button-s-gap);font-size:16px}"],changeDetection:0})};var HP=[[["","sidebarHeader",""]],"*"],zP=["[sidebarHeader]","*"];function UP(n,e){if(n&1&&(w(0,"span",2),V(1),D()),n&2){let t=T(2);b(),we(t.title())}}function $P(n,e){if(n&1){let t=ht();X(0,UP,2,1,"span",2),w(1,"ngd-nav-button",3),x("clickAction",function(){_e(t);let i=T();return Ce(i.toggleSidebar())}),A(2,"i",4),D()}if(n&2){let t=T();Q(t.isCollapsed()?-1:0),b(),I("title","Toggle sidebar")("size","small")}}function GP(n,e){n&1&&(A(0,"div",5),w(1,"div",6),K(2,1),D())}var Gi=class n{internalCollapsed=F(!1);title=_();position=_("left");collapsed=_(void 0);collapsedChange=ue();isCollapsed=m(()=>{let e=this.collapsed();return e!==void 0?e:this.internalCollapsed()});constructor(){Me(()=>{let e=this.collapsed();e!==void 0&&this.internalCollapsed.set(e)})}toggleSidebar(){let e=!this.isCollapsed();this.internalCollapsed.set(e),this.collapsedChange.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-sidebar"]],inputs:{title:[1,"title"],position:[1,"position"],collapsed:[1,"collapsed"]},outputs:{collapsedChange:"collapsedChange"},ngContentSelectors:zP,decls:5,vars:6,consts:[[1,"sidebar"],[1,"sidebar__header"],[1,"sidebar__header__text"],[3,"clickAction","title","size"],[1,"ph","ph-sidebar-simple"],[1,"sidebar__splitter"],[1,"sidebar__content"]],template:function(t,o){t&1&&(ae(HP),w(0,"div",0)(1,"div",1),K(2),X(3,$P,3,3),D(),X(4,GP,3,0),D()),t&2&&(ee("sidebar--collapsed",o.isCollapsed())("sidebar--right",o.position()==="right"),b(3),Q(o.title()?3:-1),b(),Q(o.isCollapsed()?-1:4))},dependencies:[to],styles:["[_nghost-%COMP%]{position:absolute;top:0;width:300px;height:100vh;padding:76px 0 12px 12px;box-sizing:border-box;pointer-events:none}[_nghost-%COMP%]:has(.sidebar--collapsed){width:max-content;height:auto}[_nghost-%COMP%]:has(.sidebar--right){right:0;left:auto;padding:76px 12px 12px 0}.sidebar[_ngcontent-%COMP%]{background:var(--ngd-ui-bg-primary-default);flex-direction:column;align-items:flex-start;display:flex;height:100%;pointer-events:all;gap:16px;padding:16px 0;border-radius:var(--ngd-token-radius-shell);border:1px solid var(--ngd-ui-stroke-primary-default)}.sidebar--collapsed[_ngcontent-%COMP%]{width:max-content;min-width:56px;min-height:56px;padding:8px;justify-content:center}.sidebar--collapsed[_ngcontent-%COMP%]   .sidebar__header[_ngcontent-%COMP%]{justify-content:center;margin:0}.sidebar--right.sidebar--collapsed[_ngcontent-%COMP%]{padding:8px 15px}.sidebar__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;align-self:stretch;margin:0 16px;min-height:38px;color:var(--ngd-txt-primary-default);font-size:16px;font-style:normal;font-weight:600;line-height:140%}.sidebar__splitter[_ngcontent-%COMP%]{display:flex;width:100%;height:1px;flex-direction:column;align-items:flex-start;flex-shrink:0;background:var(--ngd-ui-separator-primary-default)}.sidebar__content[_ngcontent-%COMP%]{display:flex;width:100%;padding:0 16px;flex-direction:column;align-items:flex-start;gap:8px;flex:1 0 0;overflow-y:auto}"],changeDetection:0})};var WP=(n,e)=>e.type||n;function qP(n,e){if(n&1&&(w(0,"ng-diagram-palette-item",2),A(1,"app-palette-item",2),w(2,"ng-diagram-palette-item-preview"),A(3,"app-palette-item-preview",2),D()()),n&2){let t=e.$implicit;I("item",t),b(),I("item",t),b(2),I("item",t)}}var yc=class n{model=_.required();scale=f(je).scale;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-palette"]],inputs:{model:[1,"model"]},decls:4,vars:1,consts:[[3,"title"],[1,"palette__item-container"],[3,"item"]],template:function(t,o){t&1&&(w(0,"app-sidebar",0)(1,"div",1),Xe(2,qP,4,3,"ng-diagram-palette-item",2,WP),D()()),t&2&&(I("title","Nodes Library"),b(2),Qe(o.model()))},dependencies:[lc,Ui,$i,vc,Gi],styles:["[_nghost-%COMP%]{display:contents}.palette__item-container[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;align-items:flex-start;gap:8px}.palette__item-container[_ngcontent-%COMP%]    >*{width:100%}.palette__item-container[_ngcontent-%COMP%]     .draggable{width:100%}"],changeDetection:0})};var F0=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,o){this._renderer=t,this._elementRef=o}setProperty(t,o){this._renderer.setProperty(this._elementRef.nativeElement,t,o)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(o){return new(o||n)(ge(ft),ge(Y))};static \u0275dir=R({type:n})}return n})(),vs=(()=>{class n extends F0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,features:[le]})}return n})(),Zi=new N(""),ZP={provide:Zi,useExisting:bt(()=>Yg),multi:!0},Yg=(()=>{class n extends vs{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(o,i){o&1&&x("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ke([ZP]),le]})}return n})(),YP={provide:Zi,useExisting:bt(()=>Yi),multi:!0};function XP(){let n=Rt()?Rt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var QP=new N(""),Yi=(()=>{class n extends F0{_compositionMode;_composing=!1;constructor(t,o,i){super(t,o),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!XP())}writeValue(t){let o=t??"";this.setProperty("value",o)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(o){return new(o||n)(ge(ft),ge(Y),ge(QP,8))};static \u0275dir=R({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,i){o&1&&x("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ke([YP]),le]})}return n})();var Xg=new N(""),KP=new N("");function JP(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function eA(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function I0(n){return null}function L0(n){return n!=null}function B0(n){return Mi(n)?Qt(n):n}function V0(n){let e={};return n.forEach(t=>{e=t!=null?g(g({},e),t):e}),Object.keys(e).length===0?null:e}function j0(n,e){return e.map(t=>t(n))}function tA(n){return!n.validate}function H0(n){return n.map(e=>tA(e)?e:t=>e.validate(t))}function nA(n){if(!n)return null;let e=n.filter(L0);return e.length==0?null:function(t){return V0(j0(t,e))}}function z0(n){return n!=null?nA(H0(n)):null}function oA(n){if(!n)return null;let e=n.filter(L0);return e.length==0?null:function(t){let o=j0(t,e).map(B0);return rl(o).pipe(Et(V0))}}function U0(n){return n!=null?oA(H0(n)):null}function x0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iA(n){return n._rawValidators}function rA(n){return n._rawAsyncValidators}function $g(n){return n?Array.isArray(n)?n:[n]:[]}function _c(n,e){return Array.isArray(n)?n.includes(e):n===e}function T0(n,e){let t=$g(e);return $g(n).forEach(i=>{_c(t,i)||t.push(i)}),t}function N0(n,e){return $g(e).filter(t=>!_c(n,t))}var Cc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=z0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=U0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control?.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Gg=class extends Cc{name;get formDirective(){return null}get path(){return null}},ms=class extends Cc{_parent=null;name=null;valueAccessor=null},Wg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var wc=(()=>{class n extends Wg{constructor(t){super(t)}static \u0275fac=function(o){return new(o||n)(ge(ms,2))};static \u0275dir=R({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,i){o&2&&ee("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[le]})}return n})();var fs="VALID",bc="INVALID",Wi="PENDING",ps="DISABLED",Go=class{},Dc=class extends Go{value;source;constructor(e,t){super(),this.value=e,this.source=t}},hs=class extends Go{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},gs=class extends Go{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},qi=class extends Go{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var qg=class extends Go{source;constructor(e){super(),this.source=e}};function sA(n){return(Ec(n)?n.validators:n)||null}function aA(n){return Array.isArray(n)?z0(n):n||null}function dA(n,e){return(Ec(e)?e.asyncValidators:n)||null}function cA(n){return Array.isArray(n)?U0(n):n||null}function Ec(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Zg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Oe(this.statusReactive)}set status(e){Oe(()=>this.statusReactive.set(e))}_status=m(()=>this.statusReactive());statusReactive=F(void 0);get valid(){return this.status===fs}get invalid(){return this.status===bc}get pending(){return this.status==Wi}get disabled(){return this.status===ps}get enabled(){return this.status!==ps}errors;get pristine(){return Oe(this.pristineReactive)}set pristine(e){Oe(()=>this.pristineReactive.set(e))}_pristine=m(()=>this.pristineReactive());pristineReactive=F(!0);get dirty(){return!this.pristine}get touched(){return Oe(this.touchedReactive)}set touched(e){Oe(()=>this.touchedReactive.set(e))}_touched=m(()=>this.touchedReactive());touchedReactive=F(!1);get untouched(){return!this.touched}_events=new ie;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(T0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(T0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(N0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(N0(e,this._rawAsyncValidators))}hasValidator(e){return _c(this._rawValidators,e)}hasAsyncValidator(e){return _c(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let o=e.sourceControl??this;e.onlySelf||this._parent?.markAsTouched(y(g({},e),{sourceControl:o})),t&&e.emitEvent!==!1&&this._events.next(new gs(!0,o))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:o})}),e.onlySelf||this._parent?._updateTouched(e,o),t&&e.emitEvent!==!1&&this._events.next(new gs(!1,o))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let o=e.sourceControl??this;e.onlySelf||this._parent?.markAsDirty(y(g({},e),{sourceControl:o})),t&&e.emitEvent!==!1&&this._events.next(new hs(!1,o))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),e.onlySelf||this._parent?._updatePristine(e,o),t&&e.emitEvent!==!1&&this._events.next(new hs(!0,o))}markAsPending(e={}){this.status=Wi;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qi(this.status,t)),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.markAsPending(y(g({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ps,this.errors=null,this._forEachChild(i=>{i.disable(y(g({},e),{onlySelf:!0}))}),this._updateValue();let o=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dc(this.value,o)),this._events.next(new qi(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(y(g({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fs,this._forEachChild(o=>{o.enable(y(g({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(y(g({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e,t){e.onlySelf||(this._parent?.updateValueAndValidity(e),e.skipPristineCheck||this._parent?._updatePristine({},t),this._parent?._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fs||this.status===Wi)&&this._runAsyncValidator(o,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dc(this.value,t)),this._events.next(new qi(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),e.onlySelf||this._parent?.updateValueAndValidity(y(g({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ps:fs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Wi,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let o=B0(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((o,i)=>o&&o._find(i),this)}getError(e,t){let o=t?this.get(t):this;return o?.errors?o.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,o){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||o)&&this._events.next(new qi(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,o)}_initObservables(){this.valueChanges=new re,this.statusChanges=new re}_calculateStatus(){return this._allControlsDisabled()?ps:this.errors?bc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wi)?Wi:this._anyControlsHaveStatus(bc)?bc:fs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let o=!this._anyControlsDirty(),i=this.pristine!==o;this.pristine=o,e.onlySelf||this._parent?._updatePristine(e,t),i&&this._events.next(new hs(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gs(this.touched,t)),e.onlySelf||this._parent?._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ec(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!!this._parent?.dirty&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=aA(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cA(this._rawAsyncValidators)}};var $0=new N("",{factory:()=>Qg}),Qg="always";function lA(n,e){return[...e.path,n]}function uA(n,e,t=Qg){pA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),hA(n,e),mA(n,e),gA(n,e),fA(n,e)}function k0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fA(n,e){if(e.valueAccessor.setDisabledState){let t=o=>{e.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function pA(n,e){let t=iA(n);e.validator!==null?n.setValidators(x0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let o=rA(n);e.asyncValidator!==null?n.setAsyncValidators(x0(o,e.asyncValidator)):typeof o=="function"&&n.setAsyncValidators([o]);let i=()=>n.updateValueAndValidity();k0(e._rawValidators,i),k0(e._rawAsyncValidators,i)}function hA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&G0(n,e)})}function gA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&G0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function G0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mA(n,e){let t=(o,i)=>{e.valueAccessor.writeValue(o),i&&e.viewToModelUpdate(o)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function vA(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function yA(n){return Object.getPrototypeOf(n.constructor)===vs}function bA(n,e){if(!e)return null;Array.isArray(e);let t,o,i;return e.forEach(r=>{r.constructor===Yi?t=r:yA(r)?o=r:i=r}),i||o||t||null}function P0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function A0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _A=class extends Zg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,o){super(sA(t),dA(o,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ec(t)&&(t.nonNullable||t.initialValueIsDefault)&&(A0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new qg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){P0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){P0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){A0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var CA={provide:ms,useExisting:bt(()=>ys)},R0=Promise.resolve(),ys=(()=>{class n extends ms{_changeDetectorRef;callSetDisabledState;control=new _A;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new re;constructor(t,o,i,r,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=bA(this,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let o=t.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),vA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective?.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){R0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let o=t.isDisabled.currentValue,i=o!==0&&Pn(o);R0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?lA(t,this._parent):[t]}static \u0275fac=function(o){return new(o||n)(ge(Gg,9),ge(Xg,10),ge(KP,10),ge(Zi,10),ge(Ii,8),ge($0,8))};static \u0275dir=R({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ke([CA]),le,qn]})}return n})();var DA={provide:Zi,useExisting:bt(()=>Kg),multi:!0},Kg=(()=>{class n extends vs{writeValue(t){let o=t??"";this.setProperty("value",o)}registerOnChange(t){this.onChange=o=>{t(o==""?null:parseFloat(o))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,i){o&1&&x("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ke([DA]),le]})}return n})();var wA={provide:Zi,useExisting:bt(()=>Mc),multi:!0};function W0(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function EA(n){return n.split(":")[0]}var Mc=(()=>{class n extends vs{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=f(At).injector;destroyRef=f(ut);cdr=f(Ii);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,dn({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let o=this._getOptionId(t),i=W0(o,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=o=>{this.value=this._getOptionValue(o),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),t))return o;return null}_getOptionValue(t){let o=EA(t);return this._optionMap.has(o)?this._optionMap.get(o):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(o,i){o&1&&x("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ke([wA]),le]})}return n})(),q0=(()=>{class n{_element;_renderer;_select;id;constructor(t,o,i){this._element=t,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(W0(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select?._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select?._optionMap.delete(this.id),this._select?._writeValueAfterRender()}static \u0275fac=function(o){return new(o||n)(ge(Y),ge(ft),ge(Mc,9))};static \u0275dir=R({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),MA={provide:Zi,useExisting:bt(()=>Z0),multi:!0};function O0(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function SA(n){return n.split(":")[0]}var Z0=(()=>{class n extends vs{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let o;if(Array.isArray(t)){let i=t.map(r=>this._getOptionId(r));o=(r,s)=>{r._setSelected(i.indexOf(s.toString())>-1)}}else o=(i,r)=>{i._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(t){this.onChange=o=>{let i=[],r=o.selectedOptions;if(r!==void 0){let s=r;for(let a=0;a<s.length;a++){let d=s[a],c=this._getOptionValue(d.value);i.push(c)}}else{let s=o.options;for(let a=0;a<s.length;a++){let d=s[a];if(d.selected){let c=this._getOptionValue(d.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){let o=(this._idCounter++).toString();return this._optionMap.set(o,t),o}_getOptionId(t){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,t))return o;return null}_getOptionValue(t){let o=SA(t);return this._optionMap.has(o)?this._optionMap.get(o)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(o,i){o&1&&x("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ke([MA]),le]})}return n})(),Y0=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,o,i){this._element=t,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(O0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(O0(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||n)(ge(Y),ge(ft),ge(Z0,9))};static \u0275dir=R({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function X0(n){return typeof n=="number"?n:parseFloat(n)}var Q0=(()=>{class n{_validator=I0;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let o=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):I0,this._onChange?.()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,features:[qn]})}return n})(),IA={provide:Xg,useExisting:bt(()=>Jg),multi:!0},Jg=(()=>{class n extends Q0{max;inputName="max";normalizeInput=t=>X0(t);createValidator=t=>eA(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&se("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Ke([IA]),le]})}return n})(),xA={provide:Xg,useExisting:bt(()=>em),multi:!0},em=(()=>{class n extends Q0{min;inputName="min";normalizeInput=t=>X0(t);createValidator=t=>JP(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ve(n)))(i||n)}})();static \u0275dir=R({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&se("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Ke([xA]),le]})}return n})();var TA=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=Ct({type:n});static \u0275inj=lt({})}return n})();var Sc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$0,useValue:t.callSetDisabledState??Qg}]}}static \u0275fac=function(o){return new(o||n)};static \u0275mod=Ct({type:n});static \u0275inj=lt({imports:[TA]})}return n})();var NA=(n,e)=>e.value;function kA(n,e){if(n&1&&(w(0,"option",7),V(1),D()),n&2){let t=e.$implicit;I("value",t.value),b(),we(t.label)}}function PA(n,e){if(n&1){let t=ht();w(0,"label",5),V(1,"Routing:"),D(),w(2,"select",6),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onRoutingChange(i))}),Xe(3,kA,2,2,"option",7,NA),D()}if(n&2){let t=T();b(2),I("ngModel",t.edgeRouting()),b(),Qe(t.routingOptions)}}function AA(n,e){if(n&1){let t=ht();w(0,"label",8),V(1,"Label Position (0-1):"),D(),w(2,"input",9),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onLabelPositionChange(i))}),D()}if(n&2){let t=T();b(2),I("ngModel",t.edgeLabelPosition())}}function RA(n,e){if(n&1){let t=ht();w(0,"label",10),V(1,"Snapping:"),D(),w(2,"div",11)(3,"div",12)(4,"label",13)(5,"input",14),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onSnapDragChange(i))}),D(),V(6," Drag "),D(),w(7,"input",15),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onSnapDragStepChange(i))}),D()(),w(8,"div",12)(9,"label",13)(10,"input",14),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onSnapResizeChange(i))}),D(),V(11," Resize "),D(),w(12,"input",15),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onSnapResizeStepChange(i))}),D()(),w(13,"div",12)(14,"label",13)(15,"input",14),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onSnapRotateChange(i))}),D(),V(16," Rotate "),D(),w(17,"input",16),x("ngModelChange",function(i){_e(t);let r=T();return Ce(r.onSnapRotateStepChange(i))}),D()()()}if(n&2){let t=T();b(5),I("ngModel",t.enableSnapDrag()),b(2),I("ngModel",t.snapDragStep())("disabled",!t.enableSnapDrag()),b(3),I("ngModel",t.enableSnapResize()),b(2),I("ngModel",t.snapResizeStep())("disabled",!t.enableSnapResize()),b(3),I("ngModel",t.enableSnapRotate()),b(2),I("ngModel",t.snapRotateStep())("disabled",!t.enableSnapRotate())}}var Ic=class n{label=_("");edgeRouting=_(null);edgeLabelPosition=_(null);enableSnapDrag=_(null);enableSnapResize=_(null);enableSnapRotate=_(null);snapDragStep=_(null);snapResizeStep=_(null);snapRotateStep=_(null);labelChange=ue();routingChange=ue();labelPositionChange=ue();snapDragChange=ue();snapResizeChange=ue();snapRotateChange=ue();snapDragStepChange=ue();snapResizeStepChange=ue();snapRotateStepChange=ue();routingOptions=[{value:"polyline",label:"Polyline"},{value:"orthogonal",label:"Orthogonal"},{value:"bezier",label:"Bezier"}];onInputChange(e){this.labelChange.emit(e)}onRoutingChange(e){this.routingChange.emit(e)}onLabelPositionChange(e){let t=parseFloat(e);if(isNaN(t))return;let o=Math.max(0,Math.min(1,t));this.labelPositionChange.emit(o)}onSnapDragChange(e){this.snapDragChange.emit(e)}onSnapResizeChange(e){this.snapResizeChange.emit(e)}onSnapRotateChange(e){this.snapRotateChange.emit(e)}onSnapDragStepChange(e){let t=parseFloat(e);isNaN(t)||t<=0||this.snapDragStepChange.emit(t)}onSnapResizeStepChange(e){let t=parseFloat(e);isNaN(t)||t<=0||this.snapResizeStepChange.emit(t)}onSnapRotateStepChange(e){let t=parseFloat(e);isNaN(t)||t<=0||this.snapRotateStepChange.emit(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-properties"]],inputs:{label:[1,"label"],edgeRouting:[1,"edgeRouting"],edgeLabelPosition:[1,"edgeLabelPosition"],enableSnapDrag:[1,"enableSnapDrag"],enableSnapResize:[1,"enableSnapResize"],enableSnapRotate:[1,"enableSnapRotate"],snapDragStep:[1,"snapDragStep"],snapResizeStep:[1,"snapResizeStep"],snapRotateStep:[1,"snapRotateStep"]},outputs:{labelChange:"labelChange",routingChange:"routingChange",labelPositionChange:"labelPositionChange",snapDragChange:"snapDragChange",snapResizeChange:"snapResizeChange",snapRotateChange:"snapRotateChange",snapDragStepChange:"snapDragStepChange",snapResizeStepChange:"snapResizeStepChange",snapRotateStepChange:"snapRotateStepChange"},decls:10,vars:6,consts:[[3,"position","collapsed"],["sidebarHeader",""],[1,"properties__form"],["for","property-input",1,"properties__label"],["id","property-input","type","text","placeholder","Enter value",1,"properties__input",3,"ngModelChange","ngModel"],["for","routing-select",1,"properties__label"],["id","routing-select",1,"properties__select",3,"ngModelChange","ngModel"],[3,"value"],["for","label-position-input",1,"properties__label"],["id","label-position-input","type","number","min","0","max","1","step","0.1","placeholder","0.5",1,"properties__input",3,"ngModelChange","ngModel"],[1,"properties__label"],[1,"properties__checkbox-group"],[1,"properties__snap-row"],[1,"properties__checkbox-label"],["type","checkbox",1,"properties__checkbox",3,"ngModelChange","ngModel"],["type","number","placeholder","10","min","1","step","1",1,"properties__snap-input",3,"ngModelChange","ngModel","disabled"],["type","number","placeholder","30","min","1","step","1",1,"properties__snap-input",3,"ngModelChange","ngModel","disabled"]],template:function(t,o){t&1&&(w(0,"app-sidebar",0)(1,"div",1),V(2,"Properties"),D(),w(3,"div",2)(4,"label",3),V(5,"Label:"),D(),w(6,"input",4),x("ngModelChange",function(r){return o.onInputChange(r)}),D(),X(7,PA,5,1),X(8,AA,3,1),X(9,RA,18,9),D()()),t&2&&(I("position","right")("collapsed",o.label()===null),b(6),I("ngModel",o.label()),b(),Q(o.edgeRouting()!==null?7:-1),b(),Q(o.edgeLabelPosition()!==null?8:-1),b(),Q(o.enableSnapDrag()!==null?9:-1))},dependencies:[Gi,Sc,q0,Y0,Yi,Kg,Yg,Mc,wc,em,Jg,ys],styles:['.properties__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;width:100%}.properties__label[_ngcontent-%COMP%]{color:var(--ngd-txt-primary-default);font-size:14px;font-weight:500;line-height:140%}.properties__input[_ngcontent-%COMP%], .properties__select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border-radius:6px;border:1px solid var(--ngd-ui-stroke-primary-default);background:var(--ngd-ui-bg-primary-default);color:var(--ngd-txt-primary-default);font-size:14px;line-height:140%;outline:none;transition:border-color .2s ease}.properties__input[_ngcontent-%COMP%]::placeholder, .properties__select[_ngcontent-%COMP%]::placeholder{color:var(--ngd-txt-primary-default);opacity:.5}.properties__input[_ngcontent-%COMP%]:hover, .properties__select[_ngcontent-%COMP%]:hover{border-color:var(--ngd-ui-stroke-primary-hover, var(--ngd-ui-stroke-primary-default))}.properties__input[_ngcontent-%COMP%]:focus, .properties__select[_ngcontent-%COMP%]:focus{border-color:var(--ngd-node-stroke-primary-hover)}.properties__select[_ngcontent-%COMP%]{cursor:pointer}.properties__checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.properties__snap-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.properties__checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--ngd-txt-primary-default);font-size:14px;line-height:140%;cursor:pointer;min-width:80px}.properties__checkbox[_ngcontent-%COMP%]{cursor:pointer;appearance:none;width:18px;height:18px;border:2px solid var(--ngd-ui-stroke-primary-default);border-radius:4px;background-color:var(--ngd-ui-bg-primary-default);transition:all .2s ease;position:relative;flex-shrink:0}.properties__checkbox[_ngcontent-%COMP%]:hover{border-color:var(--ngd-button-primary-bg-default)}.properties__checkbox[_ngcontent-%COMP%]:checked{background-color:var(--ngd-button-primary-bg-default);border-color:var(--ngd-button-primary-bg-default)}.properties__checkbox[_ngcontent-%COMP%]:checked:after{content:"";position:absolute;left:5px;top:2px;width:4px;height:8px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.properties__checkbox[_ngcontent-%COMP%]:focus{outline:none}.properties__checkbox[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 2px var(--ngd-input-stroke-primary-focus)}.properties__snap-input[_ngcontent-%COMP%]{width:60px;padding:4px 8px;border-radius:6px;border:1px solid var(--ngd-ui-stroke-primary-default);background:var(--ngd-ui-bg-primary-default);color:var(--ngd-txt-primary-default);font-size:14px;line-height:140%;outline:none;transition:border-color .2s ease,opacity .2s ease}.properties__snap-input[_ngcontent-%COMP%]::placeholder{color:var(--ngd-txt-primary-default);opacity:.5}.properties__snap-input[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--ngd-ui-stroke-primary-hover, var(--ngd-ui-stroke-primary-default))}.properties__snap-input[_ngcontent-%COMP%]:focus{border-color:var(--ngd-node-stroke-primary-hover)}.properties__snap-input[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}'],changeDetection:0})};var OA=[[["","left",""]],[["","name",""]],[["","right",""]]],FA=["[left]","[name]","[right]"],xc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ngd-top-navbar"]],ngContentSelectors:FA,decls:7,vars:0,consts:[[1,"navbar"],[1,"navbar__left-wrap"],[1,"navbar__name-wrap"],[1,"navbar__right-wrap"]],template:function(t,o){t&1&&(ae(OA),G(0,"div",0)(1,"div",1),K(2),U(),G(3,"div",2),K(4,1),U(),G(5,"div",3),K(6,2),U()())},dependencies:[rt],styles:["[_nghost-%COMP%]{width:100%}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:calc(34px + var(--ngd-token-spacing-top-navbar-v-pad) + var(--ngd-token-spacing-top-navbar-v-pad));padding:var(--ngd-token-spacing-top-navbar-v-pad) var(--ngd-token-spacing-top-navbar-h-pad);align-items:center;border-radius:var(--ngd-token-radius-shell);border:1px solid var(--ngd-ui-stroke-primary-default);background:var(--ngd-ui-bg-primary-default)}.navbar[_ngcontent-%COMP%]     .navbar__left-wrap [left]{display:flex;align-items:center;gap:32px}.navbar[_ngcontent-%COMP%]     .navbar__name-wrap [name]{display:inline-flex;padding:0 16px;align-items:center;gap:var(--ngd-token-spacing-top-navbar-gap)}.navbar[_ngcontent-%COMP%]     .navbar__right-wrap [right]{display:flex;justify-content:flex-end;align-items:center;gap:24px}"],changeDetection:0})};var LA=(n,e)=>e.id;function BA(n,e){if(n&1){let t=ht();w(0,"ngd-nav-button",2),x("clickAction",function(){_e(t);let i=T();return Ce(i.toggleSwitch.emit())}),A(1,"i"),D()}if(n&2){let t=e.$implicit,o=T();I("active",t.id===o.activeButton())("title",t.title)("round",!0)("size","small"),b(),Se(`ph ${t.icon}`)}}var Tc=class n{buttons=_([]);activeButton=_("");toggleSwitch=ue();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["ngd-segment-picker"]],inputs:{buttons:[1,"buttons"],activeButton:[1,"activeButton"]},outputs:{toggleSwitch:"toggleSwitch"},decls:3,vars:0,consts:[[1,"segment"],[3,"active","title","round","size"],[3,"clickAction","active","title","round","size"]],template:function(t,o){t&1&&(w(0,"div",0),Xe(1,BA,2,6,"ngd-nav-button",1,LA),D()),t&2&&(b(),Qe(o.buttons()))},dependencies:[rt,to],styles:[".segment[_ngcontent-%COMP%]{display:inline-flex;padding:var(--ngd-token-spacing-seg-picker-pad);align-items:center;gap:var(--ngd-token-spacing-seg-picker-gap);border-radius:var(--ngd-token-radius-button-round);background:var(--ngd-ui-bg-tertiary-default)}"],changeDetection:0})};var Xi=class n{_currentTheme=F("light");currentTheme=this._currentTheme.asReadonly();mutationObserver;constructor(){this.initializeTheme(),this.setupThemeObserver()}initializeTheme(){let e=document.documentElement.getAttribute("data-theme");(e==="dark"||e==="light")&&this._currentTheme.set(e)}setupThemeObserver(){let e=document.documentElement;this.mutationObserver=new MutationObserver(t=>{t.forEach(o=>{if(o.type==="attributes"&&o.attributeName==="data-theme"){let i=e.getAttribute("data-theme");(i==="dark"||i==="light")&&this._currentTheme.set(i)}})}),this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["data-theme"]})}setTheme(e){console.log("CHANGE THEME",e),document.documentElement.setAttribute("data-theme",e)}toggleTheme(){let e=this.currentTheme()==="light"?"dark":"light";this.setTheme(e)}destroy(){this.mutationObserver&&this.mutationObserver.disconnect()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nc=class n{themeService=f(Xi);themeButtons=[{id:"light",icon:"ph-sun",title:"Light Theme"},{id:"dark",icon:"ph-moon",title:"Dark Theme"}];logoSrc=m(()=>this.themeService.currentTheme()==="dark"?"ng-diagram-logo-white.svg":"ng-diagram-logo-black.svg");currentTheme=this.themeService.currentTheme;toggleDebugModeClick=ue();backgroundTypeChange=ue();searchNodeClick=ue();isDebugMode=_.required();backgroundType=_("dots");searchQuery=F("");toggleTheme(){this.themeService.toggleTheme()}setBackgroundType(e){this.backgroundTypeChange.emit(e)}onSearch(){let e=this.searchQuery();e.trim()&&this.searchNodeClick.emit(e.trim())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-navbar"]],inputs:{isDebugMode:[1,"isDebugMode"],backgroundType:[1,"backgroundType"]},outputs:{toggleDebugModeClick:"toggleDebugModeClick",backgroundTypeChange:"backgroundTypeChange",searchNodeClick:"searchNodeClick"},decls:21,vars:9,consts:[["left",""],["href","https://www.ngdiagram.dev/","target","_blank","rel","noopener noreferrer",1,"logo-link"],["alt","ngDiagram",3,"src"],["name",""],[1,"search-container"],[1,"ph","ph-magnifying-glass","search-icon"],["type","text","placeholder","Search nodes...",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-button",3,"click","disabled"],["right",""],[1,"button-group"],["title","Solid Background","size","small",3,"clickAction","active"],[1,"ph","ph-square"],["title","Dots Background","size","small",3,"clickAction","active"],[1,"ph","ph-dots-nine"],["title","Grid Background","size","small",3,"clickAction","active"],[1,"ph","ph-grid-four"],["title","Toggle debug mode",3,"clickAction","active"],[1,"ph","ph-bug"],[3,"toggleSwitch","buttons","activeButton"]],template:function(t,o){t&1&&(w(0,"ngd-top-navbar")(1,"div",0)(2,"a",1),A(3,"img",2),D()(),w(4,"div",3)(5,"div",4),A(6,"i",5),w(7,"input",6),pd("ngModelChange",function(r){return Zf(o.searchQuery,r)||(o.searchQuery=r),r}),x("keyup.enter",function(){return o.onSearch()}),D(),w(8,"button",7),x("click",function(){return o.onSearch()}),V(9," Search "),D()()(),w(10,"div",8)(11,"div",9)(12,"ngd-nav-button",10),x("clickAction",function(){return o.setBackgroundType("solid")}),A(13,"i",11),D(),w(14,"ngd-nav-button",12),x("clickAction",function(){return o.setBackgroundType("dots")}),A(15,"i",13),D(),w(16,"ngd-nav-button",14),x("clickAction",function(){return o.setBackgroundType("grid")}),A(17,"i",15),D()(),w(18,"ngd-nav-button",16),x("clickAction",function(){return o.toggleDebugModeClick.emit()}),A(19,"i",17),D(),w(20,"ngd-segment-picker",18),x("toggleSwitch",function(){return o.toggleTheme()}),D()()()),t&2&&(b(3),I("src",o.logoSrc(),gf),b(4),fd("ngModel",o.searchQuery),b(),I("disabled",!o.searchQuery().trim()),b(4),I("active",o.backgroundType()==="solid"),b(2),I("active",o.backgroundType()==="dots"),b(2),I("active",o.backgroundType()==="grid"),b(2),I("active",o.isDebugMode()),b(2),I("buttons",o.themeButtons)("activeButton",o.currentTheme()))},dependencies:[rt,Sc,Yi,wc,ys,xc,Tc,to],styles:['[_nghost-%COMP%]{position:absolute;top:0;width:100%;padding:12px;display:flex;justify-content:center}.logo-link[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;transition:opacity .2s ease}.logo-link[_ngcontent-%COMP%]:hover{opacity:.8}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 8px 6px 12px;background:var(--ngd-ui-surface-secondary-default);border:1.5px solid var(--ngd-ui-stroke-primary-default);border-radius:8px;min-width:300px;transition:border-color .2s ease}.search-container[_ngcontent-%COMP%]:focus-within{border-color:var(--ngd-node-stroke-primary-hover)}.search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:var(--ngd-txt-primary-default);font-size:18px;flex-shrink:0}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;background:transparent;color:var(--ngd-txt-primary-default);font-size:14px;font-family:inherit;font-weight:600;line-height:140%;padding:4px 0;min-width:0}.search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:var(--ngd-txt-secondary-default);font-weight:400}.search-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{padding:6px 12px;background:var(--ngd-ui-surface-brand-default);color:#fff;border:none;border-radius:6px;font-size:13px;font-weight:500;font-family:inherit;line-height:140%;cursor:pointer;transition:all .2s ease;white-space:nowrap;flex-shrink:0}.search-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--ngd-ui-surface-brand-hover)}.search-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:active:not(:disabled){background:var(--ngd-ui-surface-brand-pressed);transform:scale(.98)}.search-container[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.button-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;border:1px solid var(--ngd-ui-stroke-primary-default);border-radius:8px;overflow:hidden}.button-group[_ngcontent-%COMP%]     ngd-nav-button:not(:last-child):after{content:"";position:absolute;right:0;top:0;bottom:0;width:1px;background:var(--ngd-ui-separator-primary-default);pointer-events:none}.button-group[_ngcontent-%COMP%]     ngd-nav-button:not(:last-child){position:relative}.button-group[_ngcontent-%COMP%]     ngd-nav-button .button{border:none!important;border-radius:0!important}'],changeDetection:0})};var J0=[{type:"trigger",data:{label:"Trigger",description:"Initiate workflows",icon:"ph-lightning"}},{type:"custom",data:{label:"Task Status",description:"Track task progress",icon:"ph-check-circle",status:"pending"}},{type:"group",data:{label:"Group",description:"Group nodes together",icon:"ph-squares-four"},isGroup:!0}];function VA(n,e){if(n&1&&(w(0,"ng-diagram-base-edge-label",1)(1,"div",2),V(2),D()()),n&2){let t=T();I("id",t.edge().id+"-label")("positionOnEdge",t.edge().data.positionOnEdge??.5),b(),ee("selected",t.edge().selected),b(),un(" ",t.edge().data.label," ")}}var kc=class n{edge=_.required();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-custom-edge"]],inputs:{edge:[1,"edge"]},decls:2,vars:2,consts:[[1,"custom-edge",3,"edge"],[1,"custom-edge-label",3,"id","positionOnEdge"],[1,"custom-edge-label__content"]],template:function(t,o){t&1&&(w(0,"ng-diagram-base-edge",0),X(1,VA,3,5,"ng-diagram-base-edge-label",1),D()),t&2&&(I("edge",o.edge()),b(),Q(o.edge().data.label?1:-1))},dependencies:[zo,ss],styles:["ng-diagram-base-edge.custom-edge[_ngcontent-%COMP%]{--edge-stroke: var(--ngd-default-edge-stroke);--edge-stroke-transition: stroke .1s ease-in-out}ng-diagram-base-edge.custom-edge[_ngcontent-%COMP%]:hover:not(.selected):not(.temporary){--edge-stroke: var(--ngd-default-edge-stroke-hover);--edge-label-border-color: var(--ngd-default-edge-stroke-hover)}ng-diagram-base-edge.custom-edge.selected[_ngcontent-%COMP%]{--edge-stroke: var(--ngd-default-edge-stroke-selected);--edge-label-border-color: var(--ngd-default-edge-stroke-selected)}ng-diagram-base-edge.custom-edge.temporary[_ngcontent-%COMP%]{--edge-stroke-opacity: .5}.custom-edge-label__content[_ngcontent-%COMP%]{display:flex;padding:var(--edge-label-padding, 4px 8px);border-radius:var(--edge-label-border-radius, 4px);font-size:var(--edge-label-font-size, 12px);background:var(--edge-label-background-color, var(--ngd-default-edge-label-background-color));color:var(--edge-label-text-color, var(--ngd-default-edge-label-color));border:var(--edge-label-border-width, 1px) solid var(--edge-label-border-color, var(--ngd-default-edge-label-border-color));transition:var(--edge-label-border-transition, border-color .1s ease-in-out)}"],changeDetection:0})};var eD=new Hi([["custom-edge",kc]]);function jA(n,e){if(n&1){let t=ht();G(0,"li",1),it("click",function(){_e(t);let i=T();return Ce(i.onCopy())}),V(1,"Copy"),U(),G(2,"li",1),it("click",function(){_e(t);let i=T();return Ce(i.onCut())}),V(3,"Cut"),U(),G(4,"li",1),it("click",function(){_e(t);let i=T();return Ce(i.onDelete())}),V(5,"Delete"),U(),ke(6,"li",2),G(7,"li",1),it("click",function(){_e(t);let i=T();return Ce(i.onBringToFront())}),V(8,"Bring to Front"),U(),G(9,"li",1),it("click",function(){_e(t);let i=T();return Ce(i.onSendToBack())}),V(10,"Send to Back"),U()}}function HA(n,e){if(n&1){let t=ht();G(0,"li",1),it("click",function(i){_e(t);let r=T();return Ce(r.onPaste(i))}),V(1,"Paste"),U()}}var Pc=class n{contextMenuService=f(Dt);showMenu=this.contextMenuService.visibility;menuPosition=this.contextMenuService.menuPosition;nodeContext=this.contextMenuService.nodeContext;copyClick=ue();cutClick=ue();pasteClick=ue();deleteClick=ue();bringToFrontClick=ue();sendToBackClick=ue();closeMenu(){this.contextMenuService.hideMenu()}onCopy(){this.copyClick.emit()}onCut(){this.cutClick.emit()}onPaste(e){this.pasteClick.emit({x:e.clientX,y:e.clientY})}onDelete(){this.deleteClick.emit()}onBringToFront(){this.bringToFrontClick.emit()}onSendToBack(){this.sendToBackClick.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-context-menu"]],hostBindings:function(t,o){t&1&&x("click",function(){return o.closeMenu()},Po)},outputs:{copyClick:"copyClick",cutClick:"cutClick",pasteClick:"pasteClick",deleteClick:"deleteClick",bringToFrontClick:"bringToFrontClick",sendToBackClick:"sendToBackClick"},decls:4,vars:7,consts:[[1,"context-menu"],[3,"click"],[1,"separator"]],template:function(t,o){t&1&&(G(0,"div",0)(1,"ul"),X(2,jA,11,0)(3,HA,2,0,"li"),U()()),t&2&&($e("top",o.menuPosition().y,"px")("left",o.menuPosition().x,"px"),ee("show",o.showMenu()),b(2),Q(o.nodeContext()?2:3))},styles:[".context-menu[_ngcontent-%COMP%]{position:absolute;display:none;background-color:var(--ngd-node-bg-primary-default);border:1px solid var(--ngd-node-stroke-primary-default);border-radius:6px;z-index:1000;min-width:120px;box-shadow:0 2px 8px #00000026}.context-menu.show[_ngcontent-%COMP%]{display:block}.context-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:4px 0}.context-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 16px;cursor:pointer;color:var(--ngd-txt-primary-default);font-size:14px;line-height:140%;transition:background-color .15s ease}.context-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:not(.separator){background-color:var(--ngd-node-bg-primary-hover)}.context-menu[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{color:var(--ngd-txt-tertiary-default);pointer-events:none}.context-menu[_ngcontent-%COMP%]   li.separator[_ngcontent-%COMP%]{padding:0;margin:4px 0;height:1px;background-color:var(--ngd-ui-separator-primary-default);cursor:default;pointer-events:none}"]})};var bs=class n{selectionService=f(at);modelService=f(Zt);diagramService=f(st);label=m(()=>{let e=this.selectionService.selection(),t=e.nodes[0]??e.edges[0];return t?t.data.label||"":null});edgeRouting=m(()=>{let t=this.selectionService.selection().edges[0];return t?t.routing??this.diagramService.config().edgeRouting?.defaultRouting??"orthogonal":null});edgeLabelPosition=m(()=>{let t=this.selectionService.selection().edges[0];return!t||!t.data.label||!t.type?null:t.data.positionOnEdge??.5});enableSnapDrag=m(()=>{let t=this.selectionService.selection().nodes[0];return t?t.data.enableSnapDrag??!1:null});enableSnapResize=m(()=>{let t=this.selectionService.selection().nodes[0];return t?t.data.enableSnapResize??!1:null});enableSnapRotate=m(()=>{let t=this.selectionService.selection().nodes[0];return t?t.data.enableSnapRotate??!1:null});snapDragStep=m(()=>{let t=this.selectionService.selection().nodes[0];return t?t.data.snapDragStep??10:null});snapResizeStep=m(()=>{let t=this.selectionService.selection().nodes[0];return t?t.data.snapResizeStep??10:null});snapRotateStep=m(()=>{let t=this.selectionService.selection().nodes[0];return t?t.data.snapRotateStep??30:null});updateLabel(e){let{nodes:t,edges:o}=this.selectionService.selection(),i=t[0],r=o[0];if(i){this.modelService.updateNodeData(i.id,y(g({},i.data),{label:e}));return}r&&this.modelService.updateEdgeData(r.id,y(g({},r.data),{label:e}))}updateRouting(e){let{edges:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateEdge(o.id,{routing:e})}updateLabelPosition(e){let{edges:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateEdgeData(o.id,y(g({},o.data),{positionOnEdge:e}))}updateSnapDrag(e){let{nodes:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateNodeData(o.id,y(g({},o.data),{enableSnapDrag:e}))}updateSnapResize(e){let{nodes:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateNodeData(o.id,y(g({},o.data),{enableSnapResize:e}))}updateSnapRotate(e){let{nodes:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateNodeData(o.id,y(g({},o.data),{enableSnapRotate:e}))}updateSnapDragStep(e){let{nodes:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateNodeData(o.id,y(g({},o.data),{snapDragStep:e}))}updateSnapResizeStep(e){let{nodes:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateNodeData(o.id,y(g({},o.data),{snapResizeStep:e}))}updateSnapRotateStep(e){let{nodes:t}=this.selectionService.selection(),o=t[0];o&&this.modelService.updateNodeData(o.id,y(g({},o.data),{snapRotateStep:e}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};var _s=class n{snackBar=f(jd);debugMode=F(!1);onDiagramInit(e){this.debugMode()&&this.snackBar.open("Diagram initialized","",{duration:4e3})}onEdgeDrawn(e){this.debugMode()&&this.snackBar.open(`Edge drawn from ${e.edge.source} to ${e.edge.target}`,"",{duration:4e3})}onSelectionMoved(e){if(!this.debugMode())return;let t=e.nodes.length;this.snackBar.open(`${t} node(s) moved`,"",{duration:4e3})}onSelectionChanged(e){if(!this.debugMode())return;let t=e.selectedNodes.length,o=e.selectedEdges.length;this.snackBar.open(`Selection: ${t} node(s), ${o} edge(s)`,"",{duration:4e3})}onSelectionRemoved(e){if(!this.debugMode())return;let t=e.deletedNodes.length,o=e.deletedEdges.length;this.snackBar.open(`Deleted ${t} node(s), ${o} edge(s)`,"",{duration:4e3})}onGroupMembershipChanged(e){this.debugMode()&&this.snackBar.open("Group membership changed","",{duration:4e3})}onSelectionRotated(e){this.debugMode()&&this.snackBar.open(`Node rotated to ${Math.round(e.angle)}\xB0`,"",{duration:4e3})}onViewportChanged(e){if(!this.debugMode())return;let t=(e.viewport.scale*100).toFixed(0);this.snackBar.open(`Zoom: ${t}%, Position: ${e.viewport.x}, ${e.viewport.y}`,"",{duration:4e3})}onClipboardPasted(e){if(!this.debugMode())return;let t=e.nodes.length,o=e.edges.length;this.snackBar.open(`Pasted ${t} node(s), ${o} edge(s)`,"",{duration:4e3})}onNodeResized(e){if(!this.debugMode())return;let t=e.node.size;if(!t)return;let o=Math.round(t.width),i=Math.round(t.height);this.snackBar.open(`Node resized to ${o}\xD7${i}`,"",{duration:4e3})}onPaletteItemDropped(e){if(!this.debugMode())return;let t=e.node.data.label;this.snackBar.open(`Palette item dropped: ${t}`,"",{duration:4e3})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};var Cs=class n{clipboardService=f(ls);selectionService=f(at);nodeService=f(us);viewportService=f(je);copy(){this.clipboardService.copy()}cut(){this.clipboardService.cut()}paste(e){let t=this.viewportService.clientToFlowPosition({x:e.x,y:e.y});this.clipboardService.paste(t)}delete(){this.selectionService.deleteSelection()}bringToFront(){let t=this.selectionService.selection().nodes.map(o=>o.id);t.length>0&&this.nodeService.bringToFront(t)}sendToBack(){let t=this.selectionService.selection().nodes.map(o=>o.id);t.length>0&&this.nodeService.sendToBack(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=C({token:n,factory:n.\u0275fac})};function tD(n){return{zoom:{max:2,zoomToFit:{onInit:!0,padding:[100,50,50,300]}},background:{dotSpacing:40},snapping:{shouldSnapDragForNode:e=>e.data.enableSnapDrag??!1,shouldSnapResizeForNode:e=>e.data.enableSnapResize??!1,computeSnapForNodeDrag:e=>{let t=e.data.snapDragStep??10;return{width:t,height:t}},computeSnapForNodeSize:e=>{let t=e.data.snapResizeStep??10;return{width:t,height:t}}},nodeRotation:{shouldSnapForNode:e=>e.data.enableSnapRotate??!1,computeSnapAngleForNode:e=>e.data.snapRotateStep??30},resize:{getMinNodeSize:e=>n.get(e.type??"")??{width:100,height:50}},linking:{finalEdgeDataBuilder:e=>y(g({},e),{type:"custom-edge"})}}}var nD={name:"horizontal-lock",execute:(n,e)=>M(null,null,function*(){let o=n.helpers.getAffectedNodeIds(["position"]).map(i=>{let r=n.nodesMap.get(i),s=n.initialNodesMap.get(i);return r&&s&&r.data?.label==="horizontal"&&r.position&&s.position?{id:i,position:{x:r.position.x,y:s.position.y}}:null}).filter(i=>i!==null);e(o.length>0?{nodesToUpdate:o}:void 0)})};function zA(n,e){if(n&1&&A(0,"ng-diagram-background",2),n&2){let t=T();I("type",t.backgroundType()==="grid"?"grid":"dots")}}var Ac=class n{diagramService=f(st);diagramSelectionService=f(at);diagramModelService=f(Zt);viewportService=f(je);contextMenuService=f(Dt);snackBar=f(jd);propertiesFacade=f(bs);debugEvents=f(_s);contextMenuFacade=f(Cs);paletteModel=J0;nodeTemplateMap=mc;edgeTemplateMap=eD;middlewares=C0(e=>[nD,...e]);backgroundType=F("dots");debugMode=this.debugEvents.debugMode;model=w0({nodes:[{id:"1",data:{},position:{x:100,y:100},autoSize:!1,size:{width:150,height:50}},{id:"2",data:{},position:{x:400,y:200},autoSize:!1,size:{width:150,height:50}},{id:"3",type:"group",isGroup:!0,data:{},position:{x:300,y:400}},{id:"4",data:{},position:{x:360,y:500},groupId:"3"}],edges:[{id:"1",source:"1",target:"2",sourcePort:"port-right",targetPort:"port-left",targetArrowhead:"ng-diagram-arrow",routing:"bezier",data:{label:"label"}}]});config=tD(this.initializeMinNodeSizes());label=this.propertiesFacade.label;edgeRouting=this.propertiesFacade.edgeRouting;edgeLabelPosition=this.propertiesFacade.edgeLabelPosition;enableSnapDrag=this.propertiesFacade.enableSnapDrag;enableSnapResize=this.propertiesFacade.enableSnapResize;enableSnapRotate=this.propertiesFacade.enableSnapRotate;snapDragStep=this.propertiesFacade.snapDragStep;snapResizeStep=this.propertiesFacade.snapResizeStep;snapRotateStep=this.propertiesFacade.snapRotateStep;constructor(){Me(()=>{this.diagramService.isInitialized()&&this.diagramService.updateConfig({debugMode:this.debugMode()})})}onDiagramInit(e){this.debugEvents.onDiagramInit(e)}onEdgeDrawn(e){this.debugEvents.onEdgeDrawn(e)}onSelectionMoved(e){this.debugEvents.onSelectionMoved(e)}onSelectionChanged(e){this.debugEvents.onSelectionChanged(e)}onSelectionRemoved(e){this.debugEvents.onSelectionRemoved(e)}onGroupMembershipChanged(e){this.debugEvents.onGroupMembershipChanged(e)}onSelectionRotated(e){this.debugEvents.onSelectionRotated(e)}onViewportChanged(e){this.debugEvents.onViewportChanged(e)}onClipboardPasted(e){this.debugEvents.onClipboardPasted(e)}onNodeResized(e){this.debugEvents.onNodeResized(e)}onPaletteItemDropped(e){this.debugEvents.onPaletteItemDropped(e)}labelChange(e){this.propertiesFacade.updateLabel(e)}routingChange(e){this.propertiesFacade.updateRouting(e)}labelPositionChange(e){this.propertiesFacade.updateLabelPosition(e)}snapDragChange(e){this.propertiesFacade.updateSnapDrag(e)}snapResizeChange(e){this.propertiesFacade.updateSnapResize(e)}snapRotateChange(e){this.propertiesFacade.updateSnapRotate(e)}snapDragStepChange(e){this.propertiesFacade.updateSnapDragStep(e)}snapResizeStepChange(e){this.propertiesFacade.updateSnapResizeStep(e)}snapRotateStepChange(e){this.propertiesFacade.updateSnapRotateStep(e)}onContextMenuCopy(){this.contextMenuFacade.copy()}onContextMenuCut(){this.contextMenuFacade.cut()}onContextMenuPaste(e){this.contextMenuFacade.paste(e)}onContextMenuDelete(){this.contextMenuFacade.delete()}onContextMenuBringToFront(){this.contextMenuFacade.bringToFront()}onContextMenuSendToBack(){this.contextMenuFacade.sendToBack()}onDiagramRightClick(e){e.preventDefault(),e.stopPropagation();let t=this.viewportService.clientToFlowViewportPosition({x:e.clientX,y:e.clientY});this.contextMenuService.showDiagramMenu(t)}onSearchNode(e){let o=this.diagramModelService.nodes().find(i=>(i.data.label||i.id).toLowerCase().includes(e.toLowerCase()));o?(this.diagramSelectionService.select([o.id]),this.viewportService.centerOnNode(o.id)):this.snackBar.open(`No node found matching "${e}"`,"",{duration:3e3})}initializeMinNodeSizes(){let e=getComputedStyle(document.documentElement),t=["trigger","custom","group"];return new Map(t.map(i=>[i,{width:parseInt(e.getPropertyValue(`--node-${i}-min-width`)),height:parseInt(e.getPropertyValue(`--node-${i}-min-height`))}]))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-diagram"]],features:[Ke([Dt,bs,_s,Cs,E0()])],decls:8,vars:18,consts:[[1,"diagram-container",3,"contextmenu"],[3,"diagramInit","edgeDrawn","selectionMoved","selectionChanged","selectionRemoved","groupMembershipChanged","selectionRotated","viewportChanged","clipboardPasted","nodeResized","paletteItemDropped","model","config","nodeTemplateMap","edgeTemplateMap","middlewares"],[3,"type"],[3,"toggleDebugModeClick","backgroundTypeChange","searchNodeClick","isDebugMode","backgroundType"],[3,"model"],[3,"labelChange","routingChange","labelPositionChange","snapDragChange","snapResizeChange","snapRotateChange","snapDragStepChange","snapResizeStepChange","snapRotateStepChange","label","edgeRouting","edgeLabelPosition","enableSnapDrag","enableSnapResize","enableSnapRotate","snapDragStep","snapResizeStep","snapRotateStep"],[3,"copyClick","cutClick","pasteClick","deleteClick","bringToFrontClick","sendToBackClick"]],template:function(t,o){t&1&&(w(0,"div",0),x("contextmenu",function(r){return o.onDiagramRightClick(r)}),w(1,"ng-diagram",1),x("diagramInit",function(r){return o.onDiagramInit(r)})("edgeDrawn",function(r){return o.onEdgeDrawn(r)})("selectionMoved",function(r){return o.onSelectionMoved(r)})("selectionChanged",function(r){return o.onSelectionChanged(r)})("selectionRemoved",function(r){return o.onSelectionRemoved(r)})("groupMembershipChanged",function(r){return o.onGroupMembershipChanged(r)})("selectionRotated",function(r){return o.onSelectionRotated(r)})("viewportChanged",function(r){return o.onViewportChanged(r)})("clipboardPasted",function(r){return o.onClipboardPasted(r)})("nodeResized",function(r){return o.onNodeResized(r)})("paletteItemDropped",function(r){return o.onPaletteItemDropped(r)}),X(2,zA,1,1,"ng-diagram-background",2),D(),A(3,"ng-diagram-minimap"),w(4,"app-navbar",3),x("toggleDebugModeClick",function(){return o.debugMode.set(!o.debugMode())})("backgroundTypeChange",function(r){return o.backgroundType.set(r)})("searchNodeClick",function(r){return o.onSearchNode(r)}),D(),A(5,"app-palette",4),w(6,"app-properties",5),x("labelChange",function(r){return o.labelChange(r)})("routingChange",function(r){return o.routingChange(r)})("labelPositionChange",function(r){return o.labelPositionChange(r)})("snapDragChange",function(r){return o.snapDragChange(r)})("snapResizeChange",function(r){return o.snapResizeChange(r)})("snapRotateChange",function(r){return o.snapRotateChange(r)})("snapDragStepChange",function(r){return o.snapDragStepChange(r)})("snapResizeStepChange",function(r){return o.snapResizeStepChange(r)})("snapRotateStepChange",function(r){return o.snapRotateStepChange(r)}),D(),w(7,"app-context-menu",6),x("copyClick",function(){return o.onContextMenuCopy()})("cutClick",function(){return o.onContextMenuCut()})("pasteClick",function(r){return o.onContextMenuPaste(r)})("deleteClick",function(){return o.onContextMenuDelete()})("bringToFrontClick",function(){return o.onContextMenuBringToFront()})("sendToBackClick",function(){return o.onContextMenuSendToBack()}),D()()),t&2&&(b(),I("model",o.model)("config",o.config)("nodeTemplateMap",o.nodeTemplateMap)("edgeTemplateMap",o.edgeTemplateMap)("middlewares",o.middlewares),b(),Q(o.backgroundType()!=="solid"?2:-1),b(2),I("isDebugMode",o.debugMode())("backgroundType",o.backgroundType()),b(),I("model",o.paletteModel),b(),I("label",o.label())("edgeRouting",o.edgeRouting())("edgeLabelPosition",o.edgeLabelPosition())("enableSnapDrag",o.enableSnapDrag())("enableSnapResize",o.enableSnapResize())("enableSnapRotate",o.enableSnapRotate())("snapDragStep",o.snapDragStep())("snapResizeStep",o.snapResizeStep())("snapRotateStep",o.snapRotateStep()))},dependencies:[rt,yc,Ic,cs,Xd,cc,Nc,Pc],styles:["[_nghost-%COMP%]{flex:1;display:flex;height:100%}.diagram-container[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0})};var Rc=class n{themeService=f(Xi);ngOnDestroy(){this.themeService.destroy()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,o){t&1&&A(0,"app-diagram")},dependencies:[Ac],encapsulation:2})};cp(Rc,U_).catch(n=>console.error(n));
